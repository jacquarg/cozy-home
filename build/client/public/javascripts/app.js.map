{"version":3,"sources":["app/collections/application.coffee","app/collections/background.coffee","app/collections/device.coffee","app/collections/notifications.coffee","app/collections/stackApplication.coffee","app/helpers/client.coffee","app/helpers/color-set.coffee","app/helpers/locales.coffee","app/helpers/slugify.coffee","app/helpers/timezone.coffee","app/initialize.coffee","app/lib/base_collection.coffee","app/lib/base_model.coffee","app/lib/base_view.coffee","app/lib/intent_manager.coffee","app/lib/proxyclient.coffee","app/lib/request.coffee","app/lib/socket_listener.coffee","app/lib/usetracker.coffee","app/lib/view_collection.coffee","app/locales/en.json","app/models/application.coffee","app/models/background.coffee","app/models/device.coffee","app/models/instance.coffee","app/models/notification.coffee","app/models/photo.coffee","app/models/stack_application.coffee","app/models/token.coffee","app/models/user.coffee","app/routers/main_router.coffee","app/templates/account.jade","app/templates/album_thumb.jade","app/templates/application_iframe.jade","app/templates/background_list.jade","app/templates/background_list_item.jade","app/templates/config_application.jade","app/templates/config_application_list.jade","app/templates/config_applications.jade","app/templates/config_device.jade","app/templates/config_device_list.jade","app/templates/error_modal.jade","app/templates/help.jade","app/templates/help_url.jade","app/templates/home.jade","app/templates/home_application.jade","app/templates/layout.jade","app/templates/long_list_image.jade","app/templates/market.jade","app/templates/market_application.jade","app/templates/menu_application.jade","app/templates/menu_applications.jade","app/templates/navbar.jade","app/templates/navbar_app_btn.jade","app/templates/notification.jade","app/templates/notifications.jade","app/templates/object_picker.jade","app/templates/object_picker_photourl.jade","app/templates/object_picker_search.jade","app/templates/object_picker_upload.jade","app/templates/popover_description.jade","app/templates/popover_permissions.jade","app/templates/tutorial.jade","app/templates/update_stack_modal.jade","app/views/account.coffee","app/views/background_list.coffee","app/views/background_list_item.coffee","app/views/config_application.coffee","app/views/config_application_list.coffee","app/views/config_applications.coffee","app/views/config_device.coffee","app/views/config_device_list.coffee","app/views/error_modal.coffee","app/views/help.coffee","app/views/home.coffee","app/views/home_application.coffee","app/views/image_list.coffee","app/views/main.coffee","app/views/market.coffee","app/views/market_application.coffee","app/views/menu_application.coffee","app/views/menu_applications.coffee","app/views/modal.coffee","app/views/navbar.coffee","app/views/notification_view.coffee","app/views/notifications_view.coffee","app/views/object_picker.coffee","app/views/object_picker_album.coffee","app/views/object_picker_image.coffee","app/views/object_picker_photourl.coffee","app/views/object_picker_search.coffee","app/views/object_picker_upload.coffee","app/views/popover_description.coffee","app/views/search_bar_mix.coffee","app/views/tab_controller.coffee","app/views/update_stack_modal.coffee","app/widgets/install_button.coffee"],"names":[],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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Z;CAjGJ,EAgGa;;CAhGb,EAoGQ,GAAR,GAAQ;CACA,EAAD,GAAH,EAAY,GAAZ;CArGJ,EAoGQ;;CApGR;;CAHsC,OAAQ;;;CCJlD;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtJA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvEA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtDA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7BA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhDA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnDA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3BA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtDA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1BA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9BA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxEA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnDA;AAAA;;ACAA;GAAA;;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AAEX,CAFA,EAEa,OAAb,YAAa;;AACb,CAHA,EAGY,MAAZ,SAAY;;AACZ,CAJA,EAIU,IAAV,MAAU;;AACV,CALA,EAKiB,WAAjB,SAAiB;;AACjB,CANA,EAMW,KAAX,SAAW;;AACX,CAPA,EAOe,SAAf,KAAe;;AAIf,CAXA,EAWuB,GAAjB,CAAN;CACI;;;;;;;;;CAAA;;CAAA,EAAI,WAAJ;;CAAA,EACU,KAAV,WAAU;;CADV,EAII,GADJ;CACI,CAAgC,EAAhC;CAJJ;;CAAA,EAOa,QAAb;CAGI;OAAA;CAAA,EAAc,CAAd,kBAAc;CAAd,EACmB,CAAnB,wBAAmB;CADnB,EAEiB,CAAjB,qBAAiB;CAFjB,EAGe,CAAf,mBAAe;CAHf,EAIe,CAAf,mBAAe;CAJf,EAKa,CAAb,WAAa;CALb,GAMA,KAAU;CANV,EAOc,CAAd,YAAc;CAPd,GAQA,MAAW;CARX,EASgB,CAAhB,eAAgB;CAThB,GAUA,QAAa;CAVb,EAWiB,CAAjB,gBAAiB;CAXjB,GAYA,SAAc;CAZd,EAciB,CAAjB,QAAiB,CAAjB;CAdA,EAekB,CAAlB,QAAkB,EAAlB;CAfA,EAgBqB,CAArB,kBAAqB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","file":"public/javascripts/app.js","sourcesContent":["BaseCollection = require 'lib/base_collection'\nApplication = require 'models/application'\n\n\n\n# List of installed applications.\nmodule.exports = class ApplicationCollection extends BaseCollection\n\n    model: Application\n    url: 'api/applications/'\n    apps: []\n\n\n    get: (idorslug) ->\n        out = super idorslug\n        return out if out\n\n        for app in @models\n            return app if idorslug is app.get 'id'\n\n\n    # Apps are automatically sorted by display name. Official apps are\n    # sorted first.\n    comparator: (modelLeft, modelRight) ->\n        leftIsOfficial = modelLeft.isOfficial()\n        rightIsOfficial = modelRight.isOfficial()\n\n        if leftIsOfficial and not rightIsOfficial\n            -1\n        else if rightIsOfficial and not leftIsOfficial\n            1\n        else\n            left = modelLeft.get('displayName') or modelLeft.get('name')\n            right = modelRight.get('displayName') or modelRight.get('name')\n            left.localeCompare right\n\n","BaseCollection = require 'lib/base_collection'\nBackground = require 'models/background'\n\n\n# List of available backgrounds.\nmodule.exports = class BackgroundCollection extends Backbone.Collection\n    url: 'api/backgrounds'\n    model: Background\n\n    addPredefinedBackgrounds: ->\n        @add [\n                id: 'background-none'\n                predefined: true\n            ,\n                id: 'background-01'\n                predefined: true\n            ,\n                id: 'background-02'\n                predefined: true\n            ,\n                id: 'background-03'\n                predefined: true\n            ,\n                id: 'background-04'\n                predefined: true\n            ,\n                id: 'background-05'\n                predefined: true\n            ,\n                id: 'background-06'\n                predefined: true\n            ,\n                id: 'background-07'\n                predefined: true\n            ,\n                id: 'background-08'\n                predefined: true\n        ]\n\n    init: ->\n        @fetch\n            success: (models) =>\n                @addPredefinedBackgrounds()\n                selected = @findWhere id: window.app.instance.background\n                selected ?= @at 0\n                selected.set 'selected': true if selected?\n            error: ->\n\n","BaseCollection = require 'lib/base_collection'\nDevice = require 'models/device'\n\n\n# List of installed devices.\nmodule.exports = class DeviceCollection extends BaseCollection\n\n    model: Device\n    url: 'api/devices/'","BaseCollection = require 'lib/base_collection'\nNotification = require 'models/notification'\n\n\n# List of installed applications.\nmodule.exports = class NotificationCollection extends Backbone.Collection\n\n    model: Notification\n    url: 'api/notifications'\n\n\n    removeAll: (options) ->\n        options ?= {}\n        success = options.success\n        options.success = =>\n            @reset []\n            success?.apply this, arguments\n\n        @sync 'delete', this, options\n","BaseCollection = require 'lib/base_collection'\nStackApplication = require 'models/stack_application'\n\n\n# List of installed applications.\nmodule.exports = class ApplicationCollection extends BaseCollection\n\n    model: StackApplication\n    url: 'api/applications/stack'\n\n","# Make ajax request easier to do.\n# Expected callbacks: success and error\nexports.request = (type, url, data, callbacks) ->\n    $.ajax\n        type: type\n        url: url\n        data: data\n        dataType: 'json'\n        success: callbacks.success\n        error: callbacks.error\n\n# Sends a get request\n# Expected callbacks: success and error\nexports.get = (url, callbacks) ->\n    exports.request \"GET\", url, null, callbacks\n\n# Sends a post request with data as body\n# Expected callbacks: success and error\nexports.post = (url, data, callbacks) ->\n    exports.request \"POST\", url, data, callbacks\n\n# Sends a put request with data as body\n# Expected callbacks: success and error\nexports.put = (url, data, callbacks) ->\n    exports.request \"PUT\", url, data, callbacks\n\n# Sends a delete request\n# Expected callbacks: success and error\nexports.del = (url, callbacks) ->\n    exports.request \"DELETE\", url, null, callbacks\n\n# Sends a head request\n# Expected callbacks: success and error\nexports.head = (url, callbacks) ->\n    exports.request \"HEAD\", url, null, callbacks\n\n# Handle SAMEORIGIN error\n# Invalid hash could be iframe source\n# Force refresh to root application\nexports.getSAMEORIGINError = (hash) ->\n    return hash.match /^(\\w*:\\/\\/\\w+\\.)/\n","module.exports = [\n    'ead1ad'\n    'fbf0c2'\n    '3cd7c3'\n    '8FBAff'\n    'B4AED9'\n    '78dc9a'\n    '8DED2A'\n    '8eecB9'\n    'bbcaA9'\n    'cdb19b'\n    'ec7e63'\n    '8cec56'\n    'ffb1be'\n    'DD99CE'\n    'E26987'\n    '8CB1FF'\n    'f5dd16'\n    'f1fab8'\n    'ffbe56'\n    '6EE1C8'\n    'C4BEE9'\n    '59C1ef'\n    'EC7E63'\n    '8BEE8C'\n]\n","exports.locales =\n    'en': 'English'\n    'fr': 'Français'\n    # 'es': 'Español'\n    # 'ja': '日本語'\n","\n# Change a string into its slug shape (only alphanumeric char and hyphens\n# instead of spaces.\nmodule.exports = slugify = (string) ->\n    _slugify_strip_re = /[^\\w\\s-]/g\n    _slugify_hyphenate_re = /[-\\s]+/g\n    string = string.replace(_slugify_strip_re, '').trim().toLowerCase()\n    string = string.replace _slugify_hyphenate_re, '-'\n    string\n","exports.timezones = [\n    \"Africa/Abidjan\"\n    \"Africa/Accra\"\n    \"Africa/Addis_Ababa\"\n    \"Africa/Algiers\"\n    \"Africa/Asmara\"\n    \"Africa/Bamako\"\n    \"Africa/Bangui\"\n    \"Africa/Banjul\"\n    \"Africa/Bissau\"\n    \"Africa/Blantyre\"\n    \"Africa/Brazzaville\"\n    \"Africa/Bujumbura\"\n    \"Africa/Cairo\"\n    \"Africa/Casablanca\"\n    \"Africa/Ceuta\"\n    \"Africa/Conakry\"\n    \"Africa/Dakar\"\n    \"Africa/Dar_es_Salaam\"\n    \"Africa/Djibouti\"\n    \"Africa/Douala\"\n    \"Africa/El_Aaiun\"\n    \"Africa/Freetown\"\n    \"Africa/Gaborone\"\n    \"Africa/Harare\"\n    \"Africa/Johannesburg\"\n    \"Africa/Kampala\"\n    \"Africa/Khartoum\"\n    \"Africa/Kigali\"\n    \"Africa/Kinshasa\"\n    \"Africa/Lagos\"\n    \"Africa/Libreville\"\n    \"Africa/Lome\"\n    \"Africa/Luanda\"\n    \"Africa/Lubumbashi\"\n    \"Africa/Lusaka\"\n    \"Africa/Malabo\"\n    \"Africa/Maputo\"\n    \"Africa/Maseru\"\n    \"Africa/Mbabane\"\n    \"Africa/Mogadishu\"\n    \"Africa/Monrovia\"\n    \"Africa/Nairobi\"\n    \"Africa/Ndjamena\"\n    \"Africa/Niamey\"\n    \"Africa/Nouakchott\"\n    \"Africa/Ouagadougou\"\n    \"Africa/Porto-Novo\"\n    \"Africa/Sao_Tome\"\n    \"Africa/Tripoli\"\n    \"Africa/Tunis\"\n    \"Africa/Windhoek\"\n    \"America/Adak\"\n    \"America/Anchorage\"\n    \"America/Anguilla\"\n    \"America/Antigua\"\n    \"America/Araguaina\"\n    \"America/Argentina/Buenos_Aires\"\n    \"America/Argentina/Catamarca\"\n    \"America/Argentina/Cordoba\"\n    \"America/Argentina/Jujuy\"\n    \"America/Argentina/La_Rioja\"\n    \"America/Argentina/Mendoza\"\n    \"America/Argentina/Rio_Gallegos\"\n    \"America/Argentina/Salta\"\n    \"America/Argentina/San_Juan\"\n    \"America/Argentina/San_Luis\"\n    \"America/Argentina/Tucuman\"\n    \"America/Argentina/Ushuaia\"\n    \"America/Aruba\"\n    \"America/Asuncion\"\n    \"America/Atikokan\"\n    \"America/Bahia\"\n    \"America/Barbados\"\n    \"America/Belem\"\n    \"America/Belize\"\n    \"America/Blanc-Sablon\"\n    \"America/Boa_Vista\"\n    \"America/Bogota\"\n    \"America/Boise\"\n    \"America/Cambridge_Bay\"\n    \"America/Campo_Grande\"\n    \"America/Cancun\"\n    \"America/Caracas\"\n    \"America/Cayenne\"\n    \"America/Cayman\"\n    \"America/Chicago\"\n    \"America/Chihuahua\"\n    \"America/Costa_Rica\"\n    \"America/Cuiaba\"\n    \"America/Curacao\"\n    \"America/Danmarkshavn\"\n    \"America/Dawson\"\n    \"America/Dawson_Creek\"\n    \"America/Denver\"\n    \"America/Detroit\"\n    \"America/Dominica\"\n    \"America/Edmonton\"\n    \"America/Eirunepe\"\n    \"America/El_Salvador\"\n    \"America/Fortaleza\"\n    \"America/Glace_Bay\"\n    \"America/Godthab\"\n    \"America/Goose_Bay\"\n    \"America/Grand_Turk\"\n    \"America/Grenada\"\n    \"America/Guadeloupe\"\n    \"America/Guatemala\"\n    \"America/Guayaquil\"\n    \"America/Guyana\"\n    \"America/Halifax\"\n    \"America/Havana\"\n    \"America/Hermosillo\"\n    \"America/Indiana/Indianapolis\"\n    \"America/Indiana/Knox\"\n    \"America/Indiana/Marengo\"\n    \"America/Indiana/Petersburg\"\n    \"America/Indiana/Tell_City\"\n    \"America/Indiana/Vevay\"\n    \"America/Indiana/Vincennes\"\n    \"America/Indiana/Winamac\"\n    \"America/Inuvik\"\n    \"America/Iqaluit\"\n    \"America/Jamaica\"\n    \"America/Juneau\"\n    \"America/Kentucky/Louisville\"\n    \"America/Kentucky/Monticello\"\n    \"America/La_Paz\"\n    \"America/Lima\"\n    \"America/Los_Angeles\"\n    \"America/Maceio\"\n    \"America/Managua\"\n    \"America/Manaus\"\n    \"America/Martinique\"\n    \"America/Matamoros\"\n    \"America/Mazatlan\"\n    \"America/Menominee\"\n    \"America/Merida\"\n    \"America/Mexico_City\"\n    \"America/Miquelon\"\n    \"America/Moncton\"\n    \"America/Monterrey\"\n    \"America/Montevideo\"\n    \"America/Montreal\"\n    \"America/Montserrat\"\n    \"America/Nassau\"\n    \"America/New_York\"\n    \"America/Nipigon\"\n    \"America/Nome\"\n    \"America/Noronha\"\n    \"America/North_Dakota/Center\"\n    \"America/North_Dakota/New_Salem\"\n    \"America/Ojinaga\"\n    \"America/Panama\"\n    \"America/Pangnirtung\"\n    \"America/Paramaribo\"\n    \"America/Phoenix\"\n    \"America/Port-au-Prince\"\n    \"America/Port_of_Spain\"\n    \"America/Porto_Velho\"\n    \"America/Puerto_Rico\"\n    \"America/Rainy_River\"\n    \"America/Rankin_Inlet\"\n    \"America/Recife\"\n    \"America/Regina\"\n    \"America/Resolute\"\n    \"America/Rio_Branco\"\n    \"America/Santa_Isabel\"\n    \"America/Santarem\"\n    \"America/Santiago\"\n    \"America/Santo_Domingo\"\n    \"America/Sao_Paulo\"\n    \"America/Scoresbysund\"\n    \"America/St_Johns\"\n    \"America/St_Kitts\"\n    \"America/St_Lucia\"\n    \"America/St_Thomas\"\n    \"America/St_Vincent\"\n    \"America/Swift_Current\"\n    \"America/Tegucigalpa\"\n    \"America/Thule\"\n    \"America/Thunder_Bay\"\n    \"America/Tijuana\"\n    \"America/Toronto\"\n    \"America/Tortola\"\n    \"America/Vancouver\"\n    \"America/Whitehorse\"\n    \"America/Winnipeg\"\n    \"America/Yakutat\"\n    \"America/Yellowknife\"\n    \"Antarctica/Casey\"\n    \"Antarctica/Davis\"\n    \"Antarctica/DumontDUrville\"\n    \"Antarctica/Mawson\"\n    \"Antarctica/McMurdo\"\n    \"Antarctica/Palmer\"\n    \"Antarctica/Rothera\"\n    \"Antarctica/Syowa\"\n    \"Antarctica/Vostok\"\n    \"Asia/Aden\"\n    \"Asia/Almaty\"\n    \"Asia/Amman\"\n    \"Asia/Anadyr\"\n    \"Asia/Aqtau\"\n    \"Asia/Aqtobe\"\n    \"Asia/Ashgabat\"\n    \"Asia/Baghdad\"\n    \"Asia/Bahrain\"\n    \"Asia/Baku\"\n    \"Asia/Bangkok\"\n    \"Asia/Beirut\"\n    \"Asia/Bishkek\"\n    \"Asia/Brunei\"\n    \"Asia/Choibalsan\"\n    \"Asia/Chongqing\"\n    \"Asia/Colombo\"\n    \"Asia/Damascus\"\n    \"Asia/Dhaka\"\n    \"Asia/Dili\"\n    \"Asia/Dubai\"\n    \"Asia/Dushanbe\"\n    \"Asia/Gaza\"\n    \"Asia/Harbin\"\n    \"Asia/Ho_Chi_Minh\"\n    \"Asia/Hong_Kong\"\n    \"Asia/Hovd\"\n    \"Asia/Irkutsk\"\n    \"Asia/Jakarta\"\n    \"Asia/Jayapura\"\n    \"Asia/Jerusalem\"\n    \"Asia/Kabul\"\n    \"Asia/Kamchatka\"\n    \"Asia/Karachi\"\n    \"Asia/Kashgar\"\n    \"Asia/Kathmandu\"\n    \"Asia/Kolkata\"\n    \"Asia/Krasnoyarsk\"\n    \"Asia/Kuala_Lumpur\"\n    \"Asia/Kuching\"\n    \"Asia/Kuwait\"\n    \"Asia/Macau\"\n    \"Asia/Magadan\"\n    \"Asia/Makassar\"\n    \"Asia/Manila\"\n    \"Asia/Muscat\"\n    \"Asia/Nicosia\"\n    \"Asia/Novokuznetsk\"\n    \"Asia/Novosibirsk\"\n    \"Asia/Omsk\"\n    \"Asia/Oral\"\n    \"Asia/Phnom_Penh\"\n    \"Asia/Pontianak\"\n    \"Asia/Pyongyang\"\n    \"Asia/Qatar\"\n    \"Asia/Qyzylorda\"\n    \"Asia/Rangoon\"\n    \"Asia/Riyadh\"\n    \"Asia/Sakhalin\"\n    \"Asia/Samarkand\"\n    \"Asia/Seoul\"\n    \"Asia/Shanghai\"\n    \"Asia/Singapore\"\n    \"Asia/Taipei\"\n    \"Asia/Tashkent\"\n    \"Asia/Tbilisi\"\n    \"Asia/Tehran\"\n    \"Asia/Thimphu\"\n    \"Asia/Tokyo\"\n    \"Asia/Ulaanbaatar\"\n    \"Asia/Urumqi\"\n    \"Asia/Vientiane\"\n    \"Asia/Vladivostok\"\n    \"Asia/Yakutsk\"\n    \"Asia/Yekaterinburg\"\n    \"Asia/Yerevan\"\n    \"Atlantic/Azores\"\n    \"Atlantic/Bermuda\"\n    \"Atlantic/Canary\"\n    \"Atlantic/Cape_Verde\"\n    \"Atlantic/Faroe\"\n    \"Atlantic/Madeira\"\n    \"Atlantic/Reykjavik\"\n    \"Atlantic/South_Georgia\"\n    \"Atlantic/St_Helena\"\n    \"Atlantic/Stanley\"\n    \"Australia/Adelaide\"\n    \"Australia/Brisbane\"\n    \"Australia/Broken_Hill\"\n    \"Australia/Currie\"\n    \"Australia/Darwin\"\n    \"Australia/Eucla\"\n    \"Australia/Hobart\"\n    \"Australia/Lindeman\"\n    \"Australia/Lord_Howe\"\n    \"Australia/Melbourne\"\n    \"Australia/Perth\"\n    \"Australia/Sydney\"\n    \"Canada/Atlantic\"\n    \"Canada/Central\"\n    \"Canada/Eastern\"\n    \"Canada/Mountain\"\n    \"Canada/Newfoundland\"\n    \"Canada/Pacific\"\n    \"Europe/Amsterdam\"\n    \"Europe/Andorra\"\n    \"Europe/Athens\"\n    \"Europe/Belgrade\"\n    \"Europe/Berlin\"\n    \"Europe/Brussels\"\n    \"Europe/Bucharest\"\n    \"Europe/Budapest\"\n    \"Europe/Chisinau\"\n    \"Europe/Copenhagen\"\n    \"Europe/Dublin\"\n    \"Europe/Gibraltar\"\n    \"Europe/Helsinki\"\n    \"Europe/Istanbul\"\n    \"Europe/Kaliningrad\"\n    \"Europe/Kiev\"\n    \"Europe/Lisbon\"\n    \"Europe/London\"\n    \"Europe/Luxembourg\"\n    \"Europe/Madrid\"\n    \"Europe/Malta\"\n    \"Europe/Minsk\"\n    \"Europe/Monaco\"\n    \"Europe/Moscow\"\n    \"Europe/Oslo\"\n    \"Europe/Paris\"\n    \"Europe/Prague\"\n    \"Europe/Riga\"\n    \"Europe/Rome\"\n    \"Europe/Samara\"\n    \"Europe/Simferopol\"\n    \"Europe/Sofia\"\n    \"Europe/Stockholm\"\n    \"Europe/Tallinn\"\n    \"Europe/Tirane\"\n    \"Europe/Uzhgorod\"\n    \"Europe/Vaduz\"\n    \"Europe/Vienna\"\n    \"Europe/Vilnius\"\n    \"Europe/Volgograd\"\n    \"Europe/Warsaw\"\n    \"Europe/Zaporozhye\"\n    \"Europe/Zurich\"\n    \"GMT\"\n    \"Indian/Antananarivo\"\n    \"Indian/Chagos\"\n    \"Indian/Christmas\"\n    \"Indian/Cocos\"\n    \"Indian/Comoro\"\n    \"Indian/Kerguelen\"\n    \"Indian/Mahe\"\n    \"Indian/Maldives\"\n    \"Indian/Mauritius\"\n    \"Indian/Mayotte\"\n    \"Indian/Reunion\"\n    \"Pacific/Apia\"\n    \"Pacific/Auckland\"\n    \"Pacific/Chatham\"\n    \"Pacific/Easter\"\n    \"Pacific/Efate\"\n    \"Pacific/Enderbury\"\n    \"Pacific/Fakaofo\"\n    \"Pacific/Fiji\"\n    \"Pacific/Funafuti\"\n    \"Pacific/Galapagos\"\n    \"Pacific/Gambier\"\n    \"Pacific/Guadalcanal\"\n    \"Pacific/Guam\"\n    \"Pacific/Honolulu\"\n    \"Pacific/Johnston\"\n    \"Pacific/Kiritimati\"\n    \"Pacific/Kosrae\"\n    \"Pacific/Kwajalein\"\n    \"Pacific/Majuro\"\n    \"Pacific/Marquesas\"\n    \"Pacific/Midway\"\n    \"Pacific/Nauru\"\n    \"Pacific/Niue\"\n    \"Pacific/Norfolk\"\n    \"Pacific/Noumea\"\n    \"Pacific/Pago_Pago\"\n    \"Pacific/Palau\"\n    \"Pacific/Pitcairn\"\n    \"Pacific/Ponape\"\n    \"Pacific/Port_Moresby\"\n    \"Pacific/Rarotonga\"\n    \"Pacific/Saipan\"\n    \"Pacific/Tahiti\"\n    \"Pacific/Tarawa\"\n    \"Pacific/Tongatapu\"\n    \"Pacific/Truk\"\n    \"Pacific/Wake\"\n    \"Pacific/Wallis\"\n    \"US/Alaska\"\n    \"US/Arizona\"\n    \"US/Central\"\n    \"US/Eastern\"\n    \"US/Hawaii\"\n    \"US/Mountain\"\n    \"US/Pacific\"\n    \"UTC\"\n]\n","MainRouter = require 'routers/main_router'\nMainView = require 'views/main'\nInstance = require 'models/instance'\ncolorSet = require '../helpers/color-set'\n\n# Send client side errors to server\nwindow.onerror = (msg, url, line, col, error) ->\n    console.error msg, url, line, col, error, error?.stack\n    exception = error?.toString() or msg\n    if exception isnt window.lastError\n        data =\n            data:\n                type: 'error'\n                error:\n                    msg: msg\n                    name: error?.name\n                    full: exception\n                    stack: error?.stack\n                url: url\n                line: line\n                col: col\n                href: window.location.href\n        xhr = new XMLHttpRequest()\n        xhr.open 'POST', 'log', true\n        xhr.setRequestHeader \"Content-Type\", \"application/json;charset=UTF-8\"\n        xhr.send JSON.stringify(data)\n        window.lastError = exception\n\n\n# start application when DOM is ready (scripts execution is defered)\ndocument.addEventListener 'DOMContentLoaded', ->\n    try\n        @mesinfosUseTracker = window.cozy_user.mesinfosUseTracker\n\n        @instance = window.cozy_instance or {}\n        @locale = @instance?.locale or 'en'\n\n        defaultLocales = require 'locales/en'\n        try\n            locales = require 'locales/' + @locale\n        catch err\n            locales = defaultLocales\n\n        window.app = @\n\n        # Translation\n        @polyglot = new Polyglot()\n        @polyglot.extend locales\n        @defaultPolyglot  = new Polyglot\n            locale: 'en'\n            phrases: defaultLocales\n        window.t = (key, params = {}) =>\n            params._ ?= @defaultPolyglot?.t(key, params)\n            return @polyglot?.t(key, params)\n\n        # Date parser and format library\n        moment.locale(@locale)\n\n        # Defines the application's color set once\n        ColorHash.addScheme 'cozy', colorSet\n\n        # Build main view and main router.\n        @routers = {}\n        @mainView =  new MainView()\n        @routers.main = new MainRouter()\n        Backbone.history.start()\n\n        # Configure realtime (to show automatic update of applications).\n        SocketListener = require 'lib/socket_listener'\n        SocketListener.socket.on 'installerror', (err) ->\n            console.log \"An error occured while attempting to install app\"\n            console.log err\n\n    # Send client side errors to server\n    catch e\n        console.error e, e?.stack\n        exception = e.toString()\n        if exception isnt window.lastError\n            # Send client side errors to server\n            data =\n                data:\n                    type: 'error'\n                    error:\n                        msg: e.message\n                        name: e?.name\n                        full: exception\n                        stack: e?.stack\n                    file: e?.fileName\n                    line: e?.lineNumber\n                    col: e?.columnNumber\n                    href: window.location.href\n            xhr = new XMLHttpRequest()\n            xhr.open 'POST', 'log', true\n            xhr.setRequestHeader \"Content-Type\",\n                \"application/json;charset=UTF-8\"\n            xhr.send JSON.stringify(data)\n            window.lastError = exception\n","# Base class to share common methods between collections.\nmodule.exports = class BaseCollection  extends Backbone.Collection\n\n    # Select which field from backend response to use for parsing to populate\n    # collection.\n    parse: (response) ->\n        response.rows\n","# Base class that contains commomn methods for models.\nclass exports.BaseModel extends Backbone.Model\n\n  isNew: () ->\n    @id is undefined\n","module.exports = class BaseView extends Backbone.View\n    tagName: 'section'\n\n    template: ->\n\n    initialize: ->\n        @render()\n        super()\n\n    getRenderData: ->\n        if @model? and @model.toJSON?\n            model: @model.toJSON()\n\n    render: ->\n        # console.debug \"Rendering #{@constructor.name}\", @\n        @beforeRender()\n        @$el.html @template(@getRenderData())\n        @afterRender()\n        @\n\n    beforeRender: ->\n\n    afterRender: ->\n\n    destroy: ->\n        @undelegateEvents()\n        @$el.removeData().unbind()\n        @remove()\n        Backbone.View::remove.call @\n","ObjectPicker = require 'views/object_picker'\n\nmodule.exports = class IntentManager\n\n\n    registerIframe : (iframe, remoteOrigin)->\n        talker = new Talker(iframe.contentWindow, remoteOrigin)\n        talker.onMessage = @handleIntent\n\n\n    handleIntent : (message) ->\n        intent = message.data\n        switch intent.type\n\n            when 'goto'\n                window.app.routers.main.navigate \"apps/#{intent.params}\", true\n\n            when 'pickObject'\n                switch intent.params.objectType\n                    when 'singlePhoto'\n                        if intent.params.isCropped\n                            new ObjectPicker(intent.params , \\\n                              (newPhotoChosen, dataUrl) ->\n                                message.respond(\n                                    newPhotoChosen :newPhotoChosen\n                                    dataUrl        :dataUrl\n                                )\n                            )\n                        else\n                            new ObjectPicker(intent.params , \\\n                              (newPhotoChosen, dataUrl) ->\n                                message.respond(\n                                    newPhotoChosen :newPhotoChosen\n                                    dataUrl        :dataUrl\n                                )\n                            )\n            # usefull to check from the client (app) that the home is there and\n            # has the intent manager available\n            when 'ping'\n                message.respond('pong')\n\n\n\n","request = require('lib/request')\nexports.get = (url, callback) ->\n    request.request('get', 'api/proxy', url, callback)","# Make ajax request easier to write.\n\n\n# Expected callback: err as first parameter\nexports.request = (type, url, data, callback) ->\n    body = if data? then JSON.stringify data else null\n\n    fired = false\n    req = $.ajax\n        type: type\n        url: url\n        data: body\n        contentType: \"application/json\"\n        dataType: \"json\"\n        success: (data) ->\n            fired = true\n            callback? null, data\n        error: (data) ->\n            fired = true\n\n            if data?.getResponseHeader(\"X-Cozy-Login-Page\")\n                window.location.replace '/login'\n\n            else if callback? and data?\n                try\n                    data = JSON.parse data.responseText\n                catch err\n                    data = data.responseText\n\n                msg = data.msg or data.error or \"Server error occured\"\n                err = new Error msg\n                err.data = data\n                callback err\n\n            else\n                callback?()\n\n    req.always ->\n        unless fired\n            callback new Error \"Server error occured\", data\n\n\n# Sends a get request\nexports.get = (url, callback) ->\n    exports.request \"GET\", url, null, callback\n\n# Sends a post request\nexports.post = (url, data, callback) ->\n    exports.request \"POST\", url, data, callback\n\n# Sends a put request with data as body\nexports.put = (url, data, callback) ->\n    exports.request \"PUT\", url, data, callback\n\n# Sends a delete request with data as body\nexports.del = (url, callback) ->\n    exports.request \"DELETE\", url, null, callback\n\n# Sends a head request\nexports.head = (url, callback) ->\n    exports.request \"HEAD\", url, null, callback\n\n\n$(document).ajaxError (event, xhr) ->\n    if xhr?.getResponseHeader(\"X-Cozy-Login-Page\")\n        window.location.replace '/login'\n","Application  = require 'models/application'\nNotification = require 'models/notification'\nDevice = require 'models/device'\n\napplication_idx  = 0\nnotification_idx = 1\ndevice_idx = 2\n\nclass SocketListener extends CozySocketListener\n\n\n    models:\n        'notification': Notification\n        'device': Device\n        'application' : Application\n\n    events: [\n        'notification.create', 'notification.update', 'notification.delete',\n        'device.create', 'device.update', 'device.delete',\n        'application.create', 'application.update', 'application.delete'\n    ]\n\n    onRemoteCreate: (model) ->\n        if model instanceof Application\n            @collections[application_idx].add model\n        else if model instanceof Notification\n            @collections[notification_idx].add model\n        else if model instanceof Device\n            @collections[device_idx].add model\n\n    onRemoteDelete: (model) ->\n        if model instanceof Application\n            @collections[application_idx].remove model\n        else if model instanceof Notification\n            @collections[notification_idx].remove model\n        else if model instanceof Device\n            @collections[device_idx].remove model\n\n\nmodule.exports = new SocketListener()\n","INTERVAL = 1 * 1000 # 1s\n\nmodule.exports = class UseTracker\n\n    constructor: ->\n        if app.mesinfosUseTracker\n            setInterval @_heartbeat, INTERVAL\n\n    setApp: (appName) ->\n        @appName = appName\n\n    _heartbeat: =>\n        if document.hasFocus()\n            $.post 'usetrackers',\n                timestamp: new Date().toISOString()\n                appName: @appName\n            , 'json'\n","BaseView = require 'lib/base_view'\n\n# View that display a collection of subitems\n# used to DRY views\n# Usage : new ViewCollection(collection:collection)\n# Automatically populate itself by creating a itemView for each item\n# in its collection\n\n# can use a template that will be displayed alongside the itemViews\n\n# itemView       : the Backbone.View to be used for items\n# itemViewOptions : the options that will be passed to itemViews\n\nmodule.exports = class ViewCollection extends BaseView\n\n    views: {}\n\n    itemView: null\n    itemViewOptions: ->\n\n\n    # add 'empty' class to view when there is no subview\n    checkIfEmpty: ->\n        @$el.toggleClass 'empty', _.size(@views) is 0\n\n    # can be overriden if we want to place the subviews somewhere else\n    appendView: (view) ->\n        @$el.append view.el\n\n    # can be overriden if we need to do something else\n    removeView: (view) ->\n        view.remove()\n\n    # bind listeners to the collection\n    initialize: ->\n        super\n        @views = {}\n        @listenTo @collection, \"reset\",   @onReset\n        @listenTo @collection, \"add\",     @addItem\n        @listenTo @collection, \"remove\",  @removeItem\n        @onReset @collection\n\n    # if we have views before a render call, we detach them\n    render: ->\n        view.$el.detach() for id, view of @views\n        super\n\n    # after render, we reattach the views\n    afterRender: ->\n        @appendView view for id, view of @views\n        @checkIfEmpty @views\n\n    # destroy all sub views before remove\n    remove: ->\n        @onReset []\n        super\n\n    # event listener for reset\n    onReset: (newcollection) ->\n        @removeView view for id, view of @views\n        @views = []\n        @checkIfEmpty @views\n        newcollection.forEach @addItem\n\n    # event listeners for add\n    addItem: (model) =>\n        options = _.extend {}, {model: model}, @itemViewOptions(model)\n        view = new @itemView(options)\n        @views[model.cid] = view.render()\n        @appendView view\n        @checkIfEmpty @views\n\n    # event listeners for remove\n    removeItem: (model) =>\n        @removeView @views[model.cid]\n        delete @views[model.cid]\n        @checkIfEmpty @views\n","module.exports = {\n  \"home\": \"Home\",\n  \"apps\": \"Apps\",\n  \"account\": \"Account\",\n  \"email\": \"Email\",\n  \"timezone\": \"Time zone\",\n  \"domain\": \"Domain\",\n  \"no domain set\": \"no.domain.set\",\n  \"locale\": \"Locale\",\n  \"change password\": \"Change password\",\n  \"input your current password\": \"Enter your current password:\",\n  \"enter a new password\": \"Enter your new password:\",\n  \"confirm new password\": \"Confirm your new password:\",\n  \"send changes\": \"Save\",\n  \"manage\": \"Manage\",\n  \"total\": \"Total\",\n  \"memory consumption\": \"Memory usage\",\n  \"disk consumption\": \"Disk usage\",\n  \"you have no notifications\": \"<span>Hello %{name}</span><br>You have currently no notification.\",\n  \"dismiss all\": \"Dismiss all\",\n  \"add application\": \"Add app?\",\n  \"install\": \"Install\",\n  \"github\": \"Github\",\n  \"website\": \"Website\",\n  \"your app\": \"Your app!\",\n  \"community contribution\": \"Community contribution\",\n  \"official application\": \"Developed by Cozy\",\n  \"application description\": \"App Description\",\n  \"downloading description\": \"Downloading description…\",\n  \"downloading permissions\": \"Downloading permissions…\",\n  \"Cancel\": \"Cancel\",\n  \"ok\": \"Ok\",\n  \"applications permissions\": \"App permissions\",\n  \"confirm\": \"Confirm\",\n  \"installing\": \"Installing\",\n  \"remove\": \"Remove\",\n  \"update\": \"Update\",\n  \"config application unmark favorite\": \"Remove from Favorites (remove from top of the home screen)\",\n  \"config application mark favorite\": \"Add to Favorites (added to the top of the home screen)\",\n  \"started\": \"started\",\n  \"notifications\": \"Notifications\",\n  \"questions and help forum\": \"Questions and help forum\",\n  \"sign out\": \"Sign out\",\n  \"open in a new tab\": \"Open in a new tab\",\n  \"always on\": \"always on\",\n  \"keep always on\": \"keep always on\",\n  \"stop this app\": \"Stop this app\",\n  \"update required\": \"Update available\",\n  \"navbar faq\": \"Frequently Asked Questions\",\n  \"application is installing\": \"An app is already installing.\\nWait for it to finish, then try again.\",\n  \"no app message\": \"You currently have no app installed on your Cozy.\\nGo to the <a href=\\\"#applications\\\">Cozy store</a> and install new apps!\",\n  \"welcome to app store\": \"Welcome to your Cozy store, install your own app from here\\nor add one from the list of available ones.\",\n  \"installed everything\": \"You have already installed everything!\",\n  \"already similarly named app\": \"You already have an app with a similar name.\",\n  \"your app list\": \"Access your apps\",\n  \"customize your cozy\": \"Customize your layout\",\n  \"manage your apps\": \"Applications\",\n  \"choose your apps\": \"Choose your apps\",\n  \"configure your cozy\": \"Configure your cozy\",\n  \"ask for assistance\": \"Ask for help\",\n  \"logout\": \"Sign out\",\n  \"navbar logout\": \"Sign out\",\n  \"welcome to your cozy\": \"Welcome to your Cozy!\",\n  \"you have no apps\": \"You have no apps.\",\n  \"app management\": \"App management\",\n  \"app store\": \"Add App\",\n  \"configuration\": \"Configuration\",\n  \"assistance\": \"Assistance\",\n  \"hardware consumption\": \"Hardware\",\n  \"gigabytes\": \"GB\",\n  \"megabytes\": \"MB\",\n  \"terabyte\": \"MB\",\n  \"G\": \"GB\",\n  \"M\": \"MB\",\n  \"T\": \"MB\",\n  \"disk unit\": \"GB\",\n  \"memory unit\": \"MB\",\n  \"status hard drive label\": \"Storage\",\n  \"status memory label\": \"Memory\",\n  \"manage your applications\": \"Applications\",\n  \"manage your devices\": \"Connected devices\",\n  \"synchronized\": \"synchronized\",\n  \"revoke device access\": \"Revoke device\",\n  \"no application installed\": \"There is no app installed.\",\n  \"your parameters\": \"Your settings\",\n  \"alerts and password recovery email\": \"Your email is used for notifications or password recovery.\",\n  \"public name description\": \"Your username will be displayed when you share files with people or invite them to events.\",\n  \"domain name for urls and email\": \"The domain name is used to connect to your Cozy from any devices and build sharing URLs.\",\n  \"account timezone field description\": \"Your time zone helps to properly display your calendar.\",\n  \"save\": \"Save\",\n  \"saved\": \"Saved\",\n  \"error\": \"Error\",\n  \"error proper email\": \"Given email is not correct\",\n  \"error email empty\": \"Given email is empty\",\n  \"account language field description\": \"Choose the language you want to see:\",\n  \"account background selection\": \"Select your background for your Cozy Home:\",\n  \"account localization\": \"Localization\",\n  \"account identifiers\": \"Account\",\n  \"account personalization\": \"Customization\",\n  \"account password\": \"Password\",\n  \"account two factors auth\": \"Two-factor authentication\",\n  \"account 2fa strategy\": \"Authentication strategy\",\n  \"account 2fa hotp\": \"HOTP (based on a counter)\",\n  \"account 2fa totp\": \"TOTP (based on a timer)\",\n  \"enable 2fa\": \"Enable two-factor authentication\",\n  \"disable 2fa\": \"Disable two-factor authentication\",\n  \"reset 2fa tokens\": \"Reset your recovery tokens\",\n  \"account 2fa enabled\": \"Two-factor authentication has been enabled. Page will now reload.\",\n  \"account 2fa disabled\": \"Two-factor authentication has been disabled. Page will now reload.\",\n  \"account 2fa error\": \"There was something wrong while enabling two-factor authentication. Please try again in a few minutes or contact the support.\",\n  \"account 2fa token explanation\": \"Two-factor authentication is enabled on Cozy. To use it with your favourite app or device, you have to enter the following key when setting up the account:\",\n  \"account 2fa qrcode explanation\": \"You can also scan the QR code below if your app supports it.\",\n  \"account 2fa rectokens\": \"Below are your recovery tokens. Make sure to copy them somewhere safe (not on Cozy) so you won't get locked outside of your Cozy.\",\n  \"2fa strategy hotp\": \"Two-factor authentication is enabled on Cozy with the HOTP strategy (counter-based).\",\n  \"2fa strategy totp\": \"Two-factor authentication is enabled on Cozy with the TOTP strategy (timer-based).\",\n  \"account 2fa hotp reset explanation\": \"If you're changing from one authentication app or device to another, you must reset the HOTP counter in order to not get locked outside of your Cozy.\",\n  \"2fa reset hotp\": \"Reset the HOTP counter\",\n  \"account 2fa reset\": \"The HOTP counter has been successfully reset.\",\n  \"account 2fa disable explanation\": \"You can disable the two-factor authentication at any time:\",\n  \"2fa if yubikey\": \"If you are using a Yubikey to authenticate, use the key below as your Secret Key.\",\n  \"french\": \"French\",\n  \"english\": \"English\",\n  \"german\": \"German\",\n  \"spanish\": \"Spanish\",\n  \"korean\": \"Korean\",\n  \"japanese\": \"Japanese\",\n  \"portuguese\": \"Portuguese\",\n  \"russian\": \"Russian\",\n  \"change password procedure\": \"Steps to change your password\",\n  \"current password\": \"current password\",\n  \"new password\": \"new password\",\n  \"confirm your new password\": \"confirm your new password\",\n  \"save your new password\": \"Save new password\",\n  \"do you want assistance\": \"Do you need any help?\",\n  \"help email title\": \"Email\",\n  \"help twitter title\": \"Twitter\",\n  \"help forum title\": \"Forum\",\n  \"help IRC title\": \"IRC\",\n  \"help github title\": \"Github\",\n  \"Visit the project website and learn to build your app:\": \"Visit the project website:\",\n  \"your own application\": \"your own app\",\n  \"installed\": \"installed\",\n  \"updated\": \"updated\",\n  \"updating\": \"updating\",\n  \"update all\": \"Update Stack and applications\",\n  \"show home logs\": \"Show Home Logs\",\n  \"show data system logs\": \"Show Data System Logs\",\n  \"show proxy logs\": \"Show Proxy Logs\",\n  \"show logs\": \"Show Logs\",\n  \"update stack\": \"Update the platform\",\n  \"reboot stack waiting message\": \"Please wait, rebooting your Cozy takes several minutes.\",\n  \"update stack waiting message\": \"Please wait, updating your Cozy takes several minutes.\",\n  \"status no device\": \"There is no device connected to your Cozy.\",\n  \"download apk\": \"Download .APK\",\n  \"mobile app promo\": \"Backup you photos and synchronize your contacts and calendars with your mobile via the dedicated mobile app:\",\n  \"desktop app promo\": \"You can also download the cozy-desktop client to synchronize your files on your laptop/desktop:\",\n  \"download desktop linux\": \"Download cozy desktop for Linux\",\n  \"update stack modal title\": \"Updating your Cozy\",\n  \"update stack modal content\": \"You are about to update the platform. Your Cozy will be unavailable a few minutes. Is that OK?\",\n  \"update stack modal confirm\": \"Update\",\n  \"update stack success\": \"Your applications are updated. To finalize the update, it requires that you click on the OK button. It will refresh the current window.\",\n  \"update stack error\": \"An error occurred during the update. Your Cozy may become unstable. If you notice any troubles, you should contact your hosting provider. When you will click on the OK button, the current window will be refreshed.\",\n  \"applications broken\": \"Applications broken\",\n  \"cozy platform\": \"Platform\",\n  \"navbar back button title\": \"Back Home\",\n  \"navbar notifications\": \"Notifications\",\n  \"or:\": \"or:\",\n  \"reboot stack\": \"Reboot\",\n  \"update error\": \"An error occurred while updating the app\",\n  \"update failed\": \"Update failed\",\n  \"error update uninstalled app\": \"You can't update an app that is not installed.\",\n  \"notification open application\": \"Open application\",\n  \"notification update stack\": \"Update the platform\",\n  \"notification update application\": \"Update now\",\n  \"broken\": \"broken\",\n  \"start this app\": \"Start this app\",\n  \"stopped\": \"stopped\",\n  \"retry to install\": \"Retry installation\",\n  \"cozy account title\": \"Cozy - Settings\",\n  \"cozy app store title\": \"Cozy - Store\",\n  \"cozy home title\": \"Cozy - Home\",\n  \"cozy applications title\": \"Cozy - Status\",\n  \"running\": \"running\",\n  \"cozy help title\": \"Cozy - Help\",\n  \"help support title\": \"Official Support\",\n  \"help community title\": \"Community Support\",\n  \"help direct title\": \"Direct Message\",\n  \"help documentation title\": \"Documentation\",\n  \"changing locale requires reload\": \"Changing the locale requires to reload the page.\",\n  \"cancel\": \"cancel\",\n  \"abort\": \"abort\",\n  \"Once updated, this application will require the following permissions:\": \"Once updated, this app will require the following permissions:\",\n  \"confirm update\": \"confirm update\",\n  \"confirm install\": \"confirm install\",\n  \"no specific permissions needed\": \"This app doesn't require any permission\",\n  \"removed\": \"removed\",\n  \"removing\": \"removing\",\n  \"required permissions\": \"Required permissions\",\n  \"finish layout edition\": \"Save\",\n  \"reset customization\": \"Reset\",\n  \"use icon\": \"Use icon\",\n  \"home section favorites\": \"Favorites\",\n  \"home section leave\": \"Import\",\n  \"home section main\": \"Daily\",\n  \"home section productivity\": \"Productivity\",\n  \"home section data management\": \"Data\",\n  \"home section personal watch\": \"Watch\",\n  \"home section misc\": \"Misc\",\n  \"home section platform\": \"Platform\",\n  \"app status\": \"My Apps\",\n  \"app store\": \"Store\",\n  \"settings\": \"Settings\",\n  \"help\": \"Help\",\n  \"change layout\": \"Change the layout\",\n  \"market app install\": \"Installing...\",\n  \"install your app\": \"Install an app from its Git Repository\",\n  \"market install your app\": \"Just copy/paste its Git URL in the field below:\",\n  \"market install your app tutorial\": \"To know more about how to build your own app, feel free to read our \",\n  \"market app tutorial\": \" tutorial\",\n  \"help send message title\": \"Write directly to the Cozy Team\",\n  \"help send message action\": \"Send\",\n  \"help send logs\": \"Send server logs to ease debug\",\n  \"send message success\": \"Message successfully sent!\",\n  \"send message error\": \"An error occurred while sending your support message. Try to send it via an email client to support@cozycloud.cc\",\n  \"account change password success\": \"The password was changed successfully.\",\n  \"account change password short\": \"The new password is too short.\",\n  \"account change password difference\": \"The password confirmation doesn't match the new password.\",\n  \"account change password error\": \"There was something wrong while changing your password. Ensure that your previous password is correct.\",\n  \"account background add\": \"Add background\",\n  \"introduction market\": \"Welcome to the Cozy store!\\nHere, you can install\\napps provided by Cozy Cloud, apps from the community or apps built by yourself!\",\n  \"error connectivity issue\": \"An error occurred while retrieving the data.<br />Please try again later.\",\n  \"package.json not found\": \"Unable to fetch package.json. Check your repo url.\",\n  \"unknown provider\": \"For now, applications can only be installed from Github or CozyCloud Market\",\n  \"please wait data retrieval\": \"Please wait while the data is being retrieved…\",\n  \"revoke device confirmation message\": \"This will prevent the device from accessing your Cozy. Are you sure?\",\n  \"dashboard\": \"Dashboard\",\n  \"calendars description\": \"Manage your events and sync them with your smartphone.\",\n  \"contacts description\": \"Manage your contacts and sync them with your smartphone.\",\n  \"emails description\": \"Read, send and back up your emails.\",\n  \"files description\": \"Your online file-system, synced with your devices.\",\n  \"photos description\": \"Organize your photos and share them with friends.\",\n  \"sync description\": \"The tool required to sync your contacts and calendar with your smartphone.\",\n  \"quickmarks description\": \"Save and manage your bookmarks.\",\n  \"cozic description\": \"An audio player to listen to your music from your browser.\",\n  \"databrowser description\": \"Browse and visualize all your data (raw format).\",\n  \"zero-feeds description\": \"Aggregate your feeds and save your favorite links as bookmarks.\",\n  \"kyou description\": \"Improve your health and happiness by quantifying yourself.\",\n  \"konnectors description\": \"Import data from external services (Twitter, Jawbone…).\",\n  \"kresus description\": \"Additional tools for your personal finance manager.\",\n  \"nirc description\": \"Access to your favorite IRC channels from your Cozy.\",\n  \"shout description\": \"Access to your favorite IRC channels from your Cozy with the Shout Web application\",\n  \"notes description\": \"Organize and write smart notes.\",\n  \"owm description\": \"Know the weather anywhere in the world.\",\n  \"remote storage description\": \"A Remote Storage appliance to store data from your Unhosted applications.\",\n  \"tasky description\": \"Super fast and simple tag-based task manager.\",\n  \"todos description\": \"Write your tasks, order them and complete them efficiently.\",\n  \"term description\": \"A terminal app for your Cozy.\",\n  \"ghost description\": \"Share your stories with the world with this app based on the Ghost Blogging Platform.\",\n  \"leave google description\": \"An app to import your current data from your Google account.\",\n  \"mstsc.js description\": \"Manage your Windows Desktop remotely through the RDP protocol.\",\n  \"hastebin description\": \"A simple pastebin, a tool to easily share texts.\",\n  \"polybios description\": \"Manage your PGP keys from your browser.\",\n  \"frost description\": \"Build your internet memories by archiving web pages into your Cozy.\",\n  \"tiddlywiki description\": \"A non-linear personal web notebook.\",\n  \"hari description\": \"Encrypted personal diary.\",\n  \"map description\": \"Open Street Map in your Cozy\",\n  \"warning unofficial app\": \"This app is a community app and isn't maintained by the Cozy team.\\nTo report a bug, please file an issue in <a href='https://forum.cozy.io'>our forum</a>.\",\n  \"update available notification\": \"A new version of %{appName} is available.\",\n  \"stack update available notification\": \"A new version of the platform is available.\",\n  \"app broken title\": \"Broken application\",\n  \"app broken\": \"This application is broken. Can you try to install it again: \",\n  \"reinstall broken app\": \"reinstall it.\",\n  \"error git\": \"We can't retrieve the source code.\",\n  \"error github repo\": \"Application repository seems unavailable.\",\n  \"error github\": \"Github seems unavailable. You can check its status on https://status.github.com/.\",\n  \"error npm\": \"We can't install the application dependencies.\",\n  \"error user linux\": \"We can't create a specific Linux user for this application.\",\n  \"error start\": \"Application can't start. You can find more details in log application.\",\n  \"app msg\": \"If error persists, you can contact us at contact@cozycloud.cc or on IRC #cozycloud on irc.freenode.net.\",\n  \"more details\": \"More details\",\n  \"noapps\": {\n    \"customize your cozy\": \"You can also <a href=\\\"%{account}\\\">go to your settings</a> and customize your Cozy,\\nor <a href=\\\"%{appstore}\\\">take a look at the App Store</a> to install your first app.\"\n  },\n  \"pick from files\": \"Pick a photo\",\n  \"Crop the photo\": \"Crop image\",\n  \"chooseAgain\": \"choose another photo\",\n  \"modal ok\": \"OK\",\n  \"modal cancel\": \"Cancel\",\n  \"no image\": \"There is no image on your Cozy\",\n  \"ObjPicker upload btn\": \"Upload a local file\",\n  \"or\": \"or\",\n  \"drop a file\": \"Drag & drop a file or\",\n  \"url of an image\": \"Paste URL of an image from the web\",\n  \"you have no album\": \"<p>You haven't got any photo album<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:-(</p><p>Create one from the <a href='/#applications' target='_blank'>the Photo app</a><br>and use photos taken from your smartphone with the <a href='https://play.google.com/store/apps/details?id=io.cozy.files_client&hl=en' target='_blank'>mobile app!</a><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:-)</p>\",\n  \"config application mark favorite\": \"mark as favorite\",\n  \"config application unmark favorite\": \"unmark as favorite\",\n  \"state app installing\": \"This app is being installed. Wait a little\",\n  \"state app stopped error\": \"This app cannot start\",\n  \"stack updating block message\": \"Your Cozy is currently updating, you cannot use it until the update is finished.\",\n  \"update apps error title\": \"An error occurred while updating apps\",\n  \"update apps error\": \"One or several applications failed. Concerned applications are marked as broken. You will probably have to uninstall and reinstall these applications.\",\n  \"update apps error list title\": \"Broken applications\",\n  \"update stack error title\": \"An error occurred while updating your Cozy\",\n  \"update stack permission changes\": \"Applications listed below were not updated due to permission changes. Please, update them individually to choose whether or not you accept the new permissions.\",\n  \"update stack warning\": \"Warning\",\n  \"reboot stack error\": \"An error occurred while rebooting your Cozy. The Cozy may become unstable. Contact your hosting provider if your Cozy doesn't work anymore.\"\n}\n;","client = require \"../helpers/client\"\nrequest = require \"../lib/request\"\n\n# Describes an application installed in mycloud.\nmodule.exports = class Application extends Backbone.Model\n\n    idAttribute: 'slug'\n\n    url: ->\n        base = \"/api/applications/\"\n        return \"#{base}byid/#{@get('id')}\" if @get('id')\n        return base\n\n    isIconSvg: ->\n        iconType = @get 'iconType' or @get 'icon' or @get 'iconPath'\n        if iconType\n            return iconType is 'svg'\n        else\n            return true\n\n    isInstalling: -> @get('state') is 'installing'\n    isRunning: -> @get('state') is 'installed'\n    isBroken: -> @get('state') is 'broken'\n\n    # use same events as backbone to enable socket-listener\n    prepareCallbacks: (callbacks, presuccess, preerror) ->\n        {success, error} = callbacks or {}\n        presuccess ?= (data) =>\n            if data.app?.description?\n                # for applications not in the market\n                data.app.remoteDescription = data.app.description\n                delete data.app.description\n            @set data.app if data.app?\n        @trigger 'request', @, null, callbacks\n        callbacks.success = (data) =>\n            presuccess data if presuccess\n            @trigger 'sync', @, null, callbacks\n            success data    if success\n        callbacks.error = (jqXHR) =>\n            preerror jqXHR if preerror\n            @trigger 'error', @, jqXHR, {}\n            error jqXHR     if error\n\n\n    # Send to server installation request.\n    # Will create a new app in the database.\n    install: (callbacks) ->\n        @prepareCallbacks callbacks\n        params = @attributes\n        delete params.id\n        @set state: 'installing'\n        client.post '/api/applications/install', params, callbacks\n\n    # Send to server uninstallation request.\n    # Will delete the app in the database.\n    uninstall: (callbacks) =>\n        @trigger 'uninstall', @, @collection, {}\n        @prepareCallbacks callbacks, => @trigger 'destroy', @, @collection, {}\n        client.del \"/api/applications/#{@id}/uninstall\", callbacks\n\n    # Send to server an update request.\n    updateApp: (callbacks) ->\n        if @get('state') isnt 'broken'\n            @prepareCallbacks callbacks\n            client.put \"/api/applications/#{@id}/update\", {}, callbacks\n        else\n            client.del \"/api/applications/#{@id}/uninstall\",\n                success: =>\n                    @install callbacks\n                error: callbacks.error\n\n    # Send to server a start request\n    start: (callbacks) ->\n        return null if @isRunning()\n        @prepareCallbacks callbacks\n        client.post \"/api/applications/#{@id}/start\", {}, callbacks\n\n    # Send to server a stop request.\n    stop: (callbacks) ->\n        return null unless @isRunning()\n        @prepareCallbacks callbacks\n        client.post \"/api/applications/#{@id}/stop\", {}, callbacks\n\n    # Get application permission\n    getPermissions: (callbacks) ->\n        @prepareCallbacks callbacks\n        client.post \"/api/applications/getPermissions\", @toJSON(), callbacks\n\n    # Get application description\n    getDescription: (callbacks) ->\n        @prepareCallbacks callbacks\n        client.post \"/api/applications/getDescription\", @toJSON(), callbacks\n\n    # Get application's metadata\n    getMetaData: (callbacks) ->\n        @prepareCallbacks callbacks\n        client.post \"/api/applications/getMetaData\", @toJSON(), callbacks\n\n    # In which of the home section does this application go\n    # returns one of 'other', 'official', 'leave'\n    getSection: ->\n        section = 'misc'\n        name = @get 'slug'\n        favorite = @get 'favorite'\n\n        if favorite\n            section = 'favorite'\n        else if name in [\n            'calendar', 'contacts', 'emails', 'files', 'photos'\n        ]\n            section = 'main'\n        else if name in [\n            'blog', 'feeds', 'bookmarks', 'quickmarks', 'zero-feeds'\n        ]\n            section = 'watch'\n        else if name in [\n            'kresus', 'kyou', 'databrowser', 'import-from-google'\n        ]\n            section = 'data'\n        else if name in ['todos', 'notes', 'tasky', 'tiddlywiki']\n            section = 'productivity'\n        else if name in ['sync', 'konnectors']\n            section = 'platform'\n\n        return section\n\n\n    # Request the server to run the update all apps procedure.\n    updateAll: (callback) ->\n        request.put \"/api/applications/update/all\", {}, (err, data) ->\n            callback err, data?.permissionChanges\n\n\n    # Return true is the app is considered as an official Cozy application.\n    isOfficial: ->\n        @get('comment') is 'official application'\n","{BaseModel} = require 'lib/base_model'\n\n# Describes a background selectable in account section.\nmodule.exports = class Background extends BaseModel\n    urlRoot: '/api/backgrounds/'\n\n\n    # Get path to the background image (handle predefined background and\n    # background added by the user).\n    getSrc: ->\n        id = @get 'id'\n        if id.indexOf('background') > -1\n            id = id.replace '-', '_'\n            return \"/img/backgrounds/#{id}.jpg\"\n        else\n            return \"/api/backgrounds/#{id}/picture.jpg\"\n\n\n    # Get path to the background image thumbnail (handle predefined background\n    # and background added by the user).\n    getThumbSrc: ->\n        id = @get 'id'\n        if id.indexOf('background') > -1\n            id = id.replace '-', '_'\n            return \"/img/backgrounds/#{id}_th.png\"\n        else\n            return \"/api/backgrounds/#{id}/thumb.jpg\"\n\n\n","{BaseModel} = require 'lib/base_model'\n\n# Describes a device installed in mycloud.\nmodule.exports = class Device extends Backbone.Model\n\n    urlRoot: 'api/devices/'\n","request = require 'lib/request'\n\n\n# Model to describe instance options required at home startup like locale,\n# background, etc.\nmodule.exports = class Instance extends Backbone.Model\n\n    saveData: (data, callback) ->\n        @set data\n        request.post \"api/instance\", data, callback\n\n","{BaseModel} = require 'lib/base_model'\n\n# Describes a notification\nmodule.exports = class Notification extends BaseModel\n\n    urlRoot: 'api/notifications'\n","request = require('../lib/request')\n\n# A photo\n# maintains attributes src / thumbsrc depending of the state of the model\nmodule.exports = class Photo extends Backbone.Model\n\n    defaults: ()->\n        thumbsrc: 'img/loading.gif'\n        src: ''\n        orientation: 1\n\n\n    url: ()->\n        super + app.urlKey\n\n\n    # build img src attributes from id.\n    parse: (attrs) ->\n        if not attrs.id then attrs\n        else _.extend attrs,\n            thumbsrc: \"photos/thumbs/#{attrs.id}.jpg\" + app.urlKey\n            src: \"photos/#{attrs.id}.jpg\" + app.urlKey\n            orientation: attrs.orientation\n\n\n    # Return screen size photo src built from id.\n    getPrevSrc: ()->\n        \"photos/#{@get 'id'}.jpg\"\n\n\nPhoto.getMonthdistribution = (callback)->\n    request.get \"files/photo/monthdistribution\", callback\n\n\nPhoto.listFromFiles = (skip, limit, callback)->\n    request.get \"files/photo/range/#{skip}/#{limit}\", callback\n\n\nPhoto.makeFromFile = (fileid, attr, callback) ->\n    request.post \"files/#{fileid}/toPhoto\", attr, callback\n\n","request = require \"../lib/request\"\n\n\nmodule.exports = class StackApplication extends Backbone.Model\n\n    idAttribute: 'name'\n\n    url: ->\n        base = \"/api/applications/stack\"\n        return \"#{base}byid/#{@get('id')}\" if @get('id')\n        return base\n\n\n    # Send a series of requests to the server to ensure that it is up.\n    # The callback is fired only when the servers responds successfully to\n    # *remainingSteps* requests.\n    waitServerIsUp: (remainingSteps, callback) ->\n        request.head \"api/applications/stack\", (err) =>\n            if err\n                console.log 'Server looks down...'\n            else\n                console.log 'Server looks up...'\n                remainingSteps--\n\n            if remainingSteps is 0\n                console.log 'Server is up!'\n                callback()\n            else\n                setTimeout =>\n                    @waitServerIsUp remainingSteps, callback\n                , 1000\n\n\n    # Ask to the server to update all the Cozy stack. This operation\n    # will kill the server. So to guess when the update is done, it keeps\n    # sending request to the server. It considers the server as up when\n    # three requests got proper response. It's the sign that the update is\n    # done.\n    updateStack: (callback) ->\n        request.put \"/api/applications/update/stack\", {}, (err) =>\n            console.log 'Waiting for reboot...'\n            @waitServerIsUp 3, callback\n\n\n    # Ask to the server to reboot the Cozy stack. This operation\n    # will kill the server. So to guess when the reboot is done, it keeps\n    # sending request to the server. It considers the server as up when\n    # three requests got proper response. It's the sign that the reboot is\n    # done.\n    rebootStack: (callback) ->\n        request.put \"/api/applications/reboot/stack\", {}, (err) =>\n            console.log 'Waiting for reboot...'\n            @waitServerIsUp 3, callback\n\n","client = require 'helpers/client'\n\n# Describes an application installed in mycloud.\nmodule.exports = class Token\n\n    constructor: (name) ->\n        @name = name\n\n    getToken: (callbacks) ->\n        client.get \"api/getToken/#{@name}\", callbacks\n\n","{BaseModel} = require 'lib/base_model'\nclient = require 'lib/request'\n\n# Describes an application installed in mycloud.\nmodule.exports = class User extends BaseModel\n\n\n    constructor: (@email, @password) ->\n        super()\n\n\n    logout: (callback) ->\n        client.get \"logout/\", callback\n\n","ObjectPickerCroper = require '../views/object_picker'\nToken = require \"../models/token\"\nclient = require '../helpers/client'\n\nmodule.exports = class MainRouter extends Backbone.Router\n\n\n    routes :\n        \"home\"                : \"applicationList\"\n        \"customize\"           : \"applicationListEdit\"\n        \"applications\"        : \"market\"\n        \"config-applications\" : \"configApplications\"\n        \"account\"             : \"account\"\n        \"logout\"              : \"logout\"\n        \"update/:slug\"        : \"updateApp\"\n        \"update-stack\"        : \"updateStack\"\n        \"apps/:slug\"          : \"application\"\n        \"apps/:slug/*hash\"    : \"application\"\n        \"*path\"               : \"default\"\n        '*notFound'           : 'default'\n\n\n    initialize: ->\n        # Wait for applications to send intents. Intents are sent trough\n        # messages. Messages between app and home are possible only when the\n        # app is displayed with the home top bar.\n        window.addEventListener 'message', (event) =>\n            return false unless event.origin is window.location.origin\n            intent = event.data\n            switch intent.action\n                when 'getToken'\n                    path = event.source.location.pathname\n                    slug = path.replace '/apps/', ''\n                    slug = slug.replace '/', '' if slug.slice -1 is '/'\n                    token = new Token slug\n                    token.getToken\n                        success: (data) ->\n                            source = null\n                            # If we opened the app in another tab (mobile),\n                            # the message will be sent to the event.source as\n                            # we don't have any iframe with it.\n                            if $(window).width() <= 640\n                                source = event.source\n                            app.mainView.displayToken data.token, slug, source\n                        error: (message) ->\n                            alert 'Server error occured, get token failed.'\n                when 'goto'\n                    @navigate \"apps/#{intent.params}\", true\n                when undefined\n                    intentType = 'application/x-talkerjs-v1+json'\n                    try\n                        if JSON.parse(intent).type isnt intentType\n                            console.log \"Weird intent, cannot handle it\", intent\n                    catch e\n                        console.log \"Weird intent, cannot handle it\", intent\n                        # Log error server side\n                        window.onerror \"Error handling intent: \" + intent, \\\n                            \"MainRouter.initialize\", null, null, \\\n                            new Error()\n                else\n                    console.log \"Weird intent, cannot handle it.\", intent\n\n    # Always goto Home\n    # when hash is unkwnow\n    default: (hash) ->\n        @navigate 'home', true\n\n\n    navigate: (hash, trigger) ->\n        # Handle SAMEORIGIN error\n        # Invalid hash could be iframe source\n        # Force refresh to root application\n        if (client.getSAMEORIGINError hash)\n            hash = ''\n            trigger = true\n\n        super hash, trigger\n\n\n    applicationList: ->\n        app.mainView.displayApplicationsList()\n\n\n    configApplications: ->\n        app.mainView.displayConfigApplications()\n\n\n    updateApp: (slug) ->\n        app.mainView.displayUpdateApplication slug\n\n\n    updateStack: ->\n        app.mainView.displayUpdateStack()\n\n\n    market: ->\n        app.mainView.displayMarket()\n\n\n    account: ->\n        app.mainView.displayAccount()\n\n\n    application: (slug, hash='') ->\n        app.mainView.displayApplication slug, hash\n\n\n    logout: ->\n        app.mainView.logout()\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"account-form\" class=\"lightgrey pa2\"><div class=\"line\"><div class=\"mod left w50 pa2 personalisation\"><h4>');\nvar __val__ = t('account personalization')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><p><p>');\nvar __val__ = t('account background selection')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><div class=\"background-list line mb1\"></div><button id=\"background-add-button\" class=\"btn w100\">');\nvar __val__ = t('account background add')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div class=\"mod left w50 pa2\"><h4>');\nvar __val__ = t('account identifiers')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div class=\"input\"><p>');\nvar __val__ = t('alerts and password recovery email')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><div class=\"account-field fied-with-btn\"><input id=\"account-email-field\"/><button class=\"btn\">');\nvar __val__ = t('save')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></div><p class=\"error email hide\"></p></div><div class=\"input\"><p>');\nvar __val__ = t('public name description')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><div class=\"account-field fied-with-btn\"><input id=\"account-public-name-field\"/><button class=\"btn\">');\nvar __val__ = t('save')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></div><p class=\"error public-name hide\"></p></div><div class=\"input\"><p>');\nvar __val__ = t('domain name for urls and email')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><div class=\"account-field fied-with-btn\"><input id=\"account-domain-field\"/><button class=\"btn\">');\nvar __val__ = t('save')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></div><p class=\"error domain hide\"></p></div><h4>');\nvar __val__ = t('account localization')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div class=\"input\"><p>');\nvar __val__ = t('account timezone field description')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><div class=\"account-field\"><select id=\"account-timezone-field\"></select></div></div><div class=\"input\"><p>');\nvar __val__ = t('account language field description')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><div class=\"account-field\"><select id=\"account-locale-field\"><option value=\"fr\">');\nvar __val__ = t('french')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option><option value=\"en\">');\nvar __val__ = t('english')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option><option value=\"de\">');\nvar __val__ = t('german')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option><option value=\"es\">');\nvar __val__ = t('spanish')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option><option value=\"ja\">');\nvar __val__ = t('japanese')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option><option value=\"ko\">');\nvar __val__ = t('korean')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option><option value=\"ru\">');\nvar __val__ = t('russian')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option></select></div></div><h4>');\nvar __val__ = t('account password')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div id=\"change-password-form\"><div class=\"account-field\"><p><label>');\nvar __val__ = t('input your current password')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</label></p><input');\nbuf.push(attrs({ 'id':('account-password0-field'), 'type':(\"password\"), 'placeholder':(\"\" + (t('current password')) + \"\") }, {\"type\":true,\"placeholder\":true}));\nbuf.push('/></div><div class=\"account-field\"><p><label>');\nvar __val__ = t('enter a new password')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</label></p><input');\nbuf.push(attrs({ 'id':('account-password1-field'), 'type':(\"password\"), 'placeholder':(\"\" + (t('new password')) + \"\") }, {\"type\":true,\"placeholder\":true}));\nbuf.push('/></div><div class=\"account-field\"><p><label>');\nvar __val__ = t('confirm new password')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</label></p><input');\nbuf.push(attrs({ 'id':('account-password2-field'), 'type':(\"password\"), 'placeholder':(\"\" + (t('new password')) + \"\") }, {\"type\":true,\"placeholder\":true}));\nbuf.push('/></div><div class=\"account-field\"><p><button id=\"account-form-button\" class=\"full-width\">');\nvar __val__ = t('save your new password')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p><p class=\"loading-indicator\">&nbsp;</p><div id=\"account-info\" class=\"alert main-alert alert-success hide\"><div id=\"account-info-text\">');\nvar __val__ = t('account change password success')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div></div><div id=\"account-error\" class=\"alert alert-error main-alert hide\"><div id=\"account-form-error-text\">');\nvar __val__ = t('account change password error')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div></div></div></div><h4>');\nvar __val__ = t('account two factors auth')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div id=\"2fa-form\"><div class=\"account-field\"><p>');\nvar __val__ = t('account 2fa strategy')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><select id=\"account-2fa-field\"><option value=\"totp\">');\nvar __val__ = t('account 2fa totp')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option><option value=\"hotp\">');\nvar __val__ = t('account 2fa hotp')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option></select></div><div class=\"account-field\"><p></p><button id=\"account-2fa-button\" class=\"full-width\">');\nvar __val__ = t('enable 2fa')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><p class=\"loading-indicator\">&nbsp;</p><div class=\"account-2fa-info alert main-alert alert-success hide\"><div class=\"account-info-text\">');\nvar __val__ = t('account 2fa enabled')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div></div><div class=\"account-2fa-error alert alert-error main-alert hide\"><div class=\"account-form-error-text\">');\nvar __val__ = t('account 2fa error')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div></div></div></div><div id=\"2fa-infos\" class=\"account-field\"><p id=\"2fa-strategy\"></p><p class=\"bold\">');\nvar __val__ = t('account 2fa rectokens')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p id=\"2fa-recovery-tokens\" class=\"bold\"></p><p><button id=\"account-2fa-reset-tokens\" class=\"full-width\">');\nvar __val__ = t('reset 2fa tokens')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p><p class=\"full-width\">');\nvar __val__ = t('account 2fa token explanation')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p id=\"2fa-token\" class=\"token bold center\">&nbsp;</p><p>');\nvar __val__ = t('account 2fa qrcode explanation')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"center\"><img id=\"qrcode\"/></p><div id=\"2fa-hotp-yubikey\" class=\"hidden\"><p>');\nvar __val__ = t('2fa if yubikey')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p id=\"2fa-raw-key\" class=\"bold center\">&nbsp;</p></div><div id=\"2fa-hotp-reset\" class=\"hidden\"><p>');\nvar __val__ = t('account 2fa hotp reset explanation')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><div class=\"account-field\"><p></p><button id=\"account-2fa-reset-button\" class=\"full-width\">');\nvar __val__ = t('2fa reset hotp')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></div></div><p>');\nvar __val__ = t('account 2fa disable explanation')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><div class=\"account-field\"><p></p><button id=\"account-2fa-off-button\" class=\"full-width\">');\nvar __val__ = t('disable 2fa')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><p class=\"loading-indicator\">&nbsp;</p><div class=\"account-2fa-info alert main-alert alert-success hide\"><div id=\"account-info-text\">');\nvar __val__ = t('account 2fa disabled')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div></div><div class=\"account-2fa-error alert alert-error main-alert hide\"><div id=\"account-form-error-text\">');\nvar __val__ = t('account 2fa error')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div></div></div></div></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"albumLabel\"><img class=\"cover\"/><div class=\"label\"></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<iframe');\nbuf.push(attrs({ 'src':(\"\" + (source) + \"\"), 'id':(\"\" + (id) + \"\") }, {\"src\":true,\"id\":true}));\nbuf.push('></iframe>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<button class=\"delete-background-button btn right ma1\"><i class=\"fa fa-trash\"></i></button><img');\nbuf.push(attrs({ 'src':(\"\" + (model.src) + \"\"), \"class\": ('w100') + ' ' + ('left') }, {\"src\":true}));\nbuf.push('/>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"icon-container\"><img src=\"/img/spinner-white-thin.svg\" class=\"spinner\"/><img src=\"\" class=\"icon\"/></div><div class=\"infos\"><div class=\"line\"><strong><a');\nbuf.push(attrs({ 'href':(\"#apps/\" + (app.slug) + \"\"), \"class\": ('app') }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = app.displayName\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></strong><button');\nbuf.push(attrs({ 'title':(\"\" + (t('update')) + \"\"), \"class\": ('update-app') + ' ' + ('outline-blue') }, {\"title\":true}));\nbuf.push('><i class=\"fa fa-refresh\"></i><span>');\nvar __val__ = t('update')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button></div><div class=\"line\">');\nif ( app.version)\n{\nbuf.push('<span>' + escape((interp = app.version) == null ? '' : interp) + '</span>');\n}\nbuf.push('<span>&nbsp;-&nbsp;</span>');\nif ( app.state === 'installed')\n{\nbuf.push('<span class=\"state-label\">');\nvar __val__ = t('running')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span>');\n}\nelse\n{\nbuf.push('<span class=\"state-label\">' + escape((interp = app.state) == null ? '' : interp) + '</span>');\n}\nbuf.push('</div><div class=\"line\"><div class=\"comments\"><a');\nbuf.push(attrs({ 'href':(\"\" + (app.websiteUrl) + \"\"), 'target':(\"_blank\") }, {\"href\":true,\"target\":true}));\nbuf.push('>');\nvar __val__ = app.website\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a><span>(' + escape((interp = app.branch) == null ? '' : interp) + ')</span></div></div></div><div class=\"buttons\">');\nif ( app.favorite)\n{\nbuf.push('<button');\nbuf.push(attrs({ 'title':(\"\" + (t('config application unmark favorite')) + \"\"), \"class\": ('transparent-grey') + ' ' + ('favorite') }, {\"title\":true}));\nbuf.push('><i class=\"fa fa-star\">   </i></button>');\n}\nelse\n{\nbuf.push('<button');\nbuf.push(attrs({ 'title':(\"\" + (t('config application mark favorite')) + \"\"), \"class\": ('transparent-grey') + ' ' + ('favorite') }, {\"title\":true}));\nbuf.push('><i class=\"fa fa-star-o\">   </i></button>');\n}\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"/logs/\" + (app.slug) + \"\"), 'target':(\"_blank\"), 'title':(\"\" + (t('show logs')) + \"\"), 'role':(\"button\"), \"class\": ('transparent-grey') + ' ' + ('logs') }, {\"href\":true,\"target\":true,\"title\":true,\"role\":true}));\nbuf.push('><i class=\"fa fa-code\"></i></a>');\nif ( app.state === \"stopped\")\n{\nbuf.push('<button');\nbuf.push(attrs({ 'title':(\"\" + (t('start this app')) + \"\"), \"class\": ('transparent-grey') + ' ' + ('stopped') + ' ' + ('start-stop-btn') }, {\"title\":true}));\nbuf.push('><i class=\"fa fa-power-off\"></i></button>');\n}\nelse\n{\nbuf.push('<button');\nbuf.push(attrs({ 'title':(\"\" + (t('stop this app')) + \"\"), \"class\": ('transparent-grey') + ' ' + ('start-stop-btn') }, {\"title\":true}));\nbuf.push('><i class=\"fa fa-power-off\"></i></button>');\n}\nbuf.push('<button');\nbuf.push(attrs({ 'title':(\"\" + (t('remove')) + \"\"), \"class\": ('transparent-grey') + ' ' + ('remove-app') }, {\"title\":true}));\nbuf.push('><i class=\"fa fa-trash\"></i></button></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"md-overlay\"></div><div class=\"line platform-section\"><div class=\"status-section\"><div class=\"mod left w70\"><div class=\"platform\"><h4>');\nvar __val__ = t('cozy platform')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div class=\"stack-app mt2 line\"><div class=\"version\"><div class=\"line\"><span class=\"app\">Data System: </span><span class=\"version-number data-system\">--</span><a href=\"/logs/data-system\" target=\"_blank\" class=\"small\">');\nvar __val__ = t('show logs')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></div><div class=\"line\"><span class=\"app\">Proxy: </span><span class=\"version-number proxy\">--</span><a href=\"/logs/proxy\" target=\"_blank\" class=\"small\">');\nvar __val__ = t('show logs')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></div><div class=\"line\"><span class=\"app\">Home: </span><span class=\"version-number home\">--</span><a href=\"/logs/home\" target=\"_blank\" class=\"small\">');\nvar __val__ = t('show logs')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></div><div class=\"line\"><span class=\"app\">Controller: </span><span class=\"version-number controller\">--</span></div></div><div class=\"mod buttons\"><button class=\"update-all small\"><i class=\"fa fa-refresh mr1\"></i><span>');\nvar __val__ = t('update all')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button><button class=\"reboot-stack small outline-blue\"><i class=\"fa fa-power-off mr1\"></i><span>');\nvar __val__ = t('reboot stack')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button></div></div></div><h4 class=\"title-app h4\">');\nvar __val__ = t('manage your applications')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4></div><div class=\"mod left w30\"><section><h4>');\nvar __val__ = t('hardware consumption')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div class=\"block-container\"><div class=\"info-block disk-space\"><div class=\"icon-hard-drive\"></div><div><span class=\"title\">');\nvar __val__ = t('status hard drive label')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span><div class=\"line\"><span class=\"amount\">0</span><div class=\"lowlight\"> / <span class=\"total\">0</span> ' + escape((interp = t('gigabytes')) == null ? '' : interp) + '</div></div></div></div><div class=\"info-block memory-free\"><div class=\"icon-speed-counter\"></div><div><span class=\"title\">');\nvar __val__ = t('status memory label')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span><div class=\"line\"><span class=\"amount\">0</span><div class=\"lowlight\"> / <span class=\"total\">0</span> ' + escape((interp = t('megabytes')) == null ? '' : interp) + '</div></div></div></div></div></section><section><h4 class=\"title-device h4\">');\nvar __val__ = t('manage your devices')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div class=\"no-device\"><p>');\nvar __val__ = t('mobile app promo')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><a role=\"button\" href=\"https://files.cozycloud.cc/android/CozyMobile_lastest.apk\"><i class=\"fa fa-android\"></i><span>');\nvar __val__ = t('download apk')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a><a target=\"_blank\" href=\"https://play.google.com/store/apps/details?id=io.cozy.files_client\"><img src=\"img/en-play-badge.png\"/></a><p>');\nvar __val__ = t('desktop app promo')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><a role=\"button\" target=\"_blank\" href=\"https://docs.cozy.io/en/mobile/desktop.html\" class=\"linux\"><img src=\"img/linux.svg\"/><span>');\nvar __val__ = t('download desktop linux')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a></div></section></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"mod\"><strong>' + escape((interp = device.login) == null ? '' : interp) + '</strong></div><div class=\"buttons\"><button class=\"remove-device transparent-grey\"><i class=\"fa fa-trash mr1\"></i> <span class=\"label\">');\nvar __val__ = t('revoke device access')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"md-content\"><div class=\"md-header clearfix\"><div class=\"line\"><h3 class=\"left\">');\nvar __val__ = t('app broken title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h3></div></div><div class=\"md-body\"><strong>' + escape((interp = t('app broken')) == null ? '' : interp) + '</strong><a href=\"#config-applications\">' + escape((interp =  t('reinstall broken app')) == null ? '' : interp) + '</a><br/><span>' + escape((interp = t('app msg')) == null ? '' : interp) + '</span><br/><br/><span>' + escape((interp = errortype) == null ? '' : interp) + '</span><br/><br/><button id=\"more\" class=\"btn\">');\nvar __val__ = t('more details')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><br/><br/><p class=\"details\">');\nvar __val__ = details\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></div><div class=\"md-footer clearfix\">');\nif ( cancel)\n{\nbuf.push('<button id=\"cancelbtn\" class=\"transparent-grey\">');\nvar __val__ = cancel\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button>');\n}\nbuf.push('<button id=\"ok\" class=\"btn right\">');\nvar __val__ = ok\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"mod pa2 help-section\"><h2>');\nvar __val__ = t('help community title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><div class=\"line\"><a href=\"https://forum.cozy.io\" target=\"_blank\"><i class=\"icon-small forum\"></i><span>');\nvar __val__ = t('help forum title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a><a href=\"https://webchat.freenode.net/?channels=cozycloud\" target=\"_blank\"><i class=\"icon-small irc\"></i><span>');\nvar __val__ = t('help IRC title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a><a href=\"https://github.com/cozy\" target=\"_blank\"><i class=\"icon-small github\"></i><span>');\nvar __val__ = t('help github title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a></div></div><div class=\"mod pa2 help-section\"><h2>');\nvar __val__ = t('help support title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><div class=\"line\"><a href=\"mailto:support@cozycloud.cc\"><i class=\"icon-small contact\"></i><span>');\nvar __val__ = t('help email title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a><a href=\"https://twitter.com/intent/tweet?text=@mycozycloud%20\" target=\"_blank\"><i class=\"icon-small twitter\"></i><span>');\nvar __val__ = t('help twitter title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a><a href=\"https://cozy.io\" target=\"_blank\"><i class=\"icon-small doc\"></i><span>');\nvar __val__ = t('help documentation title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a></div></div><div class=\"mod pa2 help-section\"><h2>');\nvar __val__ = t('help direct title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><textarea id=\"send-message-textarea\" class=\"mt2 w100\"></textarea><p class=\"help-logs\"><input id=\"send-message-logs\" type=\"checkbox\" checked=\"checked\"/><label for=\"send-message-logs\">');\nvar __val__ = t('help send logs')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</label></p><button id=\"send-message-button\" class=\"btn send-message-btn\"><div class=\"fa fa-paper-plane\"></div><span>');\nvar __val__ = t('help send message action')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button><div id=\"send-message-error\" class=\"alert main-alert alert-error w100\">');\nvar __val__ = t('send message error')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><div id=\"send-message-success\" class=\"alert main-alert alert-success w100\">');\nvar __val__ = t('send message success')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"line\"><p class=\"help-text mt2\">');\nvar __val__ = t('The first place to find help is:')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"help-text\"><a');\nbuf.push(attrs({ 'href':(\"\" + (helpUrl) + \"\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = helpUrl) == null ? '' : interp) + '</a></p></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"no-app-message\" class=\"w600\"><div id=\"start-title\" class=\"darkbg clearfix\"><a href=\"https://cozy.io\"><img src=\"img/happycloud.png\" class=\"logo\"/></a><p class=\"biggest\">');\nvar __val__ = t('welcome to your cozy')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></div><p class=\"bigger\">');\nvar __val__ = t('you have no apps')\nbuf.push(null == __val__ ? \"\" : __val__);\nbuf.push('</p><p class=\"bigger\">');\nvar __val__ = t('noapps.customize your cozy', {account: '#account', appstore: '#applications'})\nbuf.push(null == __val__ ? \"\" : __val__);\nbuf.push('</p></div><div id=\"app-list\"><section id=\"apps-favorite\" class=\"line\"><h2>');\nvar __val__ = t('home section favorites')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><div class=\"application-container\"></div></section><section id=\"apps-leave\" class=\"line\"><h2>');\nvar __val__ = t('home section leave')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><div class=\"application-container\"></div></section><section id=\"apps-main\" class=\"line\"><h2>');\nvar __val__ = t('home section main')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><div class=\"application-container\"></div></section><section id=\"apps-productivity\" class=\"line\"><h2>');\nvar __val__ = t('home section productivity')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><div class=\"application-container\"></div></section><section id=\"apps-data\" class=\"line\"><h2>');\nvar __val__ = t('home section data management')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><div class=\"application-container\"></div></section><section id=\"apps-watch\" class=\"line\"><h2>');\nvar __val__ = t('home section personal watch')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><div class=\"application-container\"></div></section><section id=\"apps-misc\" class=\"line\"><h2>');\nvar __val__ = t('home section misc')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><div class=\"application-container\"></div></section><section id=\"apps-platform\" class=\"line show\"><h2>');\nvar __val__ = t('home section platform')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><div class=\"application-container\"><div class=\"application mod w360-33 w640-25 full-20 left platform-app\"><div class=\"application-inner store\"><a href=\"#applications\"><img src=\"img/apps/store.svg\" class=\"icon\"/><p class=\"app-title\">');\nvar __val__ = t('app store')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></a></div></div><div class=\"application mod w360-33 w640-25 full-20 left platform-app\"><div class=\"application-inner myapps\"><a href=\"#config-applications\"><img src=\"img/apps/my-apps.svg\" class=\"icon svg\"/><p class=\"app-title\">');\nvar __val__ = t('app status')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></a></div></div><div class=\"application mod w360-33 w640-25 full-20 left platform-app\"><div href=\"#account\" class=\"application-inner\"><a href=\"#account\"><img src=\"img/apps/settings.svg\" class=\"icon svg\"/><p class=\"app-title\">');\nvar __val__ = t('settings')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></a></div></div></div></section></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"application-inner\"><div class=\"vertical-aligner\"><img src=\"\" class=\"icon\"/><img src=\"/img/spinner-white-thin.svg\" class=\"spinner\"/><p class=\"app-title\">' + escape((interp = app.displayName) == null ? '' : interp) + '</p></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<header id=\"header\" class=\"navbar\"></header><div id=\"notifications-menu\" class=\"right-menu\"><div class=\"top-title\"><h2>');\nvar __val__ = t('notifications')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><button id=\"dismiss-all\" class=\"btn outline-darkgrey small\"><span>');\nvar __val__ = t('dismiss all')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button></div><div id=\"notifications\"><ul id=\"notifications-list\"><li id=\"no-notif-msg\"></li></ul></div></div><div id=\"help-menu\" class=\"right-menu\"></div><div class=\"home-body\"><div id=\"app-frames\"></div><div id=\"content\"><!-- Preload spinners and hover icons--><img src=\"/img/spinner.svg\" class=\"hidden\"/><img src=\"/img/spinner-white.svg\" class=\"hidden\"/><div id=\"home-content\"></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"viewPort\"><div class=\"thumbs\"></div></div><div class=\"index\"></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"platform-section\"><div id=\"app-market-list\"><div id=\"market-applications-list\"><div id=\"no-app-message\">');\nvar __val__ = t('installed everything')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div></div></div><div id=\"your-app\" class=\"clearfix\"><h2>');\nvar __val__ = t('install your app')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><div class=\"text\"><p>');\nvar __val__ = t('market install your app')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"add-app-field fied-with-btn\"><input type=\"text\" id=\"app-git-field\" placeholder=\"https://github.com/username/repository.git@branch\" class=\"span3\"/><button class=\"btn app-install-button\">');\nvar __val__ = t('install')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p><div class=\"error alert-error\"></div><div class=\"info alert\"></div><p class=\"more\">');\nvar __val__ = t('market install your app tutorial')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('<a href=\"https://dev.cozy.io/\" target=\"_blank\">');\nvar __val__ = t('market app tutorial')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>.</p></div></div></div><div class=\"md-overlay\"></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"app-img\">');\nif ( app.svgSpriteSlug)\n{\nbuf.push('<img');\nbuf.push(attrs({ \"class\": (app.svgSpriteSlug) }, {\"class\":true}));\nbuf.push('/>');\n}\nelse\n{\nbuf.push('<img');\nbuf.push(attrs({ 'src':(\"\" + (app.icon) + \"\") }, {\"src\":true}));\nbuf.push('/>');\n}\nbuf.push('<span class=\"installing-label\">');\nvar __val__ = t(\"market app install\")\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></div><div class=\"app-text\"><h3>' + escape((interp = app.displayName) == null ? '' : interp) + '');\nif ( app.beta)\n{\nbuf.push('<span class=\"beta\">Beta</span>');\n}\nbuf.push('</h3><span class=\"comment\">');\nvar __val__ = t(app.comment)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span><p>');\nvar __val__ = t(app.description)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><div class=\"btn-group\"><button class=\"outline-blue small\">');\nvar __val__ = t(\"install\")\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><a');\nbuf.push(attrs({ 'href':(\"\" + (app.git) + \"\"), 'target':(\"_blank\"), 'role':(\"button\"), \"class\": ('transparent-grey') + ' ' + ('small') + ' ' + ('website') }, {\"href\":true,\"target\":true,\"role\":true}));\nbuf.push('><div class=\"fa fa-github\"></div><span>');\nvar __val__ = t(\"github\")\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a>');\nif ( app.website !== undefined)\n{\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"\" + (app.website) + \"\"), 'target':(\"_blank\"), 'role':(\"button\"), \"class\": ('transparent-grey') + ' ' + ('small') + ' ' + ('website') }, {\"href\":true,\"target\":true,\"role\":true}));\nbuf.push('><div class=\"fa fa-link\"></div><span>');\nvar __val__ = t(\"website\")\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a>');\n}\nbuf.push('</div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"#apps/\" + (model.slug) + \"/\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = model.displayName) == null ? '' : interp) + '</a>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"menu-applications-toggle\"><span id=\"current-application\"></span></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"navbar clearfix\"><a');\nbuf.push(attrs({ 'id':('logout-button'), 'href':(\"#logout\"), 'title':(\"\" + (t('logout')) + \"\"), \"class\": ('btn-navbar') + ' ' + ('sign-out') + ' ' + ('right') }, {\"href\":true,\"title\":true}));\nbuf.push('><i class=\"fa fa-sign-out\"></i></a><a');\nbuf.push(attrs({ 'id':('help-toggle'), 'href':(\"#help\"), 'title':(\"\" + (t('help')) + \"\"), \"class\": ('btn-navbar') + ' ' + ('right') }, {\"href\":true,\"title\":true}));\nbuf.push('><i class=\"fa fa-question-circle\"></i></a><div id=\"notifications-container\" class=\"right\"></div><a');\nbuf.push(attrs({ 'href':(\"#home\"), 'title':(\"\" + (t('navbar back button title')) + \"\"), \"class\": ('back-button') + ' ' + ('left') }, {\"href\":true,\"title\":true}));\nbuf.push('><div class=\"fa fa-chevron-left\"></div><span>');\nvar __val__ = t(\"navbar back button title\")\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a><div id=\"menu-applications-container\"></div>');\n var qwantMode = parent.urlArguments && parent.urlArguments.modes && parent.urlArguments.modes.indexOf('qwant_search') !== -1;\nif ( ((parent.DEV_ENV || qwantMode || parent.ENABLE_QWANT_SEARCH) && parent.qwantInstalled) || parent.BEN_DEMO)\n{\nbuf.push('<div class=\"search\"><input id=\"search-bar\" type=\"text\"/></div>');\n}\nbuf.push('</div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<li class=\"app-button\"><a');\nbuf.push(attrs({ 'id':(\"\" + (app.slug) + \"\"), 'href':(\"#apps/\" + (app.slug) + \"\") }, {\"id\":true,\"href\":true}));\nbuf.push('><img');\nbuf.push(attrs({ 'src':(\"/apps/\" + (app.slug) + \"/favicon.ico\") }, {\"src\":true}));\nbuf.push('/></a></li>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<a class=\"dismiss\">&times;</a><div class=\"notification-text\">' + escape((interp = model.text) == null ? '' : interp) + '</div><div class=\"notification-date\">' + escape((interp = model.date) == null ? '' : interp) + '</div>');\nif ( model.actionText !== undefined && model.actionText !== null)\n{\nif ( model.update)\n{\nbuf.push('<a class=\"doaction btn outline-blue\"><i class=\"fa fa-refresh\"></i>');\nvar __val__ = t(model.actionText)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\n}\nelse\n{\nbuf.push('<a class=\"doaction btn grey\">');\nvar __val__ = t(model.actionText)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\n}\n}\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<a');\nbuf.push(attrs({ 'id':('notifications-toggle'), 'title':(\"\" + (t('navbar notifications')) + \"\"), \"class\": ('btn-navbar') }, {\"title\":true}));\nbuf.push('><i class=\"fa fa-bell\"></i><span id=\"notifications-counter\"></span></a><div id=\"clickcatcher\"></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<!-- never displayed, just for downloading.--><img id=\"img-result\"/><div class=\"objectPickerCont\"><nav role=\"tablist\" aria-controls=\"objectPickerCont\" class=\"fp-nav-tabs\"></nav></div><div class=\"croperCont\"><div class=\"frame-to-crop\"><div id=\"img-to-crop\"></div></div><div id=\"frame-preview\"><img id=\"img-preview\"/></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"bloc-container\"><div class=\"img-container\"><div class=\"url-preview\"></div></div><input');\nbuf.push(attrs({ 'placeholder':(\"\" + (t('url of an image')) + \"\"), 'value':(\"\"), \"class\": ('modal-url-input') }, {\"placeholder\":true,\"value\":true}));\nbuf.push('/></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"search-tab-container\"><input');\nbuf.push(attrs({ 'placeholder':(\"\" + (t('What are you looking for?')) + \"\"), 'value':(\"\"), \"class\": ('modal-search-input') }, {\"placeholder\":true,\"value\":true}));\nbuf.push('/><div class=\"subsection\">Powered by <img src=\"img/qwant-logo.jpg\" alt=\"Qwant logo\"/></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"modal-file-drop-zone\"><p>' + escape((interp = t('drop a file')) == null ? '' : interp) + '</p><div class=\"drop-zone\"></div><div class=\"photoUpload-btn\"><button class=\"btn\">' + escape((interp = t('ObjPicker upload btn')) == null ? '' : interp) + '</button></div></div><input type=\"file\" style=\"display:none\" class=\"uploader\"/>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"md-content\"><div class=\"md-header clearfix\"><div class=\"line\"><h3 class=\"left\">' + escape((interp = model.displayName) == null ? '' : interp) + '</h3></div>');\nif ( (model.comment !== 'official application'))\n{\nbuf.push('<div class=\"line noncozy-warning\"><i class=\"fa fa-info-circle\"></i><span>');\nvar __val__ = t('warning unofficial app')\nbuf.push(null == __val__ ? \"\" : __val__);\nbuf.push('</span></div>');\n}\nbuf.push('</div><div class=\"md-body\"></div><div class=\"md-footer\"><button id=\"cancelbtn\" class=\"btn transparent-grey\">');\nvar __val__ = t('cancel')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"confirmbtn\" class=\"btn\">');\nvar __val__ = t('install')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"md-header mt2\">');\nvar __val__ = t('Once updated, this application will require the following permissions:')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><div class=\"md-body\"><div>&nbsp;</div></div><div class=\"md-footer mt2\"><a id=\"cancelbtn\" class=\"btn transparent-grey\">');\nvar __val__ = t('cancel')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\nif ( model.state === 'broken')\n{\nbuf.push('<a id=\"confirmbtn\" class=\"btn\">');\nvar __val__ = t('confirm install')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\n}\nelse\n{\nbuf.push('<a id=\"confirmbtn\" class=\"btn\">');\nvar __val__ = t('confirm update')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\n}\nbuf.push('</div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<!--.section-title.darkbg.bigger help--><line class=\"w800 lightgrey\"><h4 class=\"help-text darkbg pa2\">');\nvar __val__ = t('tutorial title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div id=\"tuto-files\" class=\"line pa2 question\"><p class=\"help-text mt2\">');\nvar __val__ = t('tutorial question files')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"center\"><button id=\"files-no\" class=\"btn\">');\nvar __val__ = t('tutorial no')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"files-yes\" class=\"btn\">');\nvar __val__ = t('tutorial yes')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div id=\"tuto-emails\" class=\"line pa2 question\"><p class=\"help-text mt2\">');\nvar __val__ = t('tutorial question emails')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"center\"><button id=\"emails-no\" class=\"btn\">');\nvar __val__ = t('tutorial no')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"emails-yes\" class=\"btn\">');\nvar __val__ = t('tutorial yes')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div id=\"tuto-calendar\" class=\"line pa2 question\"><p class=\"help-text mt2\">');\nvar __val__ = t('tutorial question calendar')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"center\"><button id=\"calendar-no\" class=\"btn\">');\nvar __val__ = t('tutorial no')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"calendar-yes\" class=\"btn\">');\nvar __val__ = t('tutorial yes')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div id=\"tuto-contacts\" class=\"line pa2 question\"><p class=\"help-text mt2\">');\nvar __val__ = t('tutorial question contacts')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"center\"><button id=\"contacts-no\" class=\"btn\">');\nvar __val__ = t('tutorial no')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"contacts-yes\" class=\"btn\">');\nvar __val__ = t('tutorial yes')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div id=\"tuto-photos\" class=\"line pa2 question\"><p class=\"help-text mt2\">');\nvar __val__ = t('tutorial question photos')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"center\"><button id=\"photos-no\" class=\"btn\">');\nvar __val__ = t('tutorial no')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"photos-yes\" class=\"btn\">');\nvar __val__ = t('tutorial yes')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div id=\"end-screen\" class=\"line pa2 question\"><p class=\"help-text mt2\">');\nvar __val__ = t('tutorial final headline')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><ul><li><a href=\"https://docs.cozy.io/en/mobile/files.html\">');\nvar __val__ = t('tutorial doc files link')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li><li><a href=\"https://docs.cozy.io/en/mobile/contacts.html\">');\nvar __val__ = t('tutorial doc contacts link')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li><li><a href=\"https://docs.cozy.io/en/mobile/calendar.html\">');\nvar __val__ = t('tutorial doc calendar link')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li></ul><p class=\"center\"><a href=\"#home\" class=\"btn\">');\nvar __val__ = t('tutorial final button')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></p></div></line>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge\n/**/) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"md-content\"><div class=\"md-header clearfix\"><div class=\"line\"><h3 class=\"left\">');\nvar __val__ = t('update stack modal title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h3></div></div><div class=\"md-body\"><p class=\"step1\">');\nvar __val__ = t('update stack modal content')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"step2\">');\nvar __val__ = t('update stack waiting message')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"success\">');\nvar __val__ = t('update stack success')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><div class=\"permission-changes\"><h5>');\nvar __val__ = t('update stack warning')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h5><p>');\nvar __val__ = t('update stack permission changes')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></div><p class=\"error stack-error title\">');\nvar __val__ = t('update stack error title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"error stack-error\">');\nvar __val__ = t('update stack error')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"error apps-error title\">');\nvar __val__ = t('update apps error title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"error apps-error\">');\nvar __val__ = t('update apps error')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><h5 class=\"error apps-error\">');\nvar __val__ = t('update apps error list title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h5></div><div class=\"md-footer clearfix\"><button id=\"cancelbtn\" class=\"transparent-grey\">');\nvar __val__ = t('cancel')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"confirmbtn\" class=\"btn\">');\nvar __val__ = t('update stack modal confirm')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"ok\">');\nvar __val__ = t('ok')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></div></div>');\n}\nreturn buf.join(\"\");\n};","BaseView = require 'lib/base_view'\n\nBackground = require '../models/background'\ntimezones = require('helpers/timezone').timezones\nrequest = require 'lib/request'\nBackgroundList = require 'views/background_list'\nInstance = require 'models/instance'\nObjectPicker = require './object_picker'\n\n\n# View describing main screen for user once he is logged\nmodule.exports = class exports.AccountView extends BaseView\n    id: 'account-view'\n    template: require 'templates/account'\n\n    events:\n        'click #background-add-button': 'onAddBackgroundClicked'\n\n\n    afterRender: ->\n\n        # Register widgets\n        @emailField = @$ '#account-email-field'\n        @publicNameField = @$ '#account-public-name-field'\n        @timezoneField = @$ '#account-timezone-field'\n        @domainField = @$ '#account-domain-field'\n        @localeField = @$ '#account-locale-field'\n        @infoAlert = @$ '#account-info'\n        @infoAlert.hide()\n        @errorAlert = @$ '#account-error'\n        @errorAlert.hide()\n        @info2faAlert = @$ '.account-2fa-info'\n        @info2faAlert.hide()\n        @error2faAlert = @$ '.account-2fa-error'\n        @error2faAlert.hide()\n\n        @twoFactorInfo = @$ '#2fa-infos'\n        @twoFactorToken = @$ '#2fa-token'\n        @twoFactorRecToken = @$ '#2fa-recovery-tokens'\n        @changePasswordForm = @$ '#change-password-form'\n        @twoFactorForm = @$ '#2fa-form'\n        @accountSubmitButton = @$ '#account-form-button'\n        @twoFactorSubmitButton = @$ '#account-2fa-button'\n        @twoFactorOffButton = @$ '#account-2fa-off-button'\n        @twoFactorStrategy = @$ '#2fa-strategy'\n        @twoFactorResetForm = @$ '#2fa-hotp-reset'\n        @twoFactorResetButton = @$ '#account-2fa-reset-button'\n        @twoFactorResetTokensButton = @$ '#account-2fa-reset-tokens'\n        @twoFactorYubikeyBlock = @$ '#2fa-hotp-yubikey'\n        @twoFactorRawKey = @$ '#2fa-raw-key'\n\n        @twoFactorQrCode = @$('#qrcode')\n\n        # Configure Background\n        @accountSubmitButton.click (event) =>\n            event.preventDefault()\n            @onNewPasswordSubmit()\n        @twoFactorSubmitButton.click (event) =>\n            event.preventDefault()\n            @on2faEnableSubmit()\n        @twoFactorOffButton.click (event) =>\n            event.preventDefault()\n            @on2faDisableSubmit()\n        @twoFactorResetButton.click (event) =>\n            event.preventDefault()\n            @on2faResetSubmit()\n        @twoFactorResetTokensButton.click (event) =>\n            event.preventDefault()\n            @on2faResetTokens()\n\n        # Fill timezone selector\n        for timezone in timezones\n            @timezoneField.append(\n                \"<option value=\\\"#{timezone}\\\">#{timezone}</option>\"\n            )\n\n        # Build and render background list. Listen to background changes.\n        @backgroundList = new BackgroundList\n            el: @$ '.background-list'\n        @backgroundList.collection.on 'change', @onBackgroundChanged\n        @backgroundAddButton = @$ '#background-add-button'\n\n        # Load data once everything is built\n        @fetchData()\n        if window.managed\n            @$('#account-domain-field')[0].disabled = true\n            @$('#account-domain-field').parent().find('.btn').hide()\n\n\n    # When password data are submited, it sends a request to backend to save\n    # them. If an error occurs, message is displayed.\n    onNewPasswordSubmit:  =>\n\n        form =\n            password0: @password0Field.val()\n            password1: @password1Field.val()\n            password2: @password2Field.val()\n\n        @infoAlert.hide()\n        @errorAlert.hide()\n\n        hideFunc = null\n        showError = (message) =>\n            @errorAlert.html t message\n            @errorAlert.fadeIn()\n            clearTimeout hideFunc\n            hideFunc = setTimeout =>\n                @errorAlert.fadeOut()\n            , 10000\n\n        if form.password1.length < 5\n            showError 'account change password short'\n\n        else if form.password1 isnt form.password2\n            showError 'account change password difference'\n\n        else\n\n            @accountSubmitButton.spin true\n            request.post 'api/user', form, (err, data) =>\n\n                @accountSubmitButton.spin false\n                if err\n                    @password0Field.val null\n                    @password1Field.val null\n                    @password2Field.val null\n                    showError 'account change password error'\n\n                else\n                    if data.success\n                        @infoAlert.show()\n                        @password0Field.val null\n                        @password1Field.val null\n                        @password2Field.val null\n                        setTimeout =>\n                            @infoAlert.hide()\n                        , 10000\n                    else\n                        showError 'account change password error'\n\n\n    # Displays success message on the two-factor auth panel and reload the page.\n    # Only called when 2FA is enabled or disabled (else we don't reload).\n    on2faStatusChangeSuccess: (message) =>\n        @info2faAlert.html t message\n        @info2faAlert.fadeIn()\n        clearTimeout hideFunc\n        hideFunc = setTimeout ->\n            window.location.reload()\n        , 2000\n\n\n    # Displays error on the two-factor auth panel.\n    # This one is also used for counter reset.\n    on2faError: (error) =>\n        console.error error\n        @error2faAlert.fadeIn()\n        setTimeout =>\n            @error2faAlert.fadeOut()\n        , 5000\n\n\n    # Enables two-factor auth by generating a new key (if there's already one\n    # in base, resetting it), and set the HOTP counter if the auth type is HOTP\n    on2faEnableSubmit: ->\n        authType = @twoFactorField.val()\n\n        form =\n            authType: authType\n            encryptedOtpKey: @getOtpKey()\n            hotpCounter: 0 if authType is 'hotp'\n            recoveryCodes: @getRecoveryTokens()\n        @twoFactorSubmitButton.spin true\n\n        request.post 'api/user', form, (err, data) =>\n            @twoFactorSubmitButton.spin false\n            if err\n                @on2faError()\n            else\n                if data.success\n                    @on2faStatusChangeSuccess 'account 2fa enabled'\n                else\n                    @on2faError()\n\n\n    # Disables two-factor auth. No resetting of the key nor the counter, but\n    # that will happen if the user enables it back.\n    on2faDisableSubmit: ->\n        form =\n            authType: null\n        @twoFactorSubmitButton.spin true\n\n        request.post 'api/user', form, (err, data) =>\n            @twoFactorSubmitButton.spin false\n            if err\n                @on2faError()\n            else\n                if data.success\n                    @on2faStatusChangeSuccess 'account 2fa disabled'\n                else\n                    @on2faError()\n\n\n    # Resets the HOTP counter. This function can be called only in HOTP mode\n    # (and it will set the 2FA mode to HOTP otherwise).\n    # We don't use @on2faStatusChangeSuccess here because we don't need to\n    # reload the page after resetting the counter.\n    on2faResetSubmit: ->\n        form =\n            authType: 'hotp'\n            hotpCounter: 0\n\n        request.post 'api/user', form, (err, data) =>\n            @twoFactorSubmitButton.spin false\n            if err\n                @on2faError()\n            else\n                if data.success\n                    @info2faAlert.html t 'account 2fa reset'\n                    @info2faAlert.fadeIn()\n                    clearTimeout hideFunc\n                    hideFunc = setTimeout =>\n                        @info2faAlert.fadeOut()\n                    , 5000\n                else\n                    @on2faError()\n\n\n    # Reset recovery tokens in the DS\n    on2faResetTokens: ->\n        form =\n            recoveryCodes: @getRecoveryTokens()\n\n        request.post 'api/user', form, (err, data) =>\n            @twoFactorSubmitButton.spin false\n            if err\n                @on2faError()\n            else\n                if data.success\n                    @on2faStatusChangeSuccess 'account 2fa enabled'\n                else\n                    @on2faError()\n\n\n    # OTP key is generated client-side, in this function.\n    getOtpKey: () ->\n        PRNG = new Uint32Array 5\n        window.crypto.getRandomValues PRNG\n\n        return PRNG.reduce (key, subkey) ->\n            # pad each PRNG hex with '0'\n            key += ('0000' + subkey.toString(16)).slice(-8)\n        , ''\n\n\n    # Generate tokens for recovery in case of device loss\n    getRecoveryTokens: () ->\n        return (Math.floor Math.random()*100000000 for [0..9])\n\n\n    # Retrieve two-factor auth specific token, which is the base32-encoded key\n    # (10-char long string we first generate in the above function).\n    getUserToken: (next) ->\n        request.get 'api/user/2fa', (err, data) ->\n            if err\n                next err\n            else\n                next null, data.token, data.key\n\n\n    # Return the string to be encoded as a QR code, containing user datas and\n    # encoded token\n    get2faQRCodeString: (data, token) ->\n        return \"otpauth://#{data.authType}/Cozy:#{data.email}\" +\n               \"?secret=#{token}&issuer=Cozy\"\n\n\n    # Build a function that save given data when triggered and display\n    # a loading indicator on the save button of the field.\n    getSaveFunction: (fieldName, fieldWidget, path) ->\n        saveButton = fieldWidget.parent().find('.btn')\n        alertMsg = @$ \".error.#{fieldName}\"\n        saveFunction = ->\n            saveButton.spin true\n\n            data = {}\n            data[fieldName] = fieldWidget.val()\n            request.post \"api/#{path}\", data, (err) ->\n                saveButton.spin false\n\n                if err\n                    err = err.toString()\n                    err = err.replace 'Error: ', ''\n                    saveButton.addClass 'red'\n                    saveButton.html t 'error'\n                    alertMsg.html \"#{t(err)}\"\n                    alertMsg.show()\n                else\n                    saveButton.removeClass 'red'\n                    saveButton.addClass 'green'\n                    saveButton.html t 'saved'\n                    alertMsg.hide()\n                    if fieldName is 'locale'\n                        alert t 'changing locale requires reload'\n                        window.location.reload()\n                    setTimeout ->\n                        window.location.reload() if fieldName is 'locale'\n                    , 1000\n\n\n        saveButton.click saveFunction\n        saveFunction\n\n\n    # Fetch data from backend and fill form with collected data.\n    # Then set all listeners: listen to keyup for each field and to click\n    # for each button.\n    fetchData: ->\n\n        userData = window.cozy_user or {}\n        @emailField.val userData.email\n        @publicNameField.val userData.public_name\n        @timezoneField.val userData.timezone\n\n        saveEmail = @getSaveFunction 'email', @emailField, 'user'\n        @emailField.on 'keyup', (event) ->\n            saveEmail() if event.keyCode is 13 or event.which is 13\n\n        savePublicName = @getSaveFunction 'public_name', \\\n                                        @publicNameField, 'user'\n        @publicNameField.on 'keyup', (event) ->\n            savePublicName() if event.keyCode is 13 or event.which is 13\n\n        saveTimezone = @getSaveFunction 'timezone', @timezoneField, 'user'\n        @timezoneField.change saveTimezone\n\n        instance = window.cozy_instance or {}\n        @instance = new Instance instance\n        domain = instance?.domain or t('no domain set')\n        locale = instance?.locale or 'en'\n\n        if not window.managed\n            saveDomain = @getSaveFunction 'domain', @domainField, 'instance'\n            @domainField.on 'keyup', (event) ->\n                saveDomain() if event.keyCode is 13 or event.which is 13\n        @domainField.val domain\n\n        saveLocale = @getSaveFunction 'locale', @localeField, 'instance'\n        @localeField.change saveLocale\n        @localeField.val locale\n\n        # Don't know why password fields can't be configured too early...\n        @password0Field = @$('#account-password0-field')\n        @password1Field = @$('#account-password1-field')\n        @password2Field = @$('#account-password2-field')\n        @password0Field.keyup (event) =>\n            if event.keyCode is 13 or event.which is 13\n                @password1Field.focus()\n        @password1Field.keyup (event) =>\n            if event.keyCode is 13 or event.which is 13\n                @password2Field.focus()\n        @password2Field.keyup (event) =>\n            if event.keyCode is 13 or event.which is 13\n                @onNewPasswordSubmit()\n\n        # Two-factor authentication\n        if userData.authType\n            @twoFactorForm.hide()\n            @twoFactorInfo.show()\n            @twoFactorStrategy.html t '2fa strategy ' + userData.authType\n            tokensStr = ''\n            try\n                codes = JSON.parse(userData.encryptedRecoveryCodes)\n                tokensStr = codes.join(', ')\n            catch err\n                tokensStr = t \"error problem 2fa codes\"\n            @twoFactorRecToken.html tokensStr\n            # If HOTP is enabled, show the conter reset panel\n            if userData.authType is 'hotp'\n                @twoFactorResetForm.show()\n                @twoFactorYubikeyBlock.show()\n            # Retrieve 2FA token, display it and generate a QR code from it\n            @getUserToken (err, token, key) =>\n                if err\n                    console.error err\n                else if token\n                    @twoFactorToken.html token\n                    @twoFactorRawKey.html key\n                    # Retrieve the QR Code data URL and fill the img tag's\n                    # src attribute with it\n                    data = qr.toDataURL\n                        mime: 'image/png'\n                        size: 10\n                        level: 'H'\n                        value: @get2faQRCodeString userData, token\n                    @twoFactorQrCode.attr 'src', data\n                else\n                    @twoFactorToken.html t 'cant find token'\n        else\n            # No 2FA strategy enabled, we just display the activation panel\n            @twoFactorForm.show()\n            @twoFactorInfo.hide()\n            @twoFactorField = @$('#account-2fa-field')\n\n\n    # When add background button is clicked, it displays the photo selector\n    # modal. From the selector result it sends a multipart form to the server.\n    # That way the background can saved. Once it's done the background is\n    # added to the available background list.\n    onAddBackgroundClicked: ->\n        params =\n            type: 'singlePhoto'\n            defaultTab: 'photoUpload'\n\n        new ObjectPicker params, (newPhotoChosen, dataUrl) =>\n\n            if dataUrl?\n                @backgroundAddButton.spin true\n                binary = atob dataUrl.split(',')[1]\n                array = []\n                array.push binary.charCodeAt i for i in [0..binary.length]\n                blob = new Blob [new Uint8Array(array)], type: 'image/jpeg'\n\n                form = new FormData()\n                form.append 'picture', blob\n                $.ajax\n                    type: \"POST\"\n                    url: \"/api/backgrounds\"\n                    data: form\n                    contentType: false\n                    processData: false\n                    success: (data) =>\n                        background = new Background data\n                        @backgroundList.collection.add background\n                        @backgroundList.select background\n\n                    error: -> alert t 'account background added error'\n                    complete: => @backgroundAddButton.spin false\n\n\n    # When background is changed, data are saved and a backgroundChanged event\n    # is emitted. That way the main view can be notified.\n    onBackgroundChanged: (model) =>\n        data = background: model.get('id')\n        @instance.saveData data, (err) ->\n            if err\n                alert t 'account background saved error'\n            else\n                Backbone.Mediator.pub 'backgroundChanged', data.background\n","ViewCollection = require 'lib/view_collection'\nBackgroundListItem = require 'views/background_list_item'\nBackgroundCollection = require 'collections/background'\n\n\n\n# View to manage the list of available background in the account view.\nmodule.exports = class BackgroundList extends ViewCollection\n\n    itemView: BackgroundListItem\n    template: require 'templates/background_list'\n    collection: new BackgroundCollection\n    events: {}\n\n\n    # Init collection with default values.\n    # Add a change listener to mark the selected background as selected\n    # and remove the selection from others.\n    afterRender: ->\n        @collection.init()\n\n        @collection.on 'change', (changedModel) =>\n            @collection.map (model) =>\n                if changedModel.cid isnt model.cid\n                    model.set {'selected': false}, {silent: true}\n                    @views[model.cid].$el.removeClass 'selected'\n\n\n    # Select given background (and fire select events).\n    select: (background) ->\n        @views[background.cid].$el.click()\n\n\n    # Override to put official background first.\n    appendView: (view) ->\n        if view.model.get 'predefined'\n            @$el.prepend view.el\n        else\n            @$el.append view.el\n","BaseView = require 'lib/base_view'\n\n\n# Row displaying application name and attributes\nmodule.exports = class BackgroundListItem extends BaseView\n    className: \"mod w33 left background-button\"\n    tagName: \"div\"\n    template: require 'templates/background_list_item'\n    events:\n        'click .delete-background-button': 'onDeleteClicked'\n        'click': 'onClicked'\n\n\n    getRenderData: ->\n        model:\n            src: @model.getThumbSrc()\n\n\n    afterRender: ->\n        @deleteButton = @$ '.delete-background-button'\n        @deleteButton.hide() if @model.get 'predefined'\n        @model.on 'change', =>\n            @$el.addClass 'selected' if @model.get 'selected'\n\n\n    # When item is clicked it is marked as selected.\n    onClicked: ->\n        @model.set 'selected', true\n\n\n    # When delete button is clicked, the model is deleted remotely and the\n    # current background item is removed from DOM.\n    onDeleteClicked: ->\n        @deleteButton.spin true\n        @model.destroy()\n\n","BaseView = require 'lib/base_view'\nColorButton = require 'widgets/install_button'\nPopoverDescriptionView = require 'views/popover_description'\n\n\n# Row displaying application name and attributes\nmodule.exports = class ApplicationRow extends BaseView\n    className: \"config-application\"\n    tagName: \"div\"\n    template: require 'templates/config_application'\n\n    getRenderData: ->\n        gitName = @model.get('git')\n        gitName = gitName.replace(/\\.git$/, '') if gitName?\n        website = @model.get('website') or gitName\n        branch  = @model.get('branch') or 'master'\n        app: _.extend {}, @model.attributes,\n            website: website,\n            branch: branch,\n            websiteUrl: if branch is 'master' then website \\\n                else \"#{website}/tree/#{branch}\"\n\n    events:\n        \"click .remove-app\": \"onRemoveClicked\"\n        \"click .update-app\": \"onUpdateClicked\"\n        \"click .start-stop-btn\": \"onStartStopClicked\"\n        \"click .app-stoppable\": \"onStoppableClicked\"\n        \"click .favorite\": \"onFavoriteClicked\"\n\n    ### Constructor ####\n\n    constructor: (options) ->\n        @id = \"app-btn-#{options.model.id}\"\n        super\n\n\n    initialize: ->\n        # only re-render when 'version' changes, because it's the only displayed\n        # field that can change during the update\n        @listenTo @model, 'change:version', @render\n\n\n    afterRender: =>\n        @updateButton = new ColorButton @$ \".update-app\"\n        @removeButton = new ColorButton @$ \".remove-app\"\n        @startStopBtn = new ColorButton @$ \".start-stop-btn\"\n        @stateLabel = @$ '.state-label'\n        @updateIcon = @$ '.update-notification-icon'\n        @appStoppable  = @$ \".app-stoppable\"\n        @updateLabel = @$ \".to-update-label\"\n\n        @listenTo @model, 'change', @onAppChanged\n        @onAppChanged @model\n\n        @setIcon()\n\n\n    # Build icon from model information (depending of icon format and model\n    # name).\n    setIcon: ->\n\n        @setIconSrc()\n\n        slug = @model.get 'slug'\n        color = @model.get 'color'\n        unless color?\n            color = hashColor = ColorHash.getColor slug, 'cozy'\n            # By default, look for the color in the market.\n            # color = @inMarket?.get('color') or hashColor\n        @color = color\n        @$('.icon-container img').css 'background', color\n\n\n    setIconSrc: ->\n        @icon = @$ '.icon'\n        if @model.isIconSvg()\n            extension = 'svg'\n            @icon.addClass 'svg'\n        else\n            extension = 'png'\n            @icon.removeClass 'svg'\n\n        if @model.get('state') is 'broken'\n            @hideLoading()\n            @icon.attr 'src', \"img/broken.svg\"\n        else if @model.get('state') isnt 'installing'\n            @hideLoading()\n            src = \"api/applications/#{@model.get 'slug'}.#{extension}\"\n            @icon.attr 'src', src\n        else\n            @showLoading()\n            @icon.attr 'src', \"img/broken.svg\"\n\n\n    ### Listener ###\n\n    # When an app document changed, the UI is updated accordingly.\n    onAppChanged: (app) =>\n        switch @model.get 'state'\n            when 'broken'\n                @stateLabel.show().text t 'broken'\n                @removeButton.displayGrey t 'remove'\n                @updateButton.displayGrey t 'retry to install'\n                @appStoppable.hide()\n                @appStoppable.next().hide()\n                @startStopBtn.hide()\n            when 'installed'\n                @stateLabel.show().text t 'started'\n                @removeButton.displayGrey t 'remove'\n                @updateButton.displayGrey t 'update'\n                @appStoppable.show()\n                @appStoppable.next().show()\n                @startStopBtn.show()\n                @startStopBtn.button.attr title: t('stop this app')\n                @startStopBtn.button.removeClass('stopped')\n            when 'installing'\n                @stateLabel.show().text t 'installing'\n                @removeButton.displayGrey t 'abort'\n                @updateButton.hide()\n                @appStoppable.hide()\n                @appStoppable.next().hide()\n                @startStopBtn.hide()\n            when 'stopped'\n                @stateLabel.show().text t 'stopped'\n                @removeButton.displayGrey t 'remove'\n                @updateButton.displayGrey t 'update'\n                @appStoppable.hide()\n                @appStoppable.next().hide()\n                @startStopBtn.show()\n                @startStopBtn.button.attr title: t('start this app')\n                @startStopBtn.button.addClass('stopped')\n\n        @setIconSrc()\n\n        @updateIcon.toggle @model.get 'needsUpdate'\n        if (not @model.get(\"branch\")? or (@model.get('branch') is 'master')) and\n            not(@model.get('needsUpdate'))\n                @$(\".update-app\").hide()\n\n        bool = @model.get 'isStoppable'\n        @$('.app-stoppable').attr 'checked', bool\n\n\n    onStoppableClicked: (event) =>\n        bool = not @model.get('isStoppable')\n        @model.save {isStoppable: bool},\n            success: => @$('.app-stoppable').attr 'checked', bool\n            error: =>\n                @$('.app-stoppable').attr 'checked', !bool\n\n\n    onRemoveClicked: (event) =>\n        event.preventDefault()\n        @removeButton.spin true\n        @stateLabel.html t 'removing'\n\n        @model.uninstall\n            success: =>\n                @remove()\n                Backbone.Mediator.pub 'app-state:changed',\n                    status: 'uninstalled'\n                    updated: false\n                    slug: @model.get 'slug'\n            error: =>\n                @removeButton.displayRed t \"retry to install\"\n                Backbone.Mediator.pub 'app-state:changed',\n                    status: 'uninstalled'\n                    updated: false\n                    slug: @model.get 'slug'\n\n\n    onUpdateClicked: (event) =>\n        event.preventDefault()\n        @openPopover()\n\n\n    openPopover: ->\n        @popover.hide() if @popover?\n\n        @popover = new PopoverDescriptionView\n            model: @model\n            label: t 'update'\n            confirm: (application) =>\n                $('#no-app-message').hide()\n                @popover.hide()\n                @popover.remove()\n                @updateApp()\n            cancel: (application) =>\n                @popover.hide()\n                @popover.remove()\n        $(\"#config-applications-view\").append @popover.$el\n        @popover.show()\n\n    onStartStopClicked: (event) =>\n        event.preventDefault()\n        @startStopBtn.spin true\n        if(@model.isRunning())\n            @model.stop\n                success: =>\n                    @startStopBtn.spin false\n                    @stateLabel.html t 'stopped'\n                    Backbone.Mediator.pub 'app-state:changed',\n                        status: 'stopped'\n                        updated: false\n                        slug: @model.get 'slug'\n                error: =>\n                    @startStopBtn.spin false\n\n        else\n            @model.start\n                success: =>\n                    @startStopBtn.spin false\n                    @stateLabel.html t 'started'\n                    Backbone.Mediator.pub 'app-state:changed',\n                        status: 'started'\n                        updated: false\n                        slug: @model.get 'slug'\n                    window.location.href = \"#apps/#{@model.get('slug')}\"\n                error: =>\n                    @startStopBtn.spin false\n                    @stateLabel.html t 'stopped'\n                    Backbone.Mediator.pub 'app-state:changed',\n                        status: 'stopped'\n                        updated: false\n                        slug: @model.get 'slug'\n                    msg = 'This app cannot start.'\n                    errormsg = @model.get 'errormsg'\n                    msg += \" Error was : #{errormsg}\" if errormsg\n                    alert msg\n\n    remove: =>\n        return super unless @model.get('state') is 'installed'\n        @removeButton.spin false\n        @removeButton.displayGreen t \"removed\"\n        setTimeout =>\n            @$el.fadeOut =>\n                super\n        , 1000\n\n    updateApp: ->\n        @updateButton.spin true\n\n        if @model.get('state') isnt 'broken'\n            @stateLabel.html t 'updating'\n            Backbone.Mediator.pub 'app-state:changed',\n                status: 'updating'\n                updated: true\n                slug: @model.get 'slug'\n\n        else\n            @stateLabel.html t 'installing'\n            Backbone.Mediator.pub 'app-state:changed',\n                status: 'installing'\n                updated: false\n                slug: @model.get 'slug'\n\n        @model.updateApp\n            success: =>\n                @updateButton.displayGreen t \"updated\"\n                @updateButton.spin false\n                if @model.get('state') is 'installed'\n                    @stateLabel.html t 'started'\n                if @model.get('state') is 'stopped'\n                    @stateLabel.html t 'stopped'\n                Backbone.Mediator.pub 'app-state:changed',\n                        status: 'started'\n                        updated: true\n                        slug: @model.get 'slug'\n                setTimeout =>\n                    @updateButton.hide()\n                    @updateLabel.hide()\n                , 1000\n\n            error: (jqXHR) =>\n                @updateButton.spin false\n                alert t 'update error'\n                @stateLabel.html t 'broken'\n                @updateButton.displayRed t \"update failed\"\n                Backbone.Mediator.pub 'app-state:changed',\n                    status: 'broken'\n                    updated: false\n                    slug: @model.get 'slug'\n\n\n    # When favorite button is clicked, the favorite flag is toggled.\n    # A event is published, that way the home view can refresh and display\n    # the application as a favorite.\n    onFavoriteClicked: =>\n        @model.set 'favorite', not @model.get 'favorite'\n        @model.save()\n        Backbone.Mediator.pub 'app:changed:favorite', @model\n        @render()\n\n\n    showLoading: =>\n        @icon.hide()\n        @$('.spinner').show()\n\n\n    hideLoading: ->\n        @$('.spinner').hide()\n        @icon.show()\n","ViewCollection = require 'lib/view_collection'\nApplicationRow = require 'views/config_application'\nPopoverDescriptionView = require 'views/popover_description'\nApplicationsList = require '../collections/application'\n\nmodule.exports = class ApplicationsListView extends ViewCollection\n    id: 'config-application-list'\n    tagName: 'div'\n\n    template: require 'templates/config_application_list'\n    itemView: require 'views/config_application'\n\n    events:\n        # Delegate app's onlick event to a custom launcher\n        \"click .app\": \"launchApp\"\n\n    itemViewOptions: (model) ->\n        app = @market.get model.get('slug')\n        # By default, apps are 'community contribution'.\n        # Used for \"install from Git\"\n        comment = if app? then app.get('comment') else 'community contribution'\n        model.set 'comment', comment\n\n    constructor: (apps, market) ->\n        @apps = apps\n        @market = market\n        super collection: @apps\n\n\n    afterRender: =>\n        @appList = @$ \"#app-list\"\n        @apps.sort()\n\n\n    appendView: (view) ->\n        if @$el.is ':empty'\n            @$el.append view.el\n        else\n            views = _.values @views\n            sortedViews = _.sortBy views, (view) ->\n                if view?.model?.get('displayName')?\n                    return view.model.get('displayName').toLowerCase()\n                else\n                    return 'unknown'\n            index = _.indexOf(sortedViews, view) - 1\n            if index >= 0\n                previous = @$el.find \".config-application:eq(#{index})\"\n                view.$el.insertAfter previous\n            else\n                next = @$el.find \".config-application:eq(#{index + 1})\"\n                view.$el.insertBefore next\n\n\n    openUpdatePopover: (slug) ->\n        appToUpdateView = null\n        cids = Object.keys @views\n        i = 0\n        while cids[i]? and not appToUpdateView?\n            view = @views[cids[i]]\n            if view.model.get('slug') is slug\n                appToUpdateView = view\n            i++\n\n        if appToUpdateView?\n            appToUpdateView.openPopover()\n        else\n            alert t('error update uninstalled app')\n\n\n    # App's Launcher\n    #\n    # Instead of simply following the link in the markup, we test if the device\n    # is a smallscreen one (so probably a mobile), and then force opening the\n    # app in a new tab instead of an hosted iframe to prevent some issues like\n    # scrolls on mobile touch devices in iframe.\n    launchApp: (e) ->\n        e.preventDefault()\n\n        dest = e.currentTarget.getAttribute('href').slice(1)\n\n        # if ctrl or middle click or small device\n        if e.which is 2 or e.ctrlKey or e.metaKey or $(window).width() <= 640\n            window.open dest, \"_blank\"\n        else if e.which is 1 # left click\n            window.app.routers.main.navigate dest, true\n","request = require 'lib/request'\nBaseView = require 'lib/base_view'\nColorButton = require 'widgets/install_button'\nApplication = require 'models/application'\nStackApplication = require 'models/stack_application'\nConfigApplicationList = require './config_application_list'\nConfigDeviceList = require './config_device_list'\nUpdateStackModal = require './update_stack_modal'\nAppsCollection = require '../collections/application'\n\n\nmodule.exports = class ConfigApplicationsView extends BaseView\n    id: 'config-applications-view'\n    template: require 'templates/config_applications'\n\n    subscriptions:\n        'app-state:changed': 'onAppStateChanged'\n\n    events:\n        \"click .update-all\"        : \"onUpdateClicked\"\n        \"click .reboot-stack\"      : \"onRebootStackClicked\"\n\n\n    constructor: (@apps, @devices, @stackApps, @market) ->\n        @listenTo @devices, 'reset', @displayDevices\n        @listenTo @stackApps, 'reset', @displayStackVersion\n        super()\n\n\n    afterRender: ->\n        @spanRefresh = @$ '.refresh'\n        @spanRefresh.hide()\n\n        @memoryFree = @$ '.memory-free'\n        @diskSpace = @$ '.disk-space'\n        @updateBtn = @$ '.update-all'\n        @rebootStackBtn = @$ '.reboot-stack'\n\n        @fetch()\n\n        @applicationList = new ConfigApplicationList @apps, @market\n        @deviceList = new ConfigDeviceList @devices\n        @$el.find('.title-app').after @applicationList.$el\n        @applications = new Application()\n\n        @stackApps.fetch reset: true\n\n        @displayDevices()\n\n        @stackApplications = new StackApplication\n        @showOrHideUpdateBtn()\n\n\n    # Display update button when there is an application that requires to be\n    # updated or when a stack component needs to be updated.\n    showOrHideUpdateBtn: ->\n        appNeedUpdate = @apps.where(needsUpdate: true).length > 0\n\n        # FIXME: there may be a bug server side\n        # application are setted as updated\n        # when they are not\n\n        if @toUpdate or appNeedUpdate\n            @updateBtn.show()\n            @updateBtn.removeAttr 'disable'\n        else\n            @updateBtn.hide()\n            @updateBtn.attr 'disable', true\n\n\n    openUpdatePopover: (slug) ->\n        @applicationList.openUpdatePopover slug\n\n\n    displayStackVersion: =>\n        @toUpdate = false\n        for app in @stackApps.models\n            @$(\".#{app.get 'name'}\").html app.get 'version'\n            currentVersion = app.get('version').split('.')\n            lastVersion = app.get('lastVersion') or '0.0.0'\n            newVersion = lastVersion.split('.')\n\n            if parseInt(currentVersion[2]) < parseInt(newVersion[2])\n                @$(\".#{app.get 'name'}\").css 'font-weight', \"bold\"\n                @$(\".#{app.get 'name'}\").css 'color', \"Orange\"\n                @toUpdate = true\n\n            if parseInt(currentVersion[1]) < parseInt(newVersion[1])\n                @$(\".#{app.get 'name'}\").css 'font-weight', \"bold\"\n                @$(\".#{app.get 'name'}\").css 'color', \"OrangeRed\"\n                @toUpdate = true\n\n            if parseInt(currentVersion[0]) < parseInt(newVersion[0])\n                @$(\".#{app.get 'name'}\").css 'font-weight', \"bold\"\n                @$(\".#{app.get 'name'}\").css 'color', \"Red\"\n                @toUpdate = true\n\n        @showOrHideUpdateBtn()\n\n\n    displayDevices: =>\n        if not(@devices.length is 0)\n            @$el.find('.no-device').after @deviceList.$el\n        else\n            @$el.find('.no-device p').before \"<p>#{t 'status no device'}</p>\"\n\n    fetch: =>\n        @$('.amount').html \"--\"\n        @$('.total').html \"--\"\n        request.get 'api/sys-data', (err, data) =>\n\n            if err\n                alert t 'Server error occured, infos cannot be displayed.'\n\n            else\n                diskUsed  = @toGigabytes data.usedDiskSpace, data.usedUnit\n                diskTotal = @toGigabytes data.totalDiskSpace, data.totalUnit\n                @displayMemory data.freeMem, data.totalMem\n                @displayDiskSpace diskUsed, diskTotal\n\n    toGigabytes: (value, unit) ->\n        switch unit\n            when 'T' then value * 1000;\n            when 'G' then value;\n            when 'M' then value / 1000;\n            else 0\n\n\n    displayMemory: (amount, total) ->\n        @memoryFree.find('.amount').html Math.floor((total - amount) / 1000)\n        @memoryFree.find('.total').html Math.floor(total / 1000)\n\n\n    displayDiskSpace: (amount, total) ->\n        @diskSpace.find('.amount').html \"#{amount} \"\n        @diskSpace.find('.total').html \"#{total} \"\n\n\n    onAppStateChanged: ->\n        setTimeout @fetch, 10000\n\n\n    # When update stack button is clicked,\n    # the update stack dialog is displayed.\n    # Disabled button while updating\n    # not to launch several time the same request\n    onUpdateClicked: (event) ->\n        unless !!(isDisabled = @updateBtn.attr 'disable')\n            @updateBtn.attr 'disable', true\n            @showUpdateStackDialog()\n\n\n    # Show the dialog to allow the user to update his stack.\n    showUpdateStackDialog: ->\n        @popover.remove() if @popover?\n\n        @popover = new UpdateStackModal\n            confirm: (model) =>\n                @runFullUpdate (err, changes) =>\n                    if err\n                        @popover.onError err, changes\n                    else\n                        @popover.onSuccess changes\n\n            cancel: (model) =>\n                @popover.remove()\n                @render()\n\n        $(\"#config-applications-view\").append @popover.$el\n        @popover.show()\n\n\n    # When update stack button is clicked, two procedures are runned\n    # sequentially:\n    #\n    # * Update of all applications.\n    # * Update of the Cozy stack.\n    #\n    # Both are handled on the server side, the client makes only two different\n    # calls to the API.\n    runFullUpdate: (callback) =>\n        Backbone.Mediator.pub 'update-stack:start'\n\n        @applications.updateAll (err, changes) =>\n            return callback err, err.data?.changes if err\n\n            @stackApplications.updateStack (err) =>\n                Backbone.Mediator.pub 'update-stack:end'\n                callback err, changes\n\n\n    # When the reboot button is clicked, the reboot procedure is requested to\n    # the server and a loading spinner is displayed.\n    onRebootStackClicked: ->\n        @rebootStackBtn.spin true\n        @stackApplications.rebootStack (err) =>\n            if err\n                alert t 'reboot stack error'\n                @rebootStackBtn.spin false\n            else\n                location.reload()\n","BaseView = require 'lib/base_view'\n\n# Row displaying device name and attributes\nmodule.exports = class DeviceRow extends BaseView\n    className: \"config-device\"\n    tagName: \"div\"\n    template: require 'templates/config_device'\n\n    events:\n        'click .remove-device': 'onRemoveClicked'\n\n    getRenderData: ->\n        device: @model.attributes\n\n    constructor: (options) ->\n        @model = options.model\n        @id = \"device-btn-#{options.model.id}\"\n        super\n\n    onRemoveClicked: (event) ->\n        if window.confirm t 'revoke device confirmation message'\n            $(event.currentTarget).spin true\n            $.ajax(\"/api/devices/#{@model.get('id')}\",\n                type: \"DELETE\"\n                success: =>\n                    @$el.fadeOut ->\n                error: =>\n                    @$('.remove-device').html t 'revoke device access'\n                    console.log \"error while revoking the device access\"\n            )\n","ViewCollection = require 'lib/view_collection'\nDeviceRow = require 'views/config_device'\n\n\nmodule.exports = class DevicesListView extends ViewCollection\n    id: 'config-device-list'\n    tagName: 'div'\n    template: require 'templates/config_device_list'\n    itemView: require 'views/config_device'\n\n\n    constructor: (devices) ->\n        @devices = devices\n        super collection: devices\n\n\n    afterRender: =>\n        @deviceList = @$ \"#device-list\"\n\n","BaseView = require 'lib/base_view'\n\nmodule.exports = class ErrorModal extends BaseView\n    id: 'market-popover-description-view'\n    className: 'modal md-modal md-effect-1'\n    tagName: 'div'\n    template: require 'templates/error_modal'\n\n    events:\n        'click #more':'onMore'\n        'click #ok':'onConfirm'\n        'click #cancelbtn':'onClose'\n\n    initialize: (options) ->\n        @errortype = options.errortype\n        @details = options.details\n        @confirmCallback = options.onConfirm or ->\n        @ok = options.confirm or t('ok')\n        @cancel = options.cancel or false\n        super\n        $('body').keyup(@onKeyStroke)\n\n    getRenderData: ->\n        errortype: @errortype\n        details: @details\n        ok: @ok\n        cancel: @cancel\n\n    afterRender: ->\n        @overlay = $ '.md-overlay'\n        @overlay.click => @hide()\n        @$('.details').hide()\n        @body = @$ \".md-body\"\n\n    handleContentHeight: ->\n        @body.css 'max-height', \"#{$(window).height() / 2}px\"\n        $(window).on 'resize', =>\n            @body.css 'max-height', \"#{$(window).height() / 2}px\"\n\n    show: ->\n        @$el.addClass 'md-show'\n        @overlay.addClass 'md-show'\n        $('#home-content').addClass 'md-open'\n        setTimeout =>\n            @$('.md-content').addClass 'md-show'\n        , 300\n\n    hide: ->\n        $('.md-content').fadeOut =>\n            @overlay.removeClass 'md-show'\n            @$el.removeClass 'md-show'\n            @remove()\n        $('#home-content').removeClass 'md-open'\n\n    onConfirm: ->\n        @hide()\n        @confirmCallback()\n\n    onClose: ->\n        @hide()\n\n    onKeyStroke: (e) =>\n        e.stopPropagation()\n        if e.which in [13, 27]\n            @onClose()\n\n    onMore: ->\n        if @$('.details').css('display') is 'none'\n            @$('.details').show()\n        else\n            @$('.details').hide()\n","BaseView = require 'lib/base_view'\nrequest = require 'lib/request'\n\n\n# View that displays:\n# * available links to find support.\n# * a widget to send a message easily to the cozy support email.\nmodule.exports = class exports.HelpView extends BaseView\n    el: '#help-menu'\n    template: require 'templates/help'\n\n    events:\n        'click #send-message-button': 'onSendMessageClicked'\n\n\n    afterRender: ->\n        @sendMessageButton = @$ '#send-message-button'\n        @sendMessageInput = @$ '#send-message-textarea'\n        @alertMessageError = @$ '#send-message-error'\n        @alertMessageSuccess = @$ '#send-message-success'\n        @configureHelpUrl()\n        @$el.hide()\n\n\n    # If a special help url is defined at the instance level, it's the one used\n    # for it.\n    configureHelpUrl: ->\n        helpUrl = window.app.instance?.helpUrl\n        if helpUrl?\n            template = require 'templates/help_url'\n            @$el.find('.help-section:last').prepend template helpUrl: helpUrl\n\n\n    # When send message is clicked, the content of the message textarea is\n    # send to the server. That way he can send an email to the Cozy support\n    # team.\n    # It grabs the send logs checkbox state and add this as parameter of the\n    # server request. That way, the server knows if it must add the logs to the\n    # sent message.\n    onSendMessageClicked: =>\n        @alertMessageError.hide()\n        @alertMessageSuccess.hide()\n\n        messageText = @sendMessageInput.val()\n        sendLogs = @$('#send-message-logs').is(':checked')\n        if messageText.length > 0\n            @sendMessageButton.spin true\n            request.post \"help/message\", {messageText, sendLogs}, (err) =>\n                @sendMessageButton.spin false\n                if err\n                    @alertMessageError.show()\n                else\n                    @alertMessageSuccess.show()\n\n    toggle: ->\n        if @$el.is ':visible'\n            @$el.hide()\n        else\n            $('.right-menu').hide()\n            @$el.show()\n","ViewCollection = require 'lib/view_collection'\n\n# View describing main screen for user once he is logged\nmodule.exports = class ApplicationsListView extends ViewCollection\n    id: 'applications-view'\n    template: require 'templates/home'\n    itemView: require 'views/home_application'\n\n    subscriptions:\n        'app:changed:favorite': 'render'\n\n\n    ### Constructor ###\n\n\n    constructor: (apps, market) ->\n        @apps = apps\n        @market = market\n        @state = 'view'\n        @isLoading = true\n        @itemViewOptions = => market: @market\n        super collection: apps\n\n\n    initialize: =>\n        @listenTo @collection, 'request', => @isLoading = true\n        @listenTo @collection, 'reset', => @isLoading = false\n        # do not use listenTo because it prevents market view to listen to\n        # the event too.\n        @collection.on 'remove', @onAppRemoved\n\n        super\n\n\n    afterRender: =>\n        @$(\"#no-app-message\").hide()\n        $(\".menu-btn a\").click (event) ->\n            $(\".menu-btn\").removeClass 'active'\n            $(event.target).closest('.menu-btn').addClass 'active'\n\n        super\n\n\n    checkIfEmpty: ->\n        noapps = @apps.size() is 0 and not @isLoading\n        @$(\"#no-app-message\").toggle noapps\n\n\n    appendView: (view) ->\n        sectionName = view.model.getSection()\n        section = @$ \"section#apps-#{sectionName}\"\n        section_apps= @$ \"section#apps-#{sectionName} .application-container\"\n        if view.id is \"app-btn-konnectors\"\n            # my Apps is the second app in the plateform apps list\n            myApps_app =\n                @$ \"#apps-platform .application-container div:nth-child(2)\"\n            myApps_app.after(view.$el)\n        else\n            section_apps.append view.$el\n        section.addClass 'show'\n        section.show()\n\n\n    # Hide section if there is no more application displayed.\n    onAppRemoved: (model) =>\n        sectionName = model.getSection()\n        section = @$ \"section#apps-#{sectionName}\"\n        if section.find('.application-container').children().length is 1\n            section.hide()\n","BaseView = require 'lib/base_view'\nColorButton = require 'widgets/install_button'\nModal = require './error_modal'\n\n\n# Row displaying application name and attributes\nmodule.exports = class ApplicationRow extends BaseView\n    className: \"application w360-33 w640-25 full-20\"\n    tagName: \"div\"\n\n    template: require 'templates/home_application'\n\n    getRenderData: ->\n        app: @model.attributes\n\n    events:\n        \"mouseup .application-inner\": \"onAppClicked\"\n\n\n    constructor: (options) ->\n        @id = \"app-btn-#{options.model.id}\"\n        @enabled = true\n        super\n        @inMarket = options.market.findWhere slug: @model.get('slug')\n\n\n    afterRender: =>\n        @icon = @$ 'img.icon'\n        @title = @$ '.app-title'\n        @background = @$ 'img'\n\n        @listenTo @model, 'change', @onAppChanged\n        @listenTo @model, 'uninstall', @onUninstall\n        @onAppChanged()\n\n        @setBackgroundColor()\n\n        # Only set a background color for SVG icons\n        if @model.isIconSvg()\n            # if there is no set color, we use an auto-generated one\n            @icon.addClass 'svg'\n\n\n    ### Listener ###\n\n\n    onAppChanged: ->\n        switch @model.get 'state'\n            when 'broken'\n                @hideSpinner()\n                @icon.attr 'src', \"img/broken.svg\"\n\n            when 'installed'\n                @hideSpinner()\n                @setBackgroundColor()\n                if @model.isIconSvg()\n                    extension = 'svg'\n                    @icon.addClass 'svg'\n                else\n                    extension = 'png'\n                    @icon.removeClass 'svg'\n\n                src = \"api/applications/#{@model.id}.#{extension}\"\n                @icon.attr 'src', src\n                @icon.show()\n                @icon.removeClass 'stopped'\n\n                if @model.previous('state') isnt 'stopped'\n                    $(\"##{@model.get 'slug'}-frame\").remove()\n\n            when 'installing'\n                @showSpinner()\n                @setBackgroundColor()\n\n            when 'stopped'\n\n                if @model.isIconSvg()\n                    extension = 'svg'\n                    @icon.addClass 'svg'\n                else\n                    extension = 'png'\n                    @icon.removeClass 'svg'\n\n                @icon.attr 'src', \"api/applications/#{@model.id}.#{extension}\"\n                @icon.addClass 'stopped'\n                @hideSpinner()\n\n\n    onUninstall: =>\n        @$el.addClass 'uninstalling'\n        @showSpinner()\n        $(\"##{@model.get 'slug'}-frame\").remove()\n        @enabled = false\n\n\n    onAppClicked: (event) =>\n        event.preventDefault()\n        return null unless @enabled\n        switch @model.get 'state'\n            when 'broken'\n                errortype = ''\n                errorcode = @model.get 'errorcode'\n                if errorcode?\n                    switch errorcode[0]\n                        when '1' then msg += '\\n' + t('error user linux')\n                        when '2'\n                            errortype = t('error git')\n                            switch errorcode[1]\n                                when '0'\n                                    errortype += '\\n' + t('error github repo')\n                                when '1'\n                                    errortype += '\\n' + t('error github')\n                        when '3' then errortype = t('error npm')\n                        when '4' then errortype = t('error start')\n                errormsg = @model.get 'errormsg'\n                modalOptions =\n                    title: 'Broken application'\n                    errortype: errortype\n                    details: errormsg\n                if errorcode? and errorcode[0] is '4'\n                    modalOptions.confirm = t('start this app')\n                    modalOptions.cancel = t('cancel')\n                    modalOptions.onConfirm = @startApp\n                modal = new Modal modalOptions\n                $(\"##{@id}\").append modal.$el\n                modal.show()\n            when 'installed'\n                @launchApp(event)\n            when 'installing'\n                alert t 'state app installing'\n            when 'stopped'\n                @startApp(event)\n\n\n    ### Functions ###\n\n    startApp: (event) =>\n        @showSpinner()\n        @model.start\n            success: =>\n                @launchApp(event)\n                @hideSpinner()\n            error: =>\n                @hideSpinner()\n                msg = t 'state app stopped error'\n                errormsg = @model.get 'errormsg'\n                msg += \" : #{errormsg}\" if errormsg\n                alert msg\n\n    launchApp: (event) =>\n        # if ctrl or middle click or small device\n        if event.which is 2 or event.ctrlKey or event.metaKey or $(window).width() <= 640\n            window.open \"apps/#{@model.id}/\", \"_blank\"\n        else if event.which is 1 # left click\n            window.app.routers.main.navigate \"apps/#{@model.id}/\", true\n\n\n    setBackgroundColor: ->\n        slug = @model.get 'slug'\n        color = @model.get 'color'\n        unless color?\n            hashColor = ColorHash.getColor slug, 'cozy'\n\n            # By default, look for the color in the market.\n            color = @inMarket?.get('color') or hashColor\n\n            @color = color\n        @background.css 'background-color', color\n\n\n    showSpinner: =>\n        @icon.hide()\n        @$('.spinner').show()\n\n\n    hideSpinner: ->\n        @$('.spinner').hide()\n        @icon.show()\n","Photo  = require '../models/photo'\n\n################################################################################\n# -- USAGE --\n#\n#   # creation :\n#       longList = new LongList(viewPortElement)\n#       doActions() ...\n#\n#   # if the the viewPortElement is not initialy attached in the DOM, then call\n#   resizeHandler when the viewPortElement is attached :\n#       longList.resizeHandler()\n#\n#   # if we want to anticipate the loading of the thumbs before we attach the\n#   list inf the dom, we can give the size that will be available for list with:\n#       longList.setInitialDimensions(pan.clientWidth, pan.clientHeight)\n#\n#   # when the geometry of the parent :\n#       longList.resizeHandler()\n#\n#\n# -- SEMANTIC & CONVENTIONS --\n#\n# 1/ syntax\n#   . a variable name ending with a '$' is a reference to a node in the DOM\n#   . in a variable name, \"Rk\" means \"rank\"\n#   . in a variable name, Pt means \"Pointer\". The safe zone is define by a\n#     start pointer and an end pointer, themselves defined\n#     by a rank, y monthRk and inMonthRk\n#\n#\n# 2/ @months\n#   [ {nPhotos:45, month:\"201503\"}, ... ]\n# array of all the months having a photo.\n# months.length = number of months having a photo\n# months[n] = {\n#   nPhotos : number of photo of this month\n#   month   : string, the month, format : \"201503\"\n#   label$  : element in the DOM in the header of the month\n#   nRows   : number of rows in the month\n#   height  : in px\n#   y       : y from the top of the thumbs container (@thumbs$), in px\n#   yBottom : in px\n#   firstRk : integer, rank of the first photo of the month\n#   lastRk  : integer, rank of the last  photo of the month\n# }\n#\n#\n# 3/ @nPhotos\n#   Total number of images in the long list.\n#\n#\n# 4/ \"rank\"\n#   all images are indexed by their rank being their position in the ordered\n#   list of images.\n#   The most recent image rank is 0, the oldest rank is nPhoto - 1\n#\n#\n# 5/ inMonthRank\n#   The rank of the image in the chronological list of images of the same month\n#\n#\n# 6/ buffer :\n#\n#   The buffer lists all the created thumbs, keep a reference on the first (top\n#   most) and the last (bottom most) cells.\n#   The data structure of the buffer is a closed double linked chain.\n#   Each element of the chain is a \"thumb\" with a previous (prev) and next\n#   (next) element.\n#   \"closed\" means that buffer.last.prev == buffer.first\n#\n#   data structure :\n#      first   : {thumb}   # top most thumb\n#      firstRk : {integer} # rank of the first image of the buffer\n#      last    : {thumb}   # bottom most thumb\n#      lastRk  : {integer} # rank of the last image of the buffer\n#      nThumbs : {integer} # number of thumbs in the buffer\n#      # the following data are the coordonates of the thumb that would be just\n#      # after the last of the buffer.\n#      nextLastRk      : {integer}\n#      nextLastCol     : {integer}\n#      nextLastY       : {integer}\n#      nextLastMonthRk : {integer}\n#      # the following data are the coordonates of the thumb that would be just\n#      # before the last of the buffer.\n#      nextFirstCol     : {integer}\n#      nextFirstMonthRk : {integer}\n#      nextFirstRk      : {integer}\n#      nextFirstY       : {integer}\n#\n#\n# 7/ thumb\n#      prev    : {thumb}   # previous thumb in the buffer : older, lower\n#                            in the list\n#      next    : {thumb}   # next thumb in the buffer : more recent, higher\n#                            in the list\n#      el      : {thumb$}  # element in the DOM of the thumb\n#      rank    : {integer} # rank of the corresponding image\n#      monthRk : monthRk\n#      id      : {integer} # id of the corresponding image\n#   Element of the buffer, keeps a reference (el) to the thumb element inserted\n#   in the DOM.\n#\n#\n# 8/ safeZone\n#   A range of thumbs starting before the viewport and going after. The number\n#   of thumbs before and after the viewport depends of SAFE_ZONE_COEF.\n#   The safe zone is computed by _adaptBuffer\n#   data structure :\n#      firstCol             : {integer}\n#      firstInMonthRow      : {integer}\n#      firstMonthRk         : {integer}\n#      firstRk              : {integer}\n#      firstThumbRkToUpdate : {integer}\n#      firstThumbToUpdate   : {thumb}\n#      firstVisibleRk       : {integer}\n#      firstY               : {integer}\n#      lastRk               : {integer}\n#      endCol               : {integer}\n#      endMonthRk           : {integer}\n#      endY                 : {integer}\n#\n#\n################################################################################\n\n\n################################################################################\n## CONSTANTS ##\n#\n# minimum duration between two refresh of the buffer (_adaptBuffer)\nTHROTTLE            = 450\n# minimum duration between two refresh of the index (_adaptIndex)\nTHROTTLE_INDEX      = 300\n# n = max number of viewport height by seconds\nMAX_SPEED           = 1.5 * THROTTLE / 1000\n# number of \"screens\" before and after the viewport in the buffer.\n# (ex : 1.5 => 1+2*1.5=4 screens always ready)\nBUFFER_COEF         = 3\n# number of \"screens\" before and after the viewport corresponding to\n# the safe zone. The Safe Zone is the rows where viewport can go\n# without trigering the movement of the buffer.\n# ! !  Must be smaller than BUFFER_COEF  ! !\nSAFE_ZONE_COEF      = 2\n# unit used for the dimensions (px,em or rem)\nTHUMB_DIM_UNIT      = 'em'\n# space between 2 months\nMONTH_HEADER_HEIGHT = 2.5\n# padding in pixels between thumbs\nCELL_PADDING        = 0.6\n# guess :-)\nTHUMB_HEIGHT        = 10\n# height from top of the month to the top of the month label\nMONTH_LABEL_TOP     = 0.8\n\n\n\n\nmodule.exports = class LongList\n\n################################################################################\n## PUBLIC SECTION ##\n#\n    constructor: (@externalViewPort$, @modal) ->\n        ####\n        # init state\n        @selected = {} # selected.photoID = thumb = {rank, id,name,thumbEl}\n        ####\n        # get elements (name ends with '$')\n        @viewPort$ = document.createElement('div')\n        @viewPort$.classList.add('viewport')\n        @externalViewPort$.appendChild(@viewPort$)\n        @thumbs$   = document.createElement('div')\n        @thumbs$.classList.add('thumbs')\n        @viewPort$.appendChild(@thumbs$)\n        @index$    = document.createElement('div')\n        @index$.classList.add('long-list-index')\n        @externalViewPort$.appendChild(@index$)\n        ####\n        # set position\n        @viewPort$.style.position = 'relative'\n        @index$.style.position    = 'absolute'\n        @index$.style.top         = 0\n        @index$.style.bottom      = 0\n        @index$.style.right       = @_getScrollBarWidth()+'px'\n        ####\n        # keep track of the last selected column during navigation with keyboard\n        @_lastSelectedCol = null\n        ####\n        # Get from the server the array of distribution of the photos and then\n        # adapt the buffer to the initial geometry\n        @isInited = @isPhotoArrayLoaded = false\n        Photo.getMonthdistribution (error, res) =>\n            @isPhotoArrayLoaded = true\n            @months  = res\n            @_DOM_controlerInit()\n            return true\n\n\n    ###*\n     * To compute the geometry we mus know the the width and height of the\n     * externalViewPort$.\n     * This is possible only if this element is inserted in the DOM of we give\n     * the dimension that will be available with the following function.\n     * @param {Integer} width  in px of the externalViewPort$ when it will be\n     *                  inserted\n     * @param {Integer} heigth in px of the externalViewPort$ when it will be\n     *                  inserted\n    ###\n    setInitialDimensions : (width, heigth)->\n        @initialWidth  = width\n        @initialHeight = heigth\n        @_resizeHandler()\n\n\n    ###*\n     * returns the selected \"file\", ie the same document as in Couch\n     * {id, name, path, lastModification, binary, class, docType, mime,\n     * creationDate, size, tags}\n    ###\n    getSelectedFile : () =>\n        for k, thumb$ of @.selected\n            if thumb$\n                return thumb$.file\n        return null\n\n\n    ###*\n     * There is an event delegation, so the parent (externalViewPort$ or above)\n     * are in charge of listening and transmitting the event with this function.\n     * @param  {Event} e Event\n    ###\n    keyHandler : (e)->\n        switch e.which\n            when 39 # right key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectNextThumb()\n            when 37 # left key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectPreviousThumb()\n            when 38 # up key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectThumbUp()\n            when 40 # down key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectThumbDown()\n            when 36 # start line key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectStartLineThumb()\n            when 35 # end line key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectEndLineThumb()\n            when 34 # page down key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectPageDownThumb()\n            when 33 # page up key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectPageUpThumb()\n            else\n                return false\n        return\n\n\n    ###*\n     * Must be called when the goemetry of the parent (externalViewPort$) of the\n     * long list changes.\n    ###\n    resizeHandler: () ->\n        # will be defined during _DOM_controlerInit, when we get the\n        # distribution array of photos.\n        # If it is called too early, don't do anything, a resizeHandler call\n        # will occur when the distribution array will arrive.\n\n\n\n################################################################################\n## PRIVATE SECTION ##\n\n\n    ###*\n     * This is the main procedure. Its scope contains all the functions used to\n     * update the buffer and the shared variables between those functions. This\n     * approach has been chosen for performance reasons (acces to scope\n     * variables faster than to nested properties of objects). It's not an\n     * obvious choice.\n     * Called only when we get from the server the month distribution\n     * (Photo.getMonthdistribution)\n    ###\n    _DOM_controlerInit: () ->\n\n        #######################\n        # global variables\n        months                 = @months\n        buffer                 = null\n        previousWidth          = null\n        bufferAlreadyAdapted   = false\n        cellPadding            = null\n        monthHeaderHeight      = null\n        monthTopPadding        = null\n        marginLeft             = null\n        thumbWidth             = null\n        thumbHeight            = null\n        colWidth               = null\n        rowHeight              = null\n        nThumbsPerRow          = null\n        nRowsInSafeZoneMargin  = null\n        nThumbsInSafeZone      = null\n        nThumbsInBufferMargin  = null\n        nThumbsInBuffer        = null\n        viewPortHeight         = null\n        indexHeight            = null\n        indexVisible           = null\n        currentIndexRkSelected = 0\n        thumbs$Height          = null\n        monthLabelTop          = null\n        lastOnScroll_Y         = null\n        current_scrollTop      = null\n        safeZone =\n            firstRk              : null\n            firstMonthRk         : null\n            firstInMonthRow      : null\n            firstCol             : null\n            firstVisibleRk       : null\n            firstY               : null\n            lastRk               : null\n            endCol               : null\n            endMonthRk           : null\n            endY                 : null\n            firstThumbToUpdate   : null\n            firstThumbRkToUpdate : null\n\n        # should the first thumb be selected right after instanciation ? (could\n        # be an option)\n        isDefaultToSelect = true\n\n\n\n        ###*\n         * called after a scroll, will launch _adaptBuffer and _adaptIndex\n         * (both throttled)\n        ###\n        _scrollHandler = (e) =>\n            if @noScrollScheduled\n                lastOnScroll_Y = @viewPort$.scrollTop\n                setTimeout(_adaptBuffer,THROTTLE)\n                @noScrollScheduled = false\n            if @noIndexScrollScheduled\n                setTimeout(_adaptIndex,THROTTLE_INDEX)\n                @noIndexScrollScheduled = false\n            if !indexVisible\n                @index$.classList.add('visible')\n                indexVisible = true\n\n        @_scrollHandler = _scrollHandler\n\n\n\n        ###*\n         * called once for all during _DOM_controlerInit\n         * computes the static parameters of the geometry\n        ###\n        _getStaticDimensions = () =>\n            thumbHeight       = _getDimInPixels(THUMB_HEIGHT)\n            cellPadding       = _getDimInPixels(CELL_PADDING)\n            @thumbHeight      = thumbHeight\n            thumbWidth        = thumbHeight\n            colWidth          = thumbWidth  + cellPadding\n            rowHeight         = thumbHeight + cellPadding\n            monthHeaderHeight = _getDimInPixels(MONTH_HEADER_HEIGHT)\n            monthTopPadding   = monthHeaderHeight + cellPadding\n            monthLabelTop     = _getDimInPixels(MONTH_LABEL_TOP)\n            @monthLabelTop    = monthLabelTop\n\n\n\n        ###*\n         * returns the font-size in px of a given element (context) or of the\n         * root element of the document if no context is provided.\n         * @param  {element} context Optionnal: an elemment to get the font-size\n         * @return {integer}         the font-size\n        ###\n        _getElementFontSize=( context )->\n            # Returns a number\n            return parseFloat(\n                # of the computed font-size, so in px\n                    # for the given context\n                    # or the root <html> element\n                getComputedStyle( context or document.documentElement ).fontSize\n            )\n\n\n\n        _remToPixels=(value)->\n            return _emToPixels(value)\n\n\n\n        _emToPixels=(value, context)->\n            return Math.round(value * _getElementFontSize(context))\n\n\n\n        _getDimInPixels = (value)=>\n            switch THUMB_DIM_UNIT\n                when 'px'\n                    return value\n                when 'em'\n                    return _emToPixels(value, @viewPort$)\n                when 'rem'\n                    return _remToPixels(value)\n\n\n\n        ###*\n         * Compute all the geometry after a resize or when the list in inserted\n         * in the DOM.\n         * _adaptBuffer will be executed at the end except if\n         *     1- the distribution array of photo has not been received.\n         *     2- the geometry could not be computed (for instance if the width\n         *     of the list is null when the list is not visible)\n        ###\n        _resizeHandler= ()=>\n            if !@isPhotoArrayLoaded\n                return\n            ##\n            # 1/ GET DIMENSIONS.\n            # It is possible only when the longList is inserted into the DOM,\n            # that's why we had to wait for _init() which occurs after both\n            # the reception # of the array of photo and after the parent view\n            # has launched init().\n            viewPortHeight = @viewPort$.clientHeight\n            VP_width       = @viewPort$.clientWidth\n            # the list has no width or height : geometry can not be computed\n            # except if some initial width and height has been given\n            if VP_width <= 0 || viewPortHeight <= 0\n                if @initialWidth and @initialHeight\n                    VP_width       = @initialWidth\n                    viewPortHeight = @initialHeight\n                else\n                    return false\n            # if the width of viewport has not change, we can directly adapt\n            # buffer\n            if VP_width == previousWidth\n                _adaptBuffer()\n                return\n            previousWidth  = VP_width\n            # compute thumbs per row & margin\n            nThumbsPerRow  = Math.floor((VP_width-cellPadding)/colWidth)\n            @nThumbsPerRow = nThumbsPerRow\n            marginLeft = cellPadding +                                         \\\n                         Math.round(                                           \\\n                           (VP_width - nThumbsPerRow*colWidth - cellPadding)/2 \\\n                         )\n            # compute the safe zone margin\n            nRowsInViewPort       = Math.ceil(viewPortHeight/rowHeight)\n            nRowsInSafeZoneMargin = Math.round(SAFE_ZONE_COEF * nRowsInViewPort)\n            nThumbsInSZ_Margin    = nRowsInSafeZoneMargin * nThumbsPerRow\n            nThumbsInViewPort     = nRowsInViewPort * nThumbsPerRow\n            nThumbsInSafeZone     = nThumbsInSZ_Margin*2 + nThumbsInViewPort\n            # compute the buffer margin\n            nRowsInBufferMargin   = Math.round(BUFFER_COEF * nRowsInViewPort)\n            nThumbsInBufferMargin = nRowsInBufferMargin * nThumbsPerRow\n            nThumbsInBuffer       = nThumbsInViewPort + 2*nThumbsInBufferMargin\n            ##\n            # 2/ COMPUTE THE PROPERTIES OF EACH MONTH\n            nextY   = 0\n            nPhotos = 0\n            minMonthHeight  = Infinity\n            minMonthNphotos = Infinity\n            for month in @months\n                nPhotosInMonth     = month.nPhotos\n                month.nRows        = Math.ceil(nPhotosInMonth / nThumbsPerRow)\n                month.height       = monthTopPadding + month.nRows*rowHeight\n                month.y            = nextY\n                month.yBottom      = nextY + month.height\n                month.firstRk      = nPhotos\n                month.lastRk       = nPhotos + nPhotosInMonth - 1\n                month.lastThumbCol = (nPhotosInMonth-1) % nThumbsPerRow\n                month.date         = moment(month.month,'YYYYMM')\n                nextY   += month.height\n                nPhotos += nPhotosInMonth\n                minMonthHeight  = Math.min(minMonthHeight,month.height)\n                minMonthNphotos = Math.min(minMonthNphotos,month.nPhotos)\n            @nPhotos = nPhotos\n            thumbs$Height = nextY\n            @thumbs$.style.setProperty('height', thumbs$Height + 'px')\n            ##\n            # 3/ POSITION INDEX\n            MONTH_LABEL_HEIGHT = 27 # TODO : should be computed live, not static\n            minimumIndexHeight = @months.length * MONTH_LABEL_HEIGHT\n            if minimumIndexHeight*1.3 <= viewPortHeight\n                indexHeight = viewPortHeight\n            else\n                indexHeight = 1.5*minimumIndexHeight\n            y = 0\n            c = indexHeight - @months.length * MONTH_LABEL_HEIGHT\n            d = nPhotos - minMonthNphotos * @months.length\n            for month, rk in @months\n                txt = month.date.format('MMM YYYY')\n                h = c * (month.nPhotos - minMonthNphotos)\n                h = h / d\n                h += MONTH_LABEL_HEIGHT\n                y += h\n                div = \"<div style='height:#{h}px; right:0px'>#{txt}</div>\"\n                label$ = $(div)[0]\n                label$.dataset.monthRk = rk\n                @index$.appendChild(label$)\n            ##\n            # the first call of _resizeHandler it is not necessary to\n            # positionnate the thumbs. After the first call, the thumbs are\n            # always repositionated\n            if bufferAlreadyAdapted\n                _rePositionThumbs()\n                _adaptBuffer()\n            bufferAlreadyAdapted = true\n\n        @resizeHandler = _resizeHandler\n\n\n\n        ###*\n         * Initialize the buffer.\n         * The buffer lists all the created thumbs, keep a reference on the\n         * first (top most) and the last (bottom most) thumb.\n         * The buffer is a closed double linked chain.\n         * Each element of the chain is a \"thumb\" with a previous (prev) and\n         * next (next) element.\n         * \"closed\" means that buffer.last.prev == buffer.first\n         * data structure : see the beginning of this file.\n        ###\n        _initBuffer = ()=>\n            nToCreate = Math.min(@nPhotos, nThumbsInBuffer)\n            firstCreatedThb = {}\n            previousCreatedThb = firstCreatedThb\n            rowY     = monthTopPadding\n            col      = 0\n            monthRk  = 0\n            month    = @months[0]\n            localRk  = 0\n            # loop to create the thumbs\n            for rk in [0..nToCreate-1] by 1\n                if localRk == 0 then _insertMonthLabel(month)\n                thumbImg$ = document.createElement('img')\n                thumb$ = document.createElement('div')\n                thumb$.appendChild(thumbImg$)\n                thumb$.setAttribute('class', 'long-list-thumb thumb')\n                thumb$.style.height = thumbHeight + 'px'\n                thumb$.style.width  = thumbHeight + 'px'\n                thumb =\n                    prev : null\n                    next : previousCreatedThb\n                    el   : thumb$\n                    rank : rk\n                    monthRk : monthRk\n                    id   : null\n                previousCreatedThb.prev = thumb\n                previousCreatedThb = thumb\n                thumb$.style.cssText = \"\"\"\n                    top:#{rowY}px;\n                    left:#{marginLeft + col*colWidth}px;\n                    height:#{thumbHeight}px;\n                    width:#{thumbHeight}px;\n                \"\"\"\n                @thumbs$.appendChild(thumb$)\n                localRk += 1\n                if localRk == month.nPhotos\n                    # jump to a new month\n                    monthRk += 1\n                    month    = @months[monthRk]\n                    localRk  = 0\n                    col      = 0\n                    rowY    += rowHeight + monthTopPadding\n                else\n                    # go to next column or to a new row if we are at last column\n                    col  += 1\n                    if col is nThumbsPerRow\n                        rowY += rowHeight\n                        col   = 0\n            # create the buffer\n            buffer =\n                    first   : firstCreatedThb.prev  # top most thumb\n                    firstRk : 0           # rank of the first imge of the buffer\n                    last    : thumb       # bottom most thumb\n                    lastRk  : nToCreate-1 # rank of the last image of the buffer\n                    nThumbs :  1          # number of thumbs in the buffer\n                    # the following data are the coordonates of the thumb that\n                    # would be just after the last of the buffer.\n                    nextLastRk      : null\n                    nextLastCol     : null\n                    nextLastY       : null\n                    nextLastMonthRk : null\n                    # the following data are the coordonates of the thumb that\n                    # would be just before the last of the buffer.\n                    nextFirstCol     : null\n                    nextFirstMonthRk : null\n                    nextFirstRk      : null\n                    nextFirstY       : null\n            buffer.first.next = buffer.last\n            buffer.last.prev  = buffer.first\n            @buffer = buffer\n            safeZone.firstThumbToUpdate = buffer.first\n            # request the photo documents from server\n            Photo.listFromFiles 0, nToCreate, (error, res) ->\n                if error\n                    console.error error\n                _updateThumb(res.files, res.firstRank)\n\n\n\n        ###*\n         * called by onscroll (throttled), adapt the position of the index (top)\n         * according to the new scroll position\n        ###\n        _adaptIndex = () =>\n            y = @viewPort$.scrollTop\n            H = thumbs$Height\n            vph = viewPortHeight\n            C =  (H - vph) / (indexHeight - vph)\n            td_a = Math.round( (vph*C-vph) / 2)\n            td_b = H - td_a - vph\n            C_bis = (indexHeight - vph) / (td_b - td_a)\n            if td_b < td_a\n                td_a = Math.round((H-vph)/2)\n                td_b = td_a\n            if td_a < y and y < td_b\n                @index$.style.top = - Math.round(C_bis*(y-td_a)) + 'px'\n                return\n            if y < td_a\n                @index$.style.top = 0\n            if td_b < y\n                @index$.style.top = - (indexHeight - vph) + 'px'\n\n\n\n        ###*\n         * modify the apperence of the index label corresponding of the first\n         * month displayed in the viewPort\n        ###\n        _selectCurrentIndex = (monthRk) =>\n            @index$.children[currentIndexRkSelected].classList.remove('current')\n            @index$.children[monthRk].classList.add('current')\n            currentIndexRkSelected = monthRk\n\n        ###*\n         * will hide the index 2s after its last call\n        ###\n        lazyHideIndex =  _.debounce () =>\n            @index$.classList.remove('visible')\n            indexVisible = false\n        , 2000\n\n\n\n        ###*\n         * Adapt the buffer when the viewport has moved.\n         * Launched at init and by _scrollHandler\n        ###\n        _adaptBuffer = () =>\n            @noScrollScheduled      = true\n            @noIndexScrollScheduled = true\n            lazyHideIndex()\n\n            # test speed, if too high, relaunch a _scrollHandler\n            current_scrollTop = @viewPort$.scrollTop\n            speed = Math.abs(current_scrollTop - lastOnScroll_Y) / viewPortHeight\n            if speed > MAX_SPEED\n                _scrollHandler()\n                return\n\n            bufr = buffer\n            # re init safeZone but keep a reference on the\n            # previous firstThumbToUpdate and firstThumbRkToUpdate\n            safeZone.firstRk              = null\n            safeZone.firstMonthRk         = null\n            safeZone.firstInMonthRow      = null\n            safeZone.firstCol             = null\n            safeZone.firstVisibleRk       = null\n            safeZone.firstY               = null\n            safeZone.lastRk               = null\n            safeZone.endCol               = null\n            safeZone.endMonthRk           = null\n            safeZone.endY                 = null\n            previous_firstThumbToUpdate   = safeZone.firstThumbToUpdate\n            safeZone.firstThumbToUpdate   = null\n            safeZone.firstThumbRkToUpdate = null\n\n            _computeSafeZone()\n\n            if safeZone.lastRk > bufr.lastRk\n                # 1/ the safeZone is going down and the bottom of the safeZone\n                # is bellow the bottom of the buffer\n                #\n                # nToMove = number of thumbs to move from the top of the\n                # buffer in order to fill its bottom\n                nToMove = \\\n                    Math.min(safeZone.lastRk - bufr.lastRk, nThumbsInSafeZone)\n                if safeZone.firstRk <= bufr.lastRk\n                    # part of the buffer is in the safe zone : add thumbs after\n                    # the last thumb of the buffer\n                    _getBufferNextLast()\n                    targetRk      = bufr.nextLastRk\n                    targetMonthRk = bufr.nextLastMonthRk\n                    targetCol     = bufr.nextLastCol\n                    targetY       = bufr.nextLastY\n\n                else\n                    # the safeZone is completely bellow the buffer : add thumbs\n                    # bellow the top of the safeZone.\n                    targetRk      = safeZone.firstRk\n                    targetMonthRk = safeZone.firstMonthRk\n                    targetCol     = safeZone.firstCol\n                    targetY       = safeZone.firstY\n\n                if nToMove > 0\n                    Photo.listFromFiles targetRk, nToMove, (error, res) ->\n                        _updateThumb(res.files, res.firstRank)\n                    _moveBufferToBottom( nToMove        ,\n                                          targetRk      ,\n                                          targetCol     ,\n                                          targetY       ,\n                                          targetMonthRk  )\n\n            else if safeZone.firstRk < bufr.firstRk\n                # 2/ the safeZone is going up and the top of the safeZone is\n                # above the buffer\n                #\n                # nToMove = number of thumbs to move by reusing thumbs from the\n                # bottom of the buffer in order to fill its top\n                nToMove = Math.min(bufr.firstRk - safeZone.firstRk, nThumbsInSafeZone)\n\n                if safeZone.lastRk >= bufr.firstRk\n                    # part of the buffer is in the safe zone : add thumbs above\n                    # the first thumb of the buffer\n                    _getBufferNextFirst()\n                    targetRk      = bufr.nextFirstRk\n                    targetMonthRk = bufr.nextFirstMonthRk\n                    targetCol     = bufr.nextFirstCol\n                    targetY       = bufr.nextFirstY\n\n                else\n                    # the safeZone is completely above the buffer : add thumbs\n                    # above the bottom of the safeZone.\n                    targetRk      = safeZone.lastRk\n                    targetCol     = safeZone.endCol\n                    targetMonthRk = safeZone.endMonthRk\n                    targetY       = safeZone.endY\n\n                if nToMove > 0\n                    Photo.listFromFiles targetRk - nToMove + 1 , nToMove, \\\n                      (error, res) ->\n                        if error\n                            console.error error\n                        _updateThumb(res.files, res.firstRank)\n                    _moveBufferToTop( nToMove       ,\n                                      targetRk      ,\n                                      targetCol     ,\n                                      targetY       ,\n                                      targetMonthRk  )\n            if !nToMove?\n                # The buffer was inside the safe zone, there was no modification\n                # of the buffer\n                safeZone.firstThumbToUpdate   = previous_firstThumbToUpdate\n\n\n        _rePositionThumbs = () =>\n            bufr      = buffer\n            thumb     = bufr.first\n            thumb$    = thumb.el\n            monthRk   = thumb.monthRk\n            scrollTop = @viewPort$.scrollTop\n\n            month   = months[monthRk]\n            startRk = thumb.rank\n            localRk = startRk - monthRk\n            row     = Math.floor(localRk / nThumbsPerRow)\n            rowY    = month.y + monthTopPadding + row * rowHeight\n            col      = localRk % nThumbsPerRow\n\n            firstVisibleThumb = null\n            lastLast          = bufr.last\n            for rk in [0..buffer.nThumbs-1] by 1\n                if localRk == 0 then _insertMonthLabel(month)\n                if !firstVisibleThumb and parseInt(thumb.el.style.top)>scrollTop\n                    # keep info on the first visible thumb in order to adjust\n                    # viewport.scrollTop in order to keep this thum on the same\n                    # line\n                    firstVisibleThumb=\n                        top : parseInt(thumb.el.style.top)\n                        el  : thumb.el\n                style        = thumb.el.style\n                style.top    = rowY + 'px'\n                style.left   = (marginLeft + col*colWidth) + 'px'\n                localRk += 1\n                if localRk == month.nPhotos\n                    # jump to a new month\n                    monthRk += 1\n                    month    = months[monthRk]\n                    localRk  = 0\n                    col      = 0\n                    rowY    += rowHeight + monthTopPadding\n                else\n                    # go to next column or to a new row if we are at last column\n                    col  += 1\n                    if col is nThumbsPerRow\n                        rowY += rowHeight\n                        col   = 0\n                thumb = thumb.prev\n            if firstVisibleThumb\n                # move viewPort in order to keep the same area visible after\n                # having moved the thumbs\n                deltaTop =   firstVisibleThumb.top   \\\n                           - parseInt(firstVisibleThumb.el.style.top)\n                @viewPort$.scrollTop -= deltaTop\n\n\n        ###*\n         * Called when we get from the server the ids of the thumbs that have\n         * been created or moved\n         * @param  {Array} files     [{id},..,{id}] in chronological order\n         * @param  {Integer} fstFileRk The rank of the first file of files\n        ###\n        _updateThumb = (files, fstFileRk)=>\n            lstFileRk = fstFileRk + files.length - 1\n            bufr      = buffer\n            thumb     = bufr.first\n            firstThumbToUpdate   = safeZone.firstThumbToUpdate\n            firstThumbRkToUpdate = firstThumbToUpdate.rank\n            last  = bufr.last\n            first = bufr.first\n            ##\n            # 1/ if firstThumbRkToUpdate is not in the files range (can happen\n            # if the safeZone has been updated while waiting for the list of\n            # files from the server), then move firstThumbRkToUpdate to the\n            # thumb corresponding to first or last file of files.\n            if firstThumbRkToUpdate < fstFileRk\n                th = firstThumbToUpdate.prev\n                while true\n                    if th == bufr.first\n                        return\n                    if th.rank == fstFileRk\n                        firstThumbToUpdate   = th\n                        firstThumbRkToUpdate = th.rank\n                        break\n                    th = th.prev\n            if lstFileRk < firstThumbRkToUpdate\n                th = firstThumbToUpdate.next\n                while true\n                    if th == bufr.last\n                        return\n                    if th.rank == lstFileRk\n                        firstThumbToUpdate   = th\n                        firstThumbRkToUpdate = th.rank\n                        break\n                    th = th.next\n            ##\n            # 2/ update src of thumbs that are after the firstThumbRkToUpdate\n            thumb = firstThumbToUpdate\n            for file_i in [firstThumbRkToUpdate-fstFileRk..files.length-1] by 1\n                file                         = files[file_i]\n                fileId                       = file.id\n                thumb$                       = thumb.el\n                thumb$.file                  = file\n                thumb$.firstElementChild.src = \\\n                    \"files/photo/thumbs/#{fileId}.jpg\"\n                # thumb$.src                 = \\\n                #   'files/photo/thumbs/fast/#{fileId}'\n                thumb$.dataset.id            = fileId\n                thumb.id                     = fileId\n                thumb                        = thumb.prev\n                if @.selected[fileId]\n                    thumb$.setAttribute('aria-selected', true)\n                    @selected[fileId] = thumb$\n                else\n                    thumb$.setAttribute('aria-selected', false)\n            ##\n            # 3/ update src of thumbs that are before the firstThumbRkToUpdate\n            thumb = firstThumbToUpdate.next\n            for file_i in [firstThumbRkToUpdate-fstFileRk-1..0] by -1\n                file   = files[file_i]\n                fileId = file.id\n                thumb$            = thumb.el\n                thumb$.file       = file\n                thumb$.src        = \"files/photo/thumbs/#{fileId}.jpg\"\n                # thumb$.src        = \"files/photo/thumbs/fast/#{fileId}\"\n                thumb$.dataset.id = fileId\n                thumb.id          = fileId\n                thumb             = thumb.next\n                if @selected[fileId]\n                    thumb$.setAttribute('aria-selected', true)\n                    @selected[fileId] = thumb$\n                else\n                    thumb$.setAttribute('aria-selected', false)\n            ##\n            # 3/ default selection management : can not be done before the id of\n            # the first thumb is given by the server, that's why it is done here\n            if isDefaultToSelect\n                @_toggleOnThumb$(bufr.first.el)\n                isDefaultToSelect = false\n\n\n        _getBufferNextFirst = () ->\n            bufr = buffer\n            nextFirstRk     = bufr.firstRk - 1\n            if nextFirstRk == -1\n                return\n            bufr.nextFirstRk     = nextFirstRk\n\n            initMonthRk = safeZone.endMonthRk\n            for monthRk in [initMonthRk..0] by -1\n                month = months[monthRk]\n                if month.firstRk <= nextFirstRk\n                    break\n            bufr.nextFirstMonthRk = monthRk\n            localRk               = nextFirstRk - month.firstRk\n            inMonthRow            = Math.floor(localRk/nThumbsPerRow)\n            bufr.nextFirstY       = month.y + monthTopPadding + \\\n                                    inMonthRow*rowHeight\n            bufr.nextFirstCol     = localRk % nThumbsPerRow\n\n\n        _getBufferNextLast = ()=>\n            bufr = buffer\n            nextLastRk     = bufr.lastRk + 1\n            if nextLastRk == @nPhotos\n                return\n            bufr.nextLastRk = nextLastRk\n\n            initMonthRk = safeZone.firstMonthRk\n            for monthRk in [initMonthRk..months.length-1] by 1\n                month = months[monthRk]\n                if nextLastRk <= month.lastRk\n                    break\n            bufr.nextLastMonthRk = monthRk\n            localRk              = nextLastRk - month.firstRk\n            inMonthRow           = Math.floor(localRk/nThumbsPerRow)\n            bufr.nextLastY       = month.y + monthTopPadding + \\\n                                   inMonthRow*rowHeight\n            bufr.nextLastCol     = localRk % nThumbsPerRow\n\n        ###*\n         * after a scroll throttle, will compute the safe zone\n        ###\n        _computeSafeZone = () ->\n            # 1/ init the start of the safe zone at the start of the viewport\n            _SZ_initStartPoint()\n            # 2/ move the start of the safe zone in order to have a margin\n            _SZ_setMarginAtStart()\n            # 3/ init the end of the safe zone: start of SZ + nb of thumbs in SZ\n            hasReachedLastPhoto = _SZ_initEndPoint()\n            # 4/ if the end of SZ is at the last photo, move up the start of the\n            # SZ in order to have if possible nThumbsInSafeZone\n            if hasReachedLastPhoto\n                _SZ_bottomCase()\n\n        ###*\n         * set the start of the safe zone on the top of the viewport.\n        ###\n        _SZ_initStartPoint = ()=>\n            SZ = safeZone\n            Y  = current_scrollTop\n            for month, monthRk in @months\n                if month.yBottom > Y\n                    break\n            inMonthRow = Math.floor((Y-month.y-monthTopPadding)/rowHeight)\n            if inMonthRow < 0\n                # happens if the viewport is in the header of a month\n                inMonthRow = 0\n            SZ.firstRk            = month.firstRk + inMonthRow * nThumbsPerRow\n            SZ.firstY             = month.y + monthTopPadding + \\\n                                    inMonthRow * rowHeight\n            SZ.firstMonthRk       = monthRk\n            SZ.firstCol           = 0\n            SZ.firstThumbToUpdate = null\n            SZ.firstInMonthRow    = inMonthRow\n            SZ.firstVisibleRk     = SZ.firstRk # true because it is the init\n                                               # of SZ\n            _selectCurrentIndex(monthRk)\n\n\n        ###*\n         * move up the start of the safe zone of 'nRowsInSafeZoneMargin' rows\n         * @return {[type]} [description]\n        ###\n        _SZ_setMarginAtStart= () =>\n            SZ = safeZone\n            inMonthRow = SZ.firstInMonthRow - nRowsInSafeZoneMargin\n\n            if inMonthRow >= 0\n                # the row that we are looking for is in the current month\n                # (monthRk and col are not changed then)\n                month = @months[SZ.firstMonthRk]\n                SZ.firstRk = month.firstRk + inMonthRow * nThumbsPerRow\n                SZ.firstY  = month.y + monthTopPadding + inMonthRow*rowHeight\n                SZ.firstInMonthRow = inMonthRow\n                return\n\n            else\n                # the row that we are looking for is before the current month\n                # (col remains 0)\n                rowsSeen = SZ.firstInMonthRow\n                for j in [SZ.firstMonthRk-1..0] by -1\n                    month = @months[j]\n                    if rowsSeen + month.nRows >= nRowsInSafeZoneMargin\n                        inMonthRow         = month.nRows - \\\n                                            nRowsInSafeZoneMargin + rowsSeen\n                        SZ.firstRk         = month.firstRk + \\\n                                            inMonthRow * nThumbsPerRow\n                        SZ.firstY          = month.y + monthTopPadding + \\\n                                            inMonthRow*rowHeight\n                        SZ.firstInMonthRow = inMonthRow\n                        SZ.firstMonthRk    = j\n                        return\n\n                    else\n                        rowsSeen += month.nRows\n\n            SZ.firstRk         = 0\n            SZ.firstMonthRk    = 0\n            SZ.firstInMonthRow = 0\n            SZ.firstCol        = 0\n            SZ.firstY          = monthTopPadding\n\n\n        ###*\n         * Finds the end point of the safeZone, which is 'nThumbsInSafeZone'\n         * after the first thumb of the SZ (the number of thumb in the safe zone\n         * and in the buffer is constant)\n         * Returns true if the safeZone end pointer should be after the last\n         * thumb\n        ###\n        _SZ_initEndPoint = () =>\n            SZ = safeZone\n            lastRk = SZ.firstRk + nThumbsInSafeZone - 1\n            # 1/ check if end of safeZone should be after the last thumb\n            if lastRk >= @nPhotos\n                lastRk = @nPhotos - 1\n                safeZone.lastRk = lastRk\n                # other safeZone end info are useless (safeZone is going down)\n                return true\n            # 2/ otherwise find the month containing the last thumb of the SZ\n            for monthRk in [SZ.firstMonthRk..months.length-1]\n                month = months[monthRk]\n                if lastRk <= month.lastRk\n                    break\n            # 3/ update safeZoone data\n            inMonthRk  = lastRk - month.firstRk\n            inMonthRow = Math.floor(inMonthRk/nThumbsPerRow)\n            safeZone.lastRk     = lastRk\n            safeZone.endMonthRk = monthRk\n            safeZone.endCol     = inMonthRk % nThumbsPerRow\n            safeZone.endY       = month.y         +\n                                  monthTopPadding +\n                                  inMonthRow*rowHeight\n            return false\n\n        ###*\n         * if the safe zone is bellow the last thumb => move up the safe zone\n        ###\n        _SZ_bottomCase = ()=>\n            SZ = safeZone\n            months       = @months\n            monthRk      = months.length - 1\n            thumbsSeen   = 0\n            thumbsTarget = nThumbsInSafeZone\n            for monthRk in [monthRk..0] by -1\n                month = months[monthRk]\n                thumbsSeen += month.nPhotos\n                if thumbsSeen >= thumbsTarget\n                    break\n            if thumbsSeen < thumbsTarget\n                # happens if the number of photo is smaller than the number\n                # in safezone (nThumbsInSafeZone), it means that safe zone\n                # begins at the first photo\n                SZ.firstMonthRk    = 0\n                SZ.firstInMonthRow = 0\n                SZ.firstRk         = 0\n                SZ.firstY          = month.y + cellPadding + monthHeaderHeight\n            else\n                rk         = @nPhotos - thumbsTarget\n                inMonthRk  = rk - month.firstRk\n                inMonthRow = Math.floor(inMonthRk / nThumbsPerRow)\n\n                SZ.firstMonthRk    = monthRk\n                SZ.firstInMonthRow = inMonthRow\n                SZ.firstCol        = inMonthRk % nThumbsPerRow\n                SZ.firstRk         = rk\n                SZ.firstY          = month.y           +\n                                     cellPadding       +\n                                     monthHeaderHeight +\n                                     inMonthRow * rowHeight\n\n\n\n        _moveBufferToBottom= (nToMove, startRk, startCol, startY, monthRk)=>\n            monthRk_initial = monthRk\n            rowY    = startY\n            col     = startCol\n            month   = @months[monthRk]\n            localRk = startRk - month.firstRk\n\n            # by default the firstThumbToUpdate will be the first moved down\n            # (ie buffer.first :-)\n            if safeZone.firstThumbToUpdate == null\n                safeZone.firstThumbToUpdate = buffer.first\n\n            for rk in [startRk..startRk+nToMove-1] by 1\n                if localRk == 0\n                    _insertMonthLabel(month)\n                thumb = buffer.first\n                thumb$              = thumb.el\n                thumb$.dataset.rank = rk\n                thumb.rank          = rk\n                thumb.monthRk       = monthRk\n                thumb$.src          = ''\n                thumb$.dataset.id   = ''\n                style      = thumb$.style\n                style.top  = rowY + 'px'\n                style.left = (marginLeft + col*colWidth) + 'px'\n                # if during the move of the thumbs we meet the thumb with the\n                # firstVisibleRk, then this thumb is the firstThumbToUpdate\n                if rk == safeZone.firstVisibleRk\n                    safeZone.firstThumbToUpdate = thumb\n                buffer.last      = buffer.first\n                buffer.first     = buffer.first.prev\n                buffer.firstRk   = buffer.first.rank\n                buffer.last.rank = rk\n                localRk += 1\n                if localRk == month.nPhotos\n                    # jump to a new month\n                    monthRk += 1\n                    month    = @months[monthRk]\n                    localRk  = 0\n                    col      = 0\n                    rowY    += rowHeight + monthTopPadding\n                else\n                    # go to next column or to a new row if we are at last column\n                    col  += 1\n                    if col is nThumbsPerRow\n                        rowY += rowHeight\n                        col   = 0\n\n            buffer.lastRk  = rk - 1\n            buffer.firstRk = buffer.first.rank\n            # store the parameters of the thumb that is just after the last one\n            buffer.nextLastRk      = rk\n            buffer.nextLastCol     = col\n            buffer.nextLastY       = rowY\n            buffer.nextLastMonthRk = monthRk\n\n\n\n        _moveBufferToTop= (nToMove, startRk, startCol, startY, monthRk)=>\n            rowY    = startY\n            col     = startCol\n            month   = @months[monthRk]\n            localRk = startRk - month.firstRk\n\n            # by default the firstThumbToUpdate will be the first moved down\n            # (ie buffer.first :-)\n            if safeZone.firstThumbToUpdate == null\n                safeZone.firstThumbToUpdate = buffer.last\n\n            for rk in [startRk..startRk-nToMove+1] by -1\n                thumb               = buffer.last\n                thumb$              = thumb.el\n                thumb$.dataset.rank = rk\n                thumb.rank          = rk\n                thumb.monthRk       = monthRk\n                thumb$.src          = ''\n                thumb$.dataset.id   = ''\n                style               = thumb$.style\n                style.top           = rowY + 'px'\n                style.left          = (marginLeft + col*colWidth) + 'px'\n                # if during the move of the thumbs we meet the thumb with the\n                # firstVisibleRk, then this thumb is the firstThumbToUpdate\n                if rk == safeZone.firstVisibleRk\n                    safeZone.firstThumbToUpdate = thumb\n                buffer.first      = buffer.last\n                buffer.last       = buffer.last.next\n                buffer.lastRk     = buffer.last.rank\n                buffer.first.rank = rk\n                localRk          -= 1\n                if localRk == -1\n                    if rk == 0\n                        rk = -1\n                        break\n                    # jump to a new month\n                    _insertMonthLabel(month)\n                    monthRk -= 1\n                    month    = @months[monthRk]\n                    localRk  = month.nPhotos - 1\n                    col      = month.lastThumbCol\n                    rowY    -= cellPadding + monthHeaderHeight + rowHeight\n                else\n                    # go to next column or to a new row if we are at last column\n                    col  -= 1\n                    if col is -1\n                        rowY -= rowHeight\n                        col   = nThumbsPerRow - 1\n\n            buffer.firstRk = rk + 1\n            buffer.lastRk  = buffer.last.rank\n\n\n\n        _insertMonthLabel = (month)=>\n            if month.label$\n                label$ = month.label$\n            else\n                label$ = document.createElement('div')\n                label$.classList.add('long-list-month-label')\n                @thumbs$.appendChild(label$)\n                month.label$ = label$\n            label$.textContent = month.date.format('MMMM YYYY')\n            label$.style.top   = (month.y + monthLabelTop) + 'px'\n            label$.style.left  = Math.round(marginLeft/2) + 'px'\n\n\n\n        _indexClickHandler = (e) =>\n            monthRk = e.target.dataset.monthRk\n            if monthRk\n                @viewPort$.scrollTop = @months[monthRk].y\n                _adaptIndex()\n\n\n\n        _indexMouseEnter = () =>\n            @index$.classList.add('hardVisible')\n            indexVisible = false\n\n\n\n        _indexMouseLeave = () =>\n            @index$.classList.add('visible')\n            @index$.classList.remove('hardVisible')\n            lazyHideIndex()\n\n        ####\n        # END of _DOM_controlerInit\n        _getStaticDimensions()\n        _resizeHandler()       # compute buffer and safeZone sizes\n        _initBuffer()          # initialize the buffer\n        @noScrollScheduled      = true\n\n        ####\n        # bind events\n        @thumbs$.addEventListener(   'click'      , @_clickHandler    )\n        @thumbs$.addEventListener(   'dblclick'   , @_dblclickHandler )\n        @viewPort$.addEventListener( 'scroll'     , _scrollHandler    )\n        @index$.addEventListener(    'click'      , _indexClickHandler)\n        @index$.addEventListener(    'mouseenter' , _indexMouseEnter  )\n        @index$.addEventListener(    'mouseleave' , _indexMouseLeave  )\n\n\n\n################################################################################\n## MOUSE AND KEYBOARD EVENTS ##\n\n\n    _clickHandler: (e) =>\n        th = e.target\n        while (not th.classList.contains('thumb'))\n            th = th.parentElement\n            return if th.classList.contains('thumbs')\n\n        if !@_toggleOnThumb$(th) then return null\n        @_lastSelectedCol = @_coordonate.left(th)\n        viewPortTopY    = @viewPort$.scrollTop\n        viewPortBottomY = viewPortTopY + @viewPort$.clientHeight\n        thTopY    = @_coordonate.top(th)\n        thBottomY = thTopY + @thumbHeight\n        if viewPortBottomY < thBottomY\n            th.scrollIntoView(false)\n        if thTopY < viewPortTopY\n            th.scrollIntoView(true)\n\n\n    _dblclickHandler: (e) =>\n        th = e.target\n        while (not th.classList.contains('thumb'))\n            th = th.parentElement\n            return if th.classList.contains('thumbs')\n\n        @_toggleOnThumb$(th)\n        @_lastSelectedCol = @_coordonate.left(th)\n        @modal.onYes()\n\n\n    ###*\n     * toogles on a thumb.\n     * Returns null if the thumb is already selected or if there is no image id\n     * associated yet\n    ###\n    _toggleOnThumb$: (thumb$)->\n        # the thumb is empty (no image yet)=> we can't select it\n        if thumb$.dataset.id == ''\n            return null\n        # the thums is already selected => we can't select it again\n        if @selected[thumb$.dataset.id]\n            return null\n        # otherwise we can toggle\n        @_unselectAll()\n        thumb$.setAttribute('aria-selected', true)\n        @selected[thumb$.dataset.id] = thumb$\n\n\n    _unselectAll: () =>\n        for id, thumb$ of @selected\n            if typeof(thumb$) == 'object'\n                thumb$.setAttribute('aria-selected', false)\n                @selected[id] = false\n\n\n    _getSelectedThumb$: ()->\n        for id, thumb$ of @selected\n            if typeof(thumb$) == 'object'\n                return thumb$\n        return null\n\n\n    _selectNextThumb: ()->\n        # 1/ look for the selected thumb element\n        for id, thumb$ of @selected\n            if typeof(thumb$) == 'object'\n                break\n        # 2/ get next thumb$ and toggle\n        nextThumb$ = @_getNextThumb$(thumb$)\n        if nextThumb$ == null then return null\n        @_lastSelectedCol = @_coordonate.left(nextThumb$)\n        if !@_toggleOnThumb$(nextThumb$) then return null\n        @_moveViewportToBottomOfThumb$(nextThumb$)\n\n\n    _selectPreviousThumb: ()->\n        # 1/ look for the selected thumb element\n        thumb$ = @_getSelectedThumb$()\n        # 2/ get previous thumb$ and toggle\n        prevThumb$ = @_getPreviousThumb$(thumb$)\n        if prevThumb$ == null then return null\n        @_lastSelectedCol = @_coordonate.left(prevThumb$)\n        if !@_toggleOnThumb$(prevThumb$) then return null\n        @_moveViewportToTopOfThumb$(prevThumb$)\n\n\n    _selectThumbUp: ()->\n        thumb$ = @_getSelectedThumb$()\n        if thumb$ == null\n            return null\n        if thumb$.dataset.rank == '0'\n            return null\n        if @_lastSelectedCol == null\n            left = @_coordonate.left(thumb$)\n        else\n            left = @_lastSelectedCol\n        top  = thumb$.style.top\n        th   = @_getPreviousThumb$(thumb$)\n        if th == null then return null\n        while th.style.left != left\n            if th.dataset.rank == '0'\n                @_lastSelectedCol = @_coordonate.left(th)\n                if !@_toggleOnThumb$(th) then return null\n                @_moveViewportToTopOfThumb$(th)\n                return th\n            if th.style.top != top\n                # we changed of row, continue only if there are thumbs on the\n                # right\n                if @_coordonate.left(th) <= left\n                    if !@_toggleOnThumb$(th) then return null\n                    @_moveViewportToTopOfThumb$(th)\n                    return th\n            th = @_getPreviousThumb$(th)\n            if th == null then return null\n        if !@_toggleOnThumb$(th) then return null\n        @_moveViewportToTopOfThumb$(th)\n        return th\n\n\n    _selectThumbDown: ()->\n        thumb$ = @_getSelectedThumb$()\n        if thumb$ == null\n            return null\n        if @_coordonate.rank(thumb$) == @nPhotos - 1\n            return null\n        if @_lastSelectedCol == null\n            left = @_coordonate.left(thumb$)\n        else\n            left = @_lastSelectedCol\n        top  = thumb$.style.top\n        th   = @_getNextThumb$(thumb$)\n        if th == null then return null\n        hasAlreadyChangedOfRow = false\n        while @_coordonate.left(th) != left\n            if @_coordonate.rank(th) == @nPhotos - 1\n                @_lastSelectedCol = @_coordonate.left(th)\n                if !@_toggleOnThumb$(th) then return null\n                @_moveViewportToBottomOfThumb$(th)\n                return th\n            if th.style.top != top\n                # we changed of row, continue only if there are thumbs on the\n                # right\n                if hasAlreadyChangedOfRow\n                    th = @_getPreviousThumb$(th)\n                    if th == null then return null\n                    if !@_toggleOnThumb$(th) then return null\n                    @_moveViewportToBottomOfThumb$(th)\n                    return th\n                hasAlreadyChangedOfRow = true\n                top = th.style.top\n                if @_coordonate.left(th) >= left\n                    if !@_toggleOnThumb$(th) then return null\n                    @_moveViewportToBottomOfThumb$(th)\n                    return th\n            th = @_getNextThumb$(th)\n            if th == null then return null\n        if !@_toggleOnThumb$(th) then return null\n        @_moveViewportToBottomOfThumb$(th)\n        return th\n\n\n    _selectEndLineThumb: ()->\n        thumb$ = @_getSelectedThumb$()\n        if thumb$ == null\n            return\n        if @_coordonate.rank(thumb$) == @nPhotos - 1\n            return\n        if @_lastSelectedCol == null\n            left = @_coordonate.left(thumb$)\n        else\n            left = @_lastSelectedCol\n        top  = thumb$.style.top\n        th   = @_getNextThumb$(thumb$)\n        if th == null then return null\n        while th.style.top == top\n            if @_coordonate.rank(th) == @nPhotos - 1\n                @_lastSelectedCol = @_coordonate.left(th)\n                if !@_toggleOnThumb$(th) then return null\n                @_moveViewportToBottomOfThumb$(th)\n                return\n            th = @_getNextThumb$(th)\n            if th == null then return null\n        th = @_getPreviousThumb$(th)\n        if th == null then return null\n        @_lastSelectedCol = @_coordonate.left(th)\n        if !@_toggleOnThumb$(th) then return null\n        @_moveViewportToBottomOfThumb$(th)\n        return\n\n\n    _selectStartLineThumb: ()->\n        thumb$ = @_getSelectedThumb$()\n        if thumb$ == null\n            return\n        if Number(thumb$.dataset.rank) == 0\n            return\n        if @_lastSelectedCol == null\n            left = @_coordonate.left(thumb$)\n        else\n            left = @_lastSelectedCol\n        top = thumb$.style.top\n        th  = @_getPreviousThumb$(thumb$)\n        if th == null then return null\n        while th.style.top == top\n            if @_coordonate.rank(th) == 0\n                @_lastSelectedCol = @_coordonate.left(th)\n                if !@_toggleOnThumb$(th) then return null\n                @_moveViewportToBottomOfThumb$(th)\n                return\n            th = @_getPreviousThumb$(th)\n        th = @_getNextThumb$(th)\n        if th == null then return null\n        @_lastSelectedCol = @_coordonate.left(th)\n        if !@_toggleOnThumb$(th) then return null\n        @_moveViewportToBottomOfThumb$(th)\n        return\n\n\n    _coordonate:\n        top: (thumb$)->\n            return parseInt(thumb$.style.top, 10)\n        left: (thumb$)->\n            return parseInt(thumb$.style.left, 10)\n        rank: (thumb$)->\n            return thumb$.dataset.rank\n\n\n    _selectPageDownThumb: () ->\n        viewPortBottomY = @viewPort$.scrollTop + @viewPort$.clientHeight\n        thumb$    = @_getSelectedThumb$()\n        if thumb$ == null then return\n        th        = thumb$\n        thTopY    = @_coordonate.top(th)\n        thBottomY = thTopY + @thumbHeight\n        while thBottomY <= viewPortBottomY\n            th = @_selectThumbDown()\n            if th == null then return\n            thTopY    = @_coordonate.top(th)\n            thBottomY = thTopY + @thumbHeight\n        th.scrollIntoView(true)\n        @_moveViewportToTopOfThumb$(th)\n\n\n    _selectPageUpThumb: () ->\n        viewPortTopY = @viewPort$.scrollTop\n        thumb$ = @_getSelectedThumb$()\n        th     = thumb$\n        thTopY = @_coordonate.top(th)\n        while thTopY >= viewPortTopY\n            th = @_selectThumbUp()\n            if th == null\n                return\n            thTopY    = @_coordonate.top(th)\n        th.scrollIntoView(false)\n\n\n    _moveViewportToBottomOfThumb$: (thumb$)=>\n        thumb$Top       = @_coordonate.top(thumb$)\n        thumb$Bottom    = thumb$Top + @thumbHeight\n        viewPortBottomY = @viewPort$.scrollTop + @viewPort$.clientHeight\n        if viewPortBottomY < thumb$Bottom\n            thumb$.scrollIntoView(false)\n            @_scrollHandler()\n\n    ###*\n     * will move the viewport so that the top of the given thumb is at the top\n     * of the viewport, but only if the top of the thumb is above the viewport\n     * @param  {element} thumb$ # the thumb\n    ###\n    _moveViewportToTopOfThumb$: (thumb$)->\n        thumb$Top   = @_coordonate.top(thumb$)\n        viewPortTop = @viewPort$.scrollTop\n        # find the in month row\n        thumbRk = parseInt(thumb$.dataset.rank)\n        for month, monthRk in @months\n            if thumbRk <= month.lastRk\n                break\n        inMonthRow = Math.floor((thumbRk - month.firstRk) / @nThumbsPerRow)\n\n        if inMonthRow == 0\n            if month.y + @monthLabelTop < @viewPort$.scrollTop\n                @viewPort$.scrollTop = month.y + @monthLabelTop\n                @_scrollHandler()\n        else\n            if thumb$Top < viewPortTop\n                thumb$.scrollIntoView(true)\n                @_scrollHandler()\n                return\n\n\n\n    ###*\n     * @param  {Element} thumb$ # the element corresponding to the thumb\n     * @return {null}        # return null if on first thumb\n     * @return {Element}     # the previous element thumb or null if on first\n     *                         thumb of first of the buffer\n    ###\n    _getPreviousThumb$: (thumb$) ->\n        # 1/ check we are not on the first thumb\n        return null if thumb$.dataset.rank is '0'\n        # 2/ check we are not on the first displayed by the buffer\n        return null if thumb$ is @buffer.first.el\n        # 3/ get the previous thumb\n        th = thumb$.previousElementSibling\n        unless th?\n            # case if thumb$ is the first element => jump to the last one\n            # (what does not means it is the first displayed)\n            th = thumb$.parentNode.lastElementChild\n            # case there is only one photo\n            return null if th is thumb$\n\n        while not th.classList.contains 'thumb'\n            # case of a month label\n            th = th.previousElementSibling\n            unless th?\n                # case if thumb$ is the first element => jump to the last one\n                # (what does not means it is the first displayed)\n                th = thumb$.parentNode.lastElementChild\n                # case there is only one photo\n                return null if th is thumb$\n\n        return th\n\n    ###*\n     *\n     * @param  {Element} thumb$ # the start thumb element\n     * @return {Element|null}   # returns an element or null if on the last\n     *                            thumb or the last of the buffer\n    ###\n    _getNextThumb$: (thumb$) ->\n        # 1/ check we are not on the last thumb\n        return null if @_coordonate.rank(thumb$) is @nPhotos - 1\n        # 2/ check we are not on the last displayed by the buffer\n        return null if thumb$ is @buffer.last.el\n        # 3/ get the next thumb\n        th = thumb$.nextElementSibling\n        unless th?\n            # case if thumb$ is the last element => jump to the first one\n            # (what does not means it is the oldest displayed)\n            th = thumb$.parentNode.firstElementChild\n            # case there is only one photo\n            return null if th is thumb$\n\n        while not th.classList.contains 'thumb'\n            # case of a month label\n            th = th.nextElementSibling\n            unless th?\n                # case if thumb$ is the last element => jump to the first one\n                # (what does not means it is the oldest displayed)\n                th = thumb$.parentNode.firstElementChild\n                # case there is only one photo\n                return null if th is thumb$\n\n        return th\n\n    ###*\n     * a helper in charge of getting the width in px of the scrollbar this one\n     * appears\n    ###\n    _getScrollBarWidth : ()->\n        inner = document.createElement('p')\n        inner.style.width  = \"100%\"\n        inner.style.height = \"200px\"\n\n        outer = document.createElement('div')\n        outer.style.position   = \"absolute\"\n        outer.style.top        = \"0px\"\n        outer.style.left       = \"0px\"\n        outer.style.visibility = \"hidden\"\n        outer.style.width      = \"200px\"\n        outer.style.height     = \"150px\"\n        outer.style.overflow   = \"hidden\"\n        outer.appendChild (inner)\n\n        document.body.appendChild (outer)\n        w1 = inner.offsetWidth\n        outer.style.overflow = 'scroll'\n        w2 = inner.offsetWidth\n        if (w1 == w2)\n            w2 = outer.clientWidth\n\n        document.body.removeChild (outer)\n\n        return (w1 - w2)\n\n","BaseView               = require 'lib/base_view'\nappIframeTemplate      = require 'templates/application_iframe'\nAppCollection          = require 'collections/application'\nStackAppCollection     = require 'collections/stackApplication'\nNotificationCollection = require 'collections/notifications'\nDeviceCollection       = require 'collections/device'\nNavbarView             = require 'views/navbar'\nAccountView            = require 'views/account'\nConfigApplicationsView = require 'views/config_applications'\nMarketView             = require 'views/market'\nApplicationsListView   = require 'views/home'\nSocketListener         = require 'lib/socket_listener'\nUser                   = require 'models/user'\nIntentManager          = require 'lib/intent_manager'\nUseTracker             = require 'lib/usetracker'\n\nclient                 = require 'helpers/client'\n\n\n# View describing main screen for user once he is logged\nmodule.exports = class HomeView extends BaseView\n    el: 'body'\n\n    template: require 'templates/layout'\n\n    subscriptions:\n        'backgroundChanged': 'changeBackground'\n        'app-state:changed': 'onAppStateChanged'\n        'update-stack:start': 'onUpdateStackStart'\n        'update-stack:end': 'onUpdateStackEnd'\n\n\n    constructor: ->\n        @apps          = new AppCollection window.applications\n        @stackApps     = new StackAppCollection window.stack_applications\n        @devices       = new DeviceCollection window.devices\n        @market        = new AppCollection window.market_applications\n        @notifications = new NotificationCollection()\n        @intentManager = new IntentManager()\n        SocketListener.watch @apps\n        SocketListener.watch @notifications\n        SocketListener.watch @devices\n        @useTracker = new UseTracker()\n\n        super\n\n\n    # Initialize all views, register main widgets and ensure that currently\n    # displayed iframe is rerendered to be rendered properly after everything\n    # is loaded.\n    afterRender: =>\n        @viewModel ?= new Backbone.Model\n        @navbar = new NavbarView @apps, @notifications\n        @applicationListView = new ApplicationsListView @apps, @market\n        @configApplications = new ConfigApplicationsView(\n            @apps, @devices, @stackApps, @market)\n        @accountView = new AccountView()\n        @marketView = new MarketView @apps, @market\n\n        @frames = @$ '#app-frames'\n        @content = @$ '#content'\n        @changeBackground window.app.instance.background\n        @backButton = @$ '.back-button'\n        @backButton.hide()\n\n        $(window).resize @forceIframeRendering\n        @forceIframeRendering()\n\n\n    ### Functions ###\n\n\n    # Change the background of the content element. It builds the background\n    # image url with given value. If no param is given of default background is\n    # given, background image is removed.\n    changeBackground: (background='background_07') ->\n        if background is undefined or background is null\n            @content.css 'background_07.jpg', 'none'\n        if background is 'background-none'\n            @content.css 'background-image', 'none'\n        else\n            # It's a pre-defined background\n            if background.indexOf('background') > -1\n                name = background.replace '-', '_'\n                val = \"url('/img/backgrounds/#{name}.jpg')\"\n            else\n                val = \"url('/api/backgrounds/#{background}/picture.jpg')\"\n\n            @content.css 'background-image', val\n\n\n    # Send a logout request to server then reload current window to redirect\n    # user to automatically redirect user to login page (he's not logged\n    # anymore, so cozy proxy will do the redirection).\n    logout: (event) ->\n        if app.mainView.viewModel.get 'updatingStack'\n            alert t 'stack updating block message'\n        else\n            user = new User()\n            user.logout (err) ->\n                if err\n                    alert 'Server error occured, logout failed.'\n                else\n                    window.location = window.location.origin + '/login/'\n\n\n    displayView: (view, title) =>\n        if app.mainView.viewModel.get 'updatingStack'\n            alert t 'stack updating block message'\n        else\n\n            if title?\n                title = title.substring 6\n            else\n                title ?= t 'home'\n\n            window.document.title = \"Cozy - #{title}\"\n            $('#current-application').html title\n            @useTracker.setApp title\n\n            if view is @applicationListView\n                @backButton.hide()\n            else\n                @backButton.show()\n\n\n            displayView = =>\n                @frames.hide()\n                view.$el.hide()\n                @content.show()\n                $('#home-content').append view.$el\n                view.$el.show()\n\n                @currentView = view\n                @forceIframeRendering()\n                @content.scrollTop 0\n\n            if @currentView?\n\n                if view is @currentView\n                    @frames.hide()\n                    @content.show()\n                    @forceIframeRendering()\n                    return\n\n                @currentView.$el.hide()\n                @currentView.$el.detach()\n                displayView()\n            else\n                displayView()\n\n\n    # Display application manager page, hides app frames, active home button.\n    displayApplicationsList: =>\n        @displayView @applicationListView\n        window.document.title = t \"cozy home title\"\n\n\n    displayApplicationsListEdit: =>\n        @displayView @applicationListView, t \"cozy home title\"\n\n\n    # Display application manager page, hides app frames, active home button.\n    displayMarket: =>\n        @displayView @marketView, t \"cozy app store title\"\n\n\n    # Display account manager page, hides app frames, active account button.\n    displayAccount: =>\n        @displayView @accountView, t 'cozy account title'\n\n\n    displayConfigApplications: =>\n        @displayView @configApplications, t \"cozy applications title\"\n\n\n    displayUpdateApplication: (slug) =>\n        @displayView @configApplications, t \"cozy applications title\"\n        @navigate 'config-applications'\n\n        # When the route is called on browser loading, it must wait for\n        # apps list to be retrieved\n        method = @configApplications.openUpdatePopover\n        action = method.bind @configApplications, slug\n        timeout = null\n\n        if @apps.length is 0\n            @listenToOnce @apps, 'reset', ->\n                # stop the timeout so the action is not executed twice\n                clearTimeout timeout\n                action()\n\n            # if there is no app installed, this timeout will trigger\n            # the action\n            timeout = setTimeout action, 1500\n        else\n            # wait for 500ms before triggering the popover opening, because\n            # the configApplications view is not completely rendered yet (??)\n            setTimeout action, 500\n\n\n    displayUpdateStack: ->\n        @displayView @configApplications\n        window.document.title = t \"cozy applications title\"\n        @navigate 'config-applications'\n\n        # wait for 500ms before triggering the popover opening, because\n        # the configApplications view is not completely rendered yet (??)\n        setTimeout =>\n            @configApplications.onUpdateClicked()\n        , 500\n\n\n    # Get frame corresponding to slug if it exists, create before either.\n    # Then this frame is displayed while we hide content div and other app\n    # iframes. Then currently selected frame is registered\n    #\n    # Display a spinner if it's the first time that the application is loaded.\n    displayApplication: (slug, hash) ->\n        if app.mainView.viewModel.get 'updatingStack'\n            alert t 'stack updating block message'\n\n        else if @apps.length is 0\n            @apps.once ?= @apps.on\n            @apps.once ?= @apps.on if typeof(@apps.once) isnt 'function'\n            @apps.once 'reset', =>\n                @displayApplication slug, hash\n\n        else\n            @$(\"#app-btn-#{slug} .spinner\").show()\n            @$(\"#app-btn-#{slug} .icon\").hide()\n\n            iframeID = @getAppFrameID slug\n            frame = @$(\"##{iframeID}\")\n\n            onLoad = =>\n                # We display back the iframes\n                @frames.css 'top', '0'\n                @frames.css 'left', '0'\n                @frames.css 'position', 'inherit'\n                @frames.show()\n\n                @content.hide()\n\n                # Display global navigation\n                @backButton.show()\n\n                # Hide other applications\n                # and show current one\n                @$('#app-frames').find('iframe').hide()\n                @$(\"##{iframeID}\").show()\n\n                @selectedApp = slug\n                app = @apps.get slug\n                name = app?.get('displayName') or app?.get('name') or ''\n                if name.length > 0\n                    name = name.replace /^./, name[0].toUpperCase()\n                window.document.title = \"Cozy - #{name}\"\n                $(\"#current-application\").html name\n\n                @$(\"#app-btn-#{slug} .spinner\").hide()\n                @$(\"#app-btn-#{slug} .icon\").show()\n                @useTracker.setApp slug\n\n            unless frame.length\n                @createApplicationIframe slug, hash, id: iframeID\n\n                # We show frames right now because to load properly the app\n                # requires a proper height.\n                @frames.show()\n\n                # Then we hide the frames by moving them far.\n                @frames.css 'top', '-9999px'\n                @frames.css 'left', '-9999px'\n                @frames.css 'position', 'absolute'\n\n                $(\"##{iframeID}\").prop('contentWindow').addEventListener 'load', onLoad\n\n            # if the app was already open, we want to change its hash\n            # only if there is a hash in the home given url.\n            else if hash\n                @navigate {slug, hash}\n                onLoad()\n\n            else if frame.is(':visible')\n                @navigate ''\n                onLoad()\n\n            else\n                onLoad()\n\n\n    createApplicationIframe: (slug, hash=\"\") ->\n        # prepends '#' only if there is an actual hash\n        hash = \"##{hash}\" if hash?.length > 0\n\n        id = @getAppFrameID slug\n        source = @getIframeLocation {hash, slug}\n\n        # Add Iframe\n        iframeHTML = appIframeTemplate {id, source}\n        iframe$    = $(iframeHTML).appendTo @frames\n\n        # Listen to Iframe added to DOM\n        iframeWindow = @$(\"##{id}\").prop 'contentWindow'\n        iframeWindow.onhashchange = =>\n            newhash = iframeWindow.location.hash.replace '#', ''\n            @onAppHashChanged slug, newhash\n\n        @forceIframeRendering()\n\n        # declare the iframe to the intent manager.\n        # TODO : when each iFrame will\n        # have its own domain, then precise it\n        # (ex : https://app1.joe.cozycloud.cc:8080)\n        @intentManager.registerIframe iframe$[0], '*'\n\n\n    onAppHashChanged: (slug, newhash) =>\n        if slug is @selectedApp\n            currentHash = location.hash.substring \"#apps/#{slug}/\".length\n            if currentHash isnt newhash\n                @navigate slug, newhash\n\n            # Ugly trick required because app state changes sometime\n            # breaks the iframe layout.\n            @forceIframeRendering()\n\n\n    # If an application is broken, removed or updating, its corresponding\n    # iframe is removed.\n    onAppStateChanged: (appState) ->\n        if appState.status in ['updating', 'broken', 'uninstalled']\n            iframeID = @getAppFrameID appState.slug\n            $(\"##{iframeID}\").off 'load'\n            $(\"##{iframeID}\").remove()\n\n\n    # Store the information that the whole stack is updating.\n    onUpdateStackStart: ->\n        @viewModel.set updatingStack: true\n\n\n    # Store the information that the whole stack is no more updating.\n    onUpdateStackEnd: ->\n        @viewModel.set updatingStack: false\n\n\n    # Ugly trick for redrawing iframes. It's required because sometimes the\n    # browser breaks the Iframe layout (I didn't find any reason for that).\n    forceIframeRendering: =>\n        @frames.find('iframe').height \"99%\"\n        setTimeout =>\n            @frames.find('iframe').height \"100%\"\n        , 10\n\n\n    getAppFrameID: (slug) ->\n        return \"#{slug}-frame\"\n\n\n\n    displayToken: (token, slug, source) ->\n        iframeID = @getAppFrameID slug\n        iframeWin = @$(\"##{iframeID}\").prop 'contentWindow'\n        iframeWin.postMessage token: token, appName: slug, '*'\n\n\n    getIframeLocation: (data) ->\n        value = '/'\n        if _.isObject data\n            {slug, hash} = data\n            value += \"apps/#{slug}/#{hash}\"\n        else\n            value += data.toString()\n\n        return value\n\n\n    navigate: (hash) ->\n        iframeHash = @getIframeLocation hash\n\n        # If hash isnt malicious\n        # Update location.hash\n        unless (client.getSAMEORIGINError iframeHash)\n            window?.app?.routers?.main?.navigate iframeHash, false\n","BaseView = require 'lib/base_view'\nPopoverDescriptionView = require 'views/popover_description'\nApplicationRow = require 'views/market_application'\nColorButton = require 'widgets/install_button'\nAppCollection = require 'collections/application'\nApplication = require 'models/application'\nslugify = require 'helpers/slugify'\n\n\nREPOREGEX =  /// ^\n    (https?://)?                   #protocol\n    ([\\da-z\\.-]+\\.[a-z\\.]{2,})     #domain\n    (:[0-9]{1,5})?                 #optional domain's port\n    ([/\\w \\.-]*)*                  #path to repo\n    (?:\\.git)?                     #.git extension\n    (@[/\\w\\.-]+)?                  #branch\n     $ ///\n\n\nmodule.exports = class MarketView extends BaseView\n    id: 'market-view'\n    template: require 'templates/market'\n    tagName: 'div'\n\n    events:\n        'keyup #app-git-field':'onEnterPressed'\n        \"click #your-app .app-install-button\": \"onInstallClicked\"\n\n\n    ### Constructor ###\n\n    constructor: (installedApps, marketApps) ->\n        @marketApps = marketApps\n        @installedApps = installedApps\n        super()\n\n\n    afterRender: =>\n        @appList = @$ '#market-applications-list'\n        @appGitField = @$ \"#app-git-field\"\n        @installInfo = @$ \"#add-app-modal .loading-indicator\"\n        @infoAlert = @$ \"#your-app .info\"\n        @infoAlert.hide()\n        @errorAlert = @$ \"#your-app .error\"\n        @errorAlert.hide()\n        @noAppMessage = @$ '#no-app-message'\n        @installAppButton = new ColorButton @$ \"#add-app-submit\"\n        @onAppListsChanged()\n\n        @listenTo @installedApps, 'reset',  @onAppListsChanged\n        @listenTo @installedApps, 'change',  @onAppListsChanged\n        @listenTo @installedApps, 'remove', @onAppListsChanged\n        @listenTo @marketApps, 'reset',  @onAppListsChanged\n\n\n    # Display only apps with state equals to installed or broken.\n    onAppListsChanged: =>\n        installedApps = new AppCollection @installedApps.filter (app) ->\n            app.get('state') in ['installed', 'stopped', 'broken']\n        installeds = installedApps.pluck 'slug'\n\n        @$('.cozy-app').remove()\n        @marketApps.each (app) =>\n            slug = app.get 'slug'\n            if installeds.indexOf(slug) is -1\n                if @$(\"#market-app-#{app.get 'slug'}\").length is 0\n                    @addApplication app\n\n        if @$('.cozy-app').length is 0\n            @noAppMessage.show()\n\n\n    # Add an application row to the app list.\n    addApplication: (application) =>\n        row = new ApplicationRow(application, @)\n        @noAppMessage.hide()\n        @appList.append row.el\n        appButton = @$(row.el)\n\n\n    onEnterPressed: (event) =>\n        if event.which is 13 and not @popover?.$el.is(':visible')\n            @onInstallClicked(event)\n        else if event.which is 13\n            @popover?.confirmCallback()\n\n\n    onInstallClicked: (event) =>\n        data = git: @$(\"#app-git-field\").val()\n        @parsedGit data\n        event.preventDefault()\n\n\n    # parse git url before install application\n    parsedGit: (app) ->\n        parsed = @parseGitUrl app.git\n        if parsed.error\n            @displayError parsed.msg\n        else\n            @hideError()\n            application = new Application(parsed)\n            if @marketApps._byId[application.id]\n                icon = @marketApps._byId[application.id].get 'icon'\n                application.set 'icon', icon\n            data =\n                app: application\n            @showDescription data\n\n\n    # pop up with application description\n    showDescription: (appWidget) ->\n\n        @popover = new PopoverDescriptionView\n            model: appWidget.app\n            confirm: (application) =>\n                $('#no-app-message').hide()\n                @popover.hide()\n                @appList.show()\n                if appWidget.$el\n                    appWidget.installing()\n                    @runInstallation appWidget.app, false\n                else\n                    @runInstallation appWidget.app, true\n            cancel: (application) =>\n                @popover.hide()\n                @appList.show()\n\n        @$el.append @popover.$el\n        @popover.show()\n\n        if $(window).width() <= 640\n            @appList.hide()\n\n\n    runInstallation: (application, shouldRedirect) ->\n        @hideError()\n\n        application.install\n            ignoreMySocketNotification: true\n            success: (data) =>\n                if (data?.state is \"broken\") or not data.success\n                    alert data.message\n                else\n                    @resetForm()\n                if shouldRedirect\n                    app?.routers.main.navigate 'home', true\n\n            error: (jqXHR) =>\n                @displayError t JSON.parse(jqXHR.responseText).message\n\n\n    parseGitUrl: (url) ->\n        url = url.trim()\n        url = url.slice(0, url.length - 1) if url.lastIndexOf('/') is url.length - 1\n        url = url.replace 'git@github.com:', 'https://github.com/'\n        url = url.replace 'git://', 'https://'\n        parsed = REPOREGEX.exec url\n        unless parsed?\n            error =\n                error: true\n                msg: t \"Git url should be of form https://.../my-repo.git\"\n            return error\n        [git, proto, domain, port, path, branch] = parsed\n        if not (proto? and domain? and path?)\n            error =\n                error: true\n                msg: t \"Git url should be of form https://.../my-repo.git\"\n            return error\n        path = path.replace /\\.git$/, ''\n        parts = path.split \"/\"\n        name = parts[parts.length - 1]\n        name = name.replace /-|_/g, \" \"\n        name = name.replace 'cozy ', ''\n\n        slug = slugify(name)\n        port = \"\" unless port?\n        git = proto + domain + port + path + '.git'\n        branch = branch.substring(1) if branch?\n\n        out = git:git, name:name, slug:slug\n        out.branch = branch if branch?\n        return out\n\n\n    # Display message inside info box.\n    displayInfo: (msg) =>\n        @errorAlert.hide()\n        @infoAlert.html msg\n        @infoAlert.show()\n\n\n    # Display message inside error box.\n    displayError: (msg) =>\n        @infoAlert.hide()\n        @errorAlert.html msg\n        @errorAlert.show()\n\n\n    hideError: =>\n        @errorAlert.hide()\n\n\n    resetForm: =>\n        @appGitField.val ''\n","BaseView = require 'lib/base_view'\nColorButton = require 'widgets/install_button'\n\nREGEXP_SPRITED_SVG = ///img/apps/(.*)\\.svg///\n\nmodule.exports = class ApplicationRow extends BaseView\n    tagName: \"div\"\n    className: \"cozy-app\"\n    template: require 'templates/market_application'\n\n    events:\n        \"click .website\": \"onWebsiteClicked\"\n        \"click .btn\": \"onInstallClicked\"\n        \"click\": \"onInstallClicked\"\n\n\n    getRenderData: ->\n        app = @app.toJSON()\n        if match = app.icon.match REGEXP_SPRITED_SVG\n            [all, slug] = match\n            app = _.extend {}, app, svgSpriteSlug: 'svg-' + slug\n        return {app}\n\n\n    constructor: (@app, @marketView) ->\n        super()\n        @mouseOut = true\n\n\n    afterRender: =>\n        @$el.attr 'id', \"market-app-#{@app.get 'slug'}\"\n        @installButton = new ColorButton(@$ \"#add-#{@app.id}-install\")\n        if @app.get('comment') is 'official application'\n            @$el.addClass 'official'\n\n        slug = @app.get 'slug'\n        color = @app.get 'color'\n\n        # Only set a background color for SVG icons\n        if @app.get('icon').indexOf('.svg') isnt -1\n\n            # if there is no set color, we use an auto-generated one\n            color = ColorHash.getColor slug, 'cozy' unless color?\n\n            iconNode = @$ '.app-img img'\n            iconNode.addClass 'svg'\n            iconNode.css 'background-color', color\n\n        @installing() if @app.isInstalling()\n\n\n    installing: ->\n        @$el.addClass 'install'\n        @$('.app-img img').attr 'src', '/img/spinner-white-thin.svg'\n\n\n    onInstallClicked: ->\n        return if @app.isInstalling()\n        @marketView.showDescription @, @installButton\n\n    onWebsiteClicked: (e) ->\n        # prevent starting installation when clicking on Github or website links\n        e.stopPropagation()\n","BaseView = require 'lib/base_view'\n\nmodule.exports = class ApplicationView extends BaseView\n\n    tagName: 'div'\n    className: 'menu-application clearfix'\n    template: require 'templates/menu_application'\n\n","ViewCollection = require 'lib/view_collection'\n\nmodule.exports = class AppsMenu extends ViewCollection\n\n    el:'#menu-applications-container'\n    itemView: require 'views/menu_application'\n    template: require 'templates/menu_applications'\n\n\n    constructor: (@collection) ->\n        super\n\n    appendView: (view) ->\n\n","class Modal extends Backbone.View\n\n    id:'modal-dialog'\n    className:'modalCY fade'\n    attributes:\n        'data-backdrop': \"static\" #prevent bs closing by backdrop\n        'data-keyboard': \"false\"  #prevent bs closing by esc\n\n    initialize: (options) ->\n        @title ?= options.title\n        @content ?= options.content\n        @yes ?= options.yes or t('ok')\n        @no ?= options.no or t('cancel')\n        @back = options.back or t('chooseAgain')\n        @cb ?= options.cb or ->\n        @render()\n        if options.cssSpaceName?\n            @el.classList.add(options.cssSpaceName)\n        @saving = false\n        @el.tabIndex = 0\n        @el.focus()\n\n        # cut default bootstrap behaviour. Done here rather than in\n        # delegateEvents to be run before bootstrap callback.\n        @$('button.close').click (event) =>\n            event.stopPropagation()\n            @onNo()\n\n        @$el.on 'keyup', @onKeyStroke\n\n    events: ->\n        \"click #modal-dialog-no\"  : 'onNo'\n        \"click #modal-dialog-yes\" : 'onYes'\n        'click'                   : 'onClickAnywhere'\n\n    onNo: ->\n        @close()\n        @cb false\n\n    onYes: ->\n        @close()\n        @cb true\n\n    close: ->\n        return if @closing\n        @closing = true\n        @backdrop.parentElement.removeChild(@backdrop)\n        @el.classList.remove('in')\n        @el.classList.add('out')\n        setTimeout( (=> @remove()), 500 )\n\n    onKeyStroke: (e) =>\n        e.stopPropagation()\n        if e.which is 27\n            @onNo()\n            return false\n\n    remove: ->\n        @$el.off 'keyup', @onKeyStroke\n        super\n\n    render: ->\n        close = $('<button class=\"close\" data-dismiss=\"modal\">×</button>')\n        title = $('<p>').text @title\n        head  = $('<div class=\"modalCY-header\">').append close, title\n\n        body  = $('<div class=\"modalCY-body\"></div>').append @renderContent()\n\n        foot  = $('<div class=\"modalCY-footer\">')\n        backBtn = $(\"\"\"\n            <button id=\"modal-dialog-back\" class=\"btn transparent-grey left back\">\n                <i class=\"fa fa-chevron-left\"/> #{@back}\n            </button>\n        \"\"\").appendTo foot\n        yesBtn= $('<button id=\"modal-dialog-yes\" class=\"btn right\"/>')\n                .text(@yes)\n                .appendTo foot\n        noBtn = if @no\n            $('<button id=\"modal-dialog-no\" class=\"btn transparent-grey right\"/>')\n            .text(@no)\n            .appendTo foot\n\n        @backdrop = document.createElement('div')\n        @backdrop.classList.add('modalCY-backdrop')\n\n        $(\"body\").append(@backdrop)\n        $(\"body\").append @$el.append head, body, foot\n        # force the evaluation of the initial value of the CSS properties so\n        # that the transition is applied on them\n        window.getComputedStyle(@el).opacity\n        window.getComputedStyle(@el).top\n        @$el.addClass('in')\n\n    renderContent: -> @content\n\n    # if the target is not a child element, the click targets the backdrop\n    onClickAnywhere: (event) -> @onNo() if event.target.id is @id\n\nModal.alert = (title, content, cb) ->\n    new Modal {title, content, yes: 'ok', no: null, cb}\n\nModal.confirm = (title, content, yesMsg, noMsg, cb) ->\n    new Modal {title, content, yes: yesMsg, no:noMsg, cb}\n\nModal.error = (text, cb) ->\n    new Modal\n        title: t 'modal error'\n        content: text\n        yes: t 'modal ok'\n        no: false\n        cb: cb\n\nmodule.exports = Modal\n","BaseView = require 'lib/base_view'\nappButtonTemplate = require \"templates/navbar_app_btn\"\nNotificationsView = require './notifications_view'\nHelpView          = require './help'\nSearchBarMix     = require './search_bar_mix'\nAppsMenu = require './menu_applications'\n\nmodule.exports = class NavbarView extends BaseView\n\n    el:'.navbar'\n    template: require 'templates/navbar'\n\n    events:\n        'click #help-toggle': 'toggleHelp'\n\n    constructor: (apps, notifications) ->\n        @apps = apps\n        @notifications = notifications\n        super()\n\n    afterRender: =>\n        @notifications = new NotificationsView collection: @notifications\n        @helpView = new HelpView()\n        @appMenu = new AppsMenu @apps\n        @searchBar = new SearchBarMix()\n\n    toggleHelp: (event) ->\n        event.preventDefault()\n        @helpView.toggle()\n","BaseView = require 'lib/base_view'\n\n\n# Line displayed in the notification list.\nmodule.exports = class NotificationView extends BaseView\n\n    tagName: 'li'\n    className: 'notification clearfix'\n    template: require 'templates/notification'\n    events:\n        \"click .doaction\": \"onActionClicked\"\n        \"click .dismiss\" : \"onDismissClicked\"\n\n\n    # Add action text related to action fired by action url given in the model.\n    # Add a date field that aims to display the publication date.\n    getRenderData: ->\n        model: _.extend @model.attributes,\n            actionText: @actionText or null\n            update: @update\n            date: moment(parseInt @model.get 'publishDate').fromNow()\n\n\n    # On initialize, it:\n    # * Add a listener to rerender on model change.\n    # * Prepare the action text depending on the URL.\n    initialize: ->\n        @listenTo @model, 'change', @render\n        @update = false\n        action = @model.get 'resource'\n\n        if action?\n\n            if action.app? and action.app isnt 'home'\n                @actionText = 'notification open application'\n\n            else if action.url?\n\n                if action.url.indexOf('update-stack') >= 0\n                    @actionText = 'notification update stack'\n                    @update = true\n\n                else if action.url.indexOf('update') >= 0\n                    @actionText = 'notification update application'\n                    @update = true\n\n\n    # Depending on given parameters for action, it builds the correct URL to\n    # navigate on when the action button is clicked.\n    onActionClicked: ->\n        action = @model.get 'resource'\n\n        unless action?\n            action = app: home\n\n        if typeof action is 'string'\n            url = action\n\n        else if action.app?\n            # .replace is a quickfix\n            url = if action.app is 'home' then \"/\" else \"/apps/#{action.app}/\"\n            url += action.url or ''\n            url = url.replace '//', '/'\n            $('.right-menu').hide()\n            @model.destroy()\n\n        else\n            url = null\n\n        window.app.routers.main.navigate url, true if url\n\n\n    # Destroy current model.\n    onDismissClicked: (event) ->\n        event?.preventDefault()\n        event?.stopPropagation()\n        @model.destroy()\n","ViewCollection = require 'lib/view_collection'\nSocketListener = require 'lib/socket_listener'\nNotification = require 'models/notification'\n\nSocketListener = require '../lib/socket_listener'\n\nmodule.exports = class NotificationsView extends ViewCollection\n\n    el:'#notifications-container'\n    itemView: require 'views/notification_view'\n    template: require 'templates/notifications'\n\n    events:\n        \"click #notifications-toggle\": \"showNotifList\"\n        \"click #clickcatcher\": \"hideNotifList\"\n\n    initialize: ->\n        super\n        @initializing = true\n\n    appendView: (view) ->\n        @notifList ?= $ '#notifications-list'\n        @notifList.prepend view.el\n        @sound.play() unless @initializing\n\n    afterRender: =>\n        @counter = @$ '#notifications-counter'\n        @counter.html '0'\n        @clickcatcher = @$ '#clickcatcher'\n        @clickcatcher.hide()\n        @noNotifMsg = $ '#no-notif-msg'\n        @notifList  = $ '#notifications-list'\n        @hideNotifList()\n        @sound = $('#notification-sound')[0]\n        @dismissButton = $ \"#dismiss-all\"\n        @dismissButton.click @dismissAll\n\n        super\n        @initializing = false\n        @collection.fetch()\n        if window.cozy_user?\n            @noNotifMsg.html t 'you have no notifications',\n                name: window.cozy_user.public_name or ''\n\n    remove: =>\n        super\n\n    checkIfEmpty: =>\n        newCount = @collection.length\n        @noNotifMsg.toggle(newCount is 0)\n        if newCount is 0 # hide 0 counter\n            @counter.html \"\"\n            @counter.hide()\n        else\n            @counter.html newCount\n            @counter.show()\n\n    windowClicked: =>\n        if event? and @$el.has($(event.target)).length is 0\n            @hideNotifList()\n\n    showNotifList: =>\n        if $('#notifications-menu').is ':visible'\n            @hideNotifList()\n        else\n            $('.right-menu').hide()\n            $('#notifications-menu').show()\n            @clickcatcher.show()\n\n    hideNotifList: (event) =>\n        $('#notifications-menu').hide()\n        @clickcatcher.hide()\n\n    dismissAll: =>\n        @dismissButton.spin true\n        @collection.removeAll\n            success: =>\n                @dismissButton.spin false\n            error: =>\n                @dismissButton.spin false\n\n","Modal                = require '../views/modal'\ntemplate             = require '../templates/object_picker'\nObjectPickerPhotoURL = require './object_picker_photourl'\nObjectPickerSearch   = require './object_picker_search'\nObjectPickerUpload   = require './object_picker_upload'\nObjectPickerImage    = require './object_picker_image'\nObjectPickerAlbum    = require './object_picker_album'\ntabControler         = require 'views/tab_controller'\n\n\nMARGIN_BETWEEN_IMG_AND_CROPED = 30 # px\nTHUMB_WIDTH                   = 100 # px\nTHUMB_HEIGHT                  = 100 # px\n\nmodule.exports = class PhotoPickerCroper extends Modal\n\n################################################################################\n## PUBLIC SECTION\n\n# Class attributes\n\n\n# Methods\n\n    events: -> _.extend super,\n        'click a.next': 'displayMore'\n        'click a.prev': 'displayPrevPage'\n        'click .back':  '_chooseAgain'\n\n\n    initialize: (params, cb) ->\n        ####\n        # init config & state and super\n        @id     = 'object-picker'\n        @title  = t('pick from files')\n        @config =\n            cssSpaceName    : \"object-picker\"\n            singleSelection : true # tells if user can select one or more photo\n            numPerPage      : 50   # number of thumbs preloaded per request\n            yes             : t 'modal ok'\n            no              : t 'modal cancel'\n            cb              : cb  # will be called by onYes\n            target_h        : 100 # height of the img-preview div\n            target_w        : 100 # width  of the img-preview div\n        @params = params\n        @state =\n            currentStep : 'objectPicker' # 2 states : 'croper' & 'objectPicker'\n            img_naturalW: 0  # natural width  (px) of the selected file\n            img_naturalH: 0  # natural height (px) of the selected file\n        @el.dataset.step = @state.currentStep\n        super(@config)\n        ####\n        # get elements\n        body              = @el.querySelector '.modalCY-body'\n        body.innerHTML    = template()\n        @body             = body\n        @objectPickerCont = body.querySelector '.objectPickerCont'\n        @tablist          = body.querySelector '[role=tablist]'\n        @imgResult        = body.querySelector '#img-result'\n        @cropper$         = @el.querySelector '.croperCont'\n        @framePreview     = @cropper$.querySelector '#frame-preview'\n        @frameToCrop      = @cropper$.querySelector '.frame-to-crop'\n        @imgToCrop        = @cropper$.querySelector '#img-to-crop'\n        @imgPreview       = @cropper$.querySelector '#img-preview'\n        @chooseAgain      = @el.querySelector '.back'\n        ####\n        # initialise tabs and panels\n        @panelsControlers = {} # {tab1.name : tab1Controler, tab2... }\n        # image panel\n        #@imagePanel = new ObjectPickerImage(this)\n        #tabControler.addTab @objectPickerCont, @tablist, @imagePanel\n        #@panelsControlers[@imagePanel.name] = @imagePanel\n        ## album panel\n        #@albumPanel = new ObjectPickerAlbum(this)\n        #tabControler.addTab @objectPickerCont, @tablist, @albumPanel\n        #@panelsControlers[@albumPanel.name] = @albumPanel\n        # upload panel\n        @uploadPanel = new ObjectPickerUpload(this)\n        tabControler.addTab @objectPickerCont, @tablist, @uploadPanel\n        @panelsControlers[@uploadPanel.name] = @uploadPanel\n        # photoURL panel\n        @photoURLpanel = new ObjectPickerPhotoURL()\n        tabControler.addTab @objectPickerCont, @tablist, @photoURLpanel\n        @panelsControlers[@photoURLpanel.name] = @photoURLpanel\n        # images search panel if qwant app installed and correct env\n        qwantMode = window.urlArguments && window.urlArguments.modes && window.urlArguments.modes.indexOf 'qwant_search' isnt -1\n        if (window.DEV_ENV or qwantMode or window.ENABLE_QWANT_SEARCH) and (window.qwantInstalled)\n            # image modal panel\n            @imagePanel = new ObjectPickerImage()\n            tabControler.addTab @objectPickerCont, @tablist, @imagePanel\n            @panelsControlers[@imagePanel.name] = @imagePanel\n            # album modal panel\n            @albumPanel = new ObjectPickerAlbum()\n            tabControler.addTab @objectPickerCont, @tablist, @albumPanel\n            @panelsControlers[@albumPanel.name] = @albumPanel\n            # search modal panel\n            @imagesSearchPanel = new ObjectPickerSearch()\n            tabControler.addTab @objectPickerCont, @tablist, @imagesSearchPanel\n            @panelsControlers[@imagesSearchPanel.name] = @imagesSearchPanel\n        # init tabs\n        tabControler.initializeTabs(body)\n        @_listenTabsSelection()\n        tab = @params.defaultTab\n        tab = @imagePanel.name if not tab? and @imagePanel?\n        tab ?= @uploadPanel.name\n        @_selectDefaultTab tab\n        ####\n        # init the cropper\n        @imgToCrop.addEventListener('load', @_onImgToCropLoaded, false)\n        @cropper$.setAttribute('aria-hidden', true)\n        @framePreview.style.width  = THUMB_WIDTH  + 'px'\n        @framePreview.style.height = THUMB_HEIGHT + 'px'\n        previewTops = @cropper$.clientHeight - THUMB_HEIGHT\n\n        ####\n        # detect when the result image is loaded, then send the corresponding\n        # data url as a response\n        @imgResult.addEventListener('load', @_onImgResultLoaded, false)\n\n        window.addEventListener('resize', @resizeHandler)\n\n        return true\n\n\n    # overload the modal behavour : \"ok\" leads to the cropping step\n    onYes: ->\n        # expected object :\n        #    {dataUrl:string}\n        # or {id:file.id, docType: 'file', name:file.name}\n        # or {urlToFetch: string}\n        obj = @state.activePanel.getObject()\n\n        # cropping is not requested by the app, directly transmit the result\n        if !@params.isCropped\n            @_sendResult(obj)\n            return\n\n        # cropping is requested by the app, go to the cropping step\n        if @state.currentStep == 'objectPicker'\n            url = @_getUrlForCropping obj\n            if url\n                @_showCropingTool url\n        else\n            # Cropping is finished, get the coordinates to crop\n            # the original image.\n            dimension = @_getCroppedDimensions()\n\n            # Send result.\n            @cb true, @_getResultDataURL @imgPreview, dimension\n            @close()\n\n    resizeHandler: (event) =>\n        if @state.activePanel.resizeHandler\n            @state.activePanel.resizeHandler()\n\n\n\n\n################################################################################\n## PRIVATE SECTION ##\n#\n\n    _sendResult: (obj) ->\n        if obj.dataUrl\n            @cb(true,obj.dataUrl)\n            @close()\n            return\n        if obj.urlToFetch\n            @imgResult.src = obj.urlToFetch\n            # _onImgResultLoaded will then send the response\n            return\n        if obj.docType? and obj.docType == 'file' and obj.id?\n            if obj.id\n                @imgResult.src = \"files/photo/#{obj.id}.jpg\"\n                # _onImgResultLoaded will then send the response\n                return\n\n\n    _getUrlForCropping: (obj) ->\n        if obj.urlToFetch\n            return obj.urlToFetch\n        if obj.dataUrl\n            return obj.dataUrl\n        if obj.docType? and obj.docType == 'file' and obj.id?\n            return \"files/photo/screens/#{obj.id}.jpg\"\n\n\n    _onImgResultLoaded: (e) =>\n        @cb(true, @_getResultDataURL(@imgResult, null))\n        @close()\n\n\n    ###*\n     * returns the coordonates of the region to cropp into the original image\n     * (imgPreview)\n     * @return {Object} #\n     *   # sx      : x of the top left corner\n     *   # sy      : y of the top left corner\n     *   # sWidth  : widht of the region to crop\n     *   # sHeight : height of the region to crop\n    ###\n    _getCroppedDimensions: ()->\n        s = @imgPreview.style\n        r = @state.img_naturalW / @imgPreview.width\n        d =\n            sx      : Math.round(- parseInt(s.marginLeft)*r)\n            sy      : Math.round(- parseInt(s.marginTop )*r)\n            sWidth  : Math.round(@config.target_h*r)\n            sHeight : Math.round(@config.target_w*r)\n        # check the size of the cropped image is strictly into imgPreview\n        if d.sx < 0 then d.sx = 0\n        if d.sy < 0 then d.sy = 0\n        if d.sx + d.sWidth > @imgPreview.naturalWidth\n            d.sWidth = @imgPreview.naturalWidth - d.sx\n        if d.sy + d.sHeight > @imgPreview.naturalHeight\n            d.sHeight = @imgPreview.naturalHeight - d.sy\n        return d\n\n\n    _getResultDataURL:(img, dimensions)->\n        IMAGE_DIMENSION = 600\n        # use canvas to resize the image and return the urldata\n        canvas = document.createElement 'canvas'\n        ctx = canvas.getContext '2d'\n        if dimensions\n            canvas.height = canvas.width = IMAGE_DIMENSION\n            d = dimensions\n            ctx.drawImage( img, d.sx, d.sy, d.sWidth,\n                           d.sHeight, 0, 0, IMAGE_DIMENSION, IMAGE_DIMENSION)\n        else\n            canvas.width  = img.naturalWidth\n            canvas.height = img.naturalHeight\n            ctx.drawImage img, 0, 0\n        return dataUrl =  canvas.toDataURL 'image/jpeg'\n\n\n    onKeyStroke: (e)->\n    # overloads the modal onKeyStroke\n        if e.which == 13 # return key => validate modal\n            e.stopPropagation()\n            @onYes()\n            return\n        if e.which is 27 # escape key => choose another photo\n            e.stopPropagation()\n            if @state.currentStep == 'croper'\n                @_chooseAgain()\n            else # @state.currentStep == 'objectPicker'\n                @.onNo()\n            return\n        @state.activePanel?.keyHandler(e)\n\n\n\n    #\n    _showCropingTool: (url)=>\n        @state.currentStep  = 'croper'\n        @currentPhotoScroll = @body.scrollTop\n        @el.dataset.step = @state.currentStep\n        @objectPickerCont.setAttribute 'aria-hidden', true\n        @cropper$.setAttribute 'aria-hidden', false\n        @_imgToCropTemp = new Image()\n        @_imgToCropTemp.id = 'img-to-crop'\n        @_imgToCropTemp.addEventListener( 'load', @_onImgToCropLoaded  , false)\n        @_imgToCropTemp.src = url\n        @imgPreview.src = url\n\n\n    ###*\n     * triggered when the image to crop is loaded, will compute the geometry\n     * and initialize jCrop\n    ###\n    _onImgToCropLoaded: =>\n        console.debug @_imgToCropTemp\n        natural_h =   @_imgToCropTemp.naturalHeight\n        natural_w =   @_imgToCropTemp.naturalWidth\n        frame_H   =   @cropper$.clientHeight\n        frame_W   =   @cropper$.clientWidth               \\\n                    - MARGIN_BETWEEN_IMG_AND_CROPED       \\\n                    - THUMB_WIDTH\n\n        # determine the image to crop size so that it fits in cropper$\n        if frame_H < natural_h or frame_W < natural_w\n            if frame_H / frame_W > natural_h / natural_w\n                img_w = Math.round(frame_W)\n                img_h = Math.round(frame_W * natural_h / natural_w)\n            else\n                img_h = Math.round(frame_H)\n                img_w = Math.round(frame_H * natural_w / natural_h)\n            @_imgToCropTemp.style.width  = img_w + 'px'\n            @_imgToCropTemp.style.height = img_h + 'px'\n        else\n            img_w  = natural_w\n            img_h  = natural_h\n        @frameToCrop.style.width  = img_w + 'px'\n        @frameToCrop.style.height = img_h + 'px'\n\n        # keep a reference of the geometry for _updateCropedPreview\n        # and _getCroppedDimensions\n        @img_w = img_w\n        @img_h = img_h\n        @state.img_naturalW = natural_w\n        @state.img_naturalH = natural_h\n\n        # insert the new img to crop\n        @imgToCrop.parentElement.appendChild(@_imgToCropTemp)\n        @imgToCrop.parentElement.removeChild(@imgToCrop)\n        @imgToCrop = @_imgToCropTemp\n\n\n        margin                    = Math.round((frame_W-img_w)/2)\n        @frameToCrop.style.left   = margin + 'px'\n        cropTop                   = Math.round((frame_H-img_h)/2)\n        @frameToCrop.style.top    = cropTop + 'px'\n        @framePreview.style.top   = cropTop + 'px'\n        @framePreview.style.right = margin + 'px'\n\n\n        selection_w   = Math.round(Math.min(@img_h,@img_w)*1)\n        x = Math.round( (@img_w-selection_w)/2 )\n        y = Math.round( (@img_h-selection_w)/2 )\n        options =\n            onChange    : @_updateCropedPreview\n            onSelect    : @_updateCropedPreview\n            aspectRatio : 1\n            setSelect   : [ x, y, x+selection_w, y+selection_w ]\n        t = this\n        # force a reflow so that jCrop works properly\n        @imgToCrop.offsetHeight\n        $(@imgToCrop).Jcrop( options, ()->\n            t.jcrop_api = this\n        )\n        t.jcrop_api.focus()\n\n\n    _updateCropedPreview: (coords) =>\n        prev_w = @img_w / coords.w * @config.target_w\n        prev_h = @img_h / coords.h * @config.target_h\n        prev_x = @config.target_w  / coords.w * coords.x\n        prev_y = @config.target_h  / coords.h * coords.y\n        s            = @imgPreview.style\n        s.width      = Math.round(prev_w) + 'px'\n        s.height     = Math.round(prev_h) + 'px'\n        s.marginLeft = '-' + Math.round(prev_x) + 'px'\n        s.marginTop  = '-' + Math.round(prev_y) + 'px'\n        return true\n\n\n    _chooseAgain : ()->\n    # brings back from cropping step to the objectPicker step\n        @state.currentStep = 'objectPicker'\n        @jcrop_api.destroy()\n        @imgToCrop.removeAttribute('style')\n        @imgToCrop.src = ''\n        @objectPickerCont.setAttribute 'aria-hidden', false\n        @cropper$.setAttribute 'aria-hidden', true\n        @body.scrollTop = @currentPhotoScroll\n        @el.dataset.step = @state.currentStep\n        # manage focus wich was on the jcrop element\n        @_setFocus()\n\n\n    _setFocus: ()->\n        if !@state.activePanel.setFocusIfExpected\n            return\n        if !@state.activePanel.setFocusIfExpected()\n            @el.focus()\n\n\n    _listenTabsSelection: ()->\n        @objectPickerCont.addEventListener('panelSelect',(event)=>\n            @_activatePanel(event.target.classList[0])\n        )\n\n\n    _selectDefaultTab:(panelClassName)->\n        @tablist.querySelector(\"[aria-controls=#{panelClassName}]\")?.click()\n\n\n    _activatePanel: (panelClassName)->\n        @state.activePanel = @panelsControlers[panelClassName]\n        if @state.activePanel.resizeHandler\n            @state.activePanel.resizeHandler()\n        @_setFocus()\n","Photo    = require '../models/photo'\nBaseView = require 'lib/base_view'\nclient   = require '../lib/request'\n\n\nmodule.exports = class ObjectPickerAlbum extends BaseView\n\n    tagName   : \"section\"\n\n    ####################\n    ## PUBLIC SECTION ##\n    #\n\n    constructor: (modal) ->\n        @modal = modal\n        super()\n\n\n    initialize : () ->\n        ####\n        # init state\n        @name     = 'albumPicker'\n        @tabLabel = 'album'\n        ####\n        # get elements (name ends with '$')\n        @tab      = $(\"<div class='fa fa-book'>#{@tabLabel}</div>\")[0]\n        @panel    = @el\n        @albums$  = $('<div class=\"albums\"></div>')[0]\n        @thumbs$  = $(\"\"\"\n            <div class=\"thumbs\">\n                <div class=\"thumb\"><img/></div>\n            </div>\n        \"\"\")[0]\n        @panel.appendChild @albums$\n        @panel.appendChild @thumbs$\n        ####\n        # construct the list of albums\n        @_getAlbums()\n        ####\n        # A dictionnary to store the selected photos\n        # selected.photoID = thumb = {rank, id,name,thumbEl}\n        @selectedThumbs = {}\n\n        ####\n        # listeners\n        @thumbs$.addEventListener 'click', @_clickHandler\n        @thumbs$.addEventListener 'dblclick', @_dblclickHandler\n\n\n    getObject : () ->\n        for id, thumb$ of @selectedThumbs\n            if thumb$\n                break\n        photo = thumb$.photo\n        res =\n            id         : photo.id\n            docType    : 'photo'\n            name       : photo.title\n            urlToFetch : \"photos/raws/#{photo.id}.jpg\"\n        return res\n\n\n    setFocusIfExpected : () ->\n        # the panel doesn't want the focus because otherwise the arrows keys\n        # makes thumbs scroll\n        return false\n\n\n    keyHandler : (e)->\n        return\n\n\n    resizeHandler: () ->\n        thumbStyle = window.getComputedStyle(@thumbs$.children[0])\n        colWidth   =   parseInt(thumbStyle.width)       \\\n                     + parseInt(thumbStyle.marginLeft)  \\\n                     + parseInt(thumbStyle.marginRight) \\\n                     + 2\n        width = @thumbs$.clientWidth\n        margin = Math.floor((width % colWidth)/2)\n\n\n    #####################\n    ## PRIVATE SECTION ##\n    #\n\n    _dblclickHandler: (e) =>\n        thumb$ = e.target\n        if !@_toggleOnThumb$(thumb$)\n            return\n        @modal.onYes()\n\n\n    _clickHandler: (e) =>\n        th = e.target\n        while (not th.classList.contains('thumb'))\n            th = th.parentElement\n            return if th.classList.contains('thumbs')\n\n        if !@_toggleOnThumb$(th) then return null\n        th.setAttribute('aria-selected', true)\n\n\n    _toggleOnThumb$: (thumb$)=>\n        if thumb$.getAttribute('aria-selected') is 'true'\n            return true\n        @_unselectAll()\n        thumb$.setAttribute('aria-selected', true)\n        @selectedThumbs[thumb$.dataset.id] = thumb$\n        return true\n\n\n    _unselectAll: () =>\n        for id, thumb$ of @selectedThumbs\n            if typeof(thumb$) == 'object'\n                thumb$.setAttribute('aria-selected', false)\n                @selectedThumbs[id] = false\n\n\n    _getAlbums: () ->\n        client.get \"albums/?\", (err, res) =>\n            if err\n                console.error err\n                return\n            # if true\n            if res.length == 0\n                @panel.removeChild(@albums$)\n                @panel.removeChild(@thumbs$)\n                @panel.classList.add('noAlbum')\n                $(@panel).append(\"\"\"\n                    <div></div>\n                    <div class='noAlbumDisclaimer'>\n                        #{t('you have no album')}\n                    </div>\n                    <div></div>\n                \"\"\")\n                return\n            n = 0\n            for album in res\n                albumLabel$ = @_initAlbum(album)\n                if n == 0\n                    @previousSelectedAlbum$ = albumLabel$\n                    albumLabel$.setAttribute('aria-selected', true)\n                    @_getAlbumPhotos(album.id)\n                n += 1\n            @resizeHandler()\n\n\n    _initAlbum: (album)=>\n        el = $( require('../templates/album_thumb')() )[0]\n        cover = el.querySelector('.cover')\n        label = el.querySelector('.label')\n        cover.src = \"photos/thumbs/#{album.coverPicture}.jpg\"\n        label.textContent = album.title\n        @albums$.appendChild(el)\n        el.addEventListener 'click', (event) =>\n            @previousSelectedAlbum$.setAttribute('aria-selected', false)\n            el.setAttribute('aria-selected', true)\n            @previousSelectedAlbum$ = el\n            @_getAlbumPhotos(album.id)\n        return el\n\n\n    _getAlbumPhotos: (albumId) =>\n        client.get \"albums/#{albumId}\", (err, res) =>\n            if err then return\n            @_updateThumbs(res)\n            @_toggleOnThumb$(@thumbs$.children[0])\n\n\n    _updateThumbs: (res)=>\n        photos = res.photos\n        nPhoto = photos.length\n        photoRank = 0\n        for thumb in @thumbs$.children\n            if photoRank >= nPhoto\n                thumb.setAttribute('aria-hidden', true)\n                thumb.firstElementChild.src = ''\n                thumb.dataset.id            = ''\n                thumb.photo                 = null\n            else\n                thumb.setAttribute('aria-hidden', false)\n                thumb.dataset.id            = photoId = photos[photoRank].id\n                thumb.firstElementChild.src = \"photos/thumbs/#{photoId}.jpg\"\n                thumb.photo                 = photos[photoRank]\n            photoRank += 1\n\n        for photoRank in [photoRank..nPhoto-1] by 1\n            thumbImg     = document.createElement 'img'\n            thumbImg.src = \"photos/thumbs/#{photos[photoRank].id}.jpg\"\n            thumb        = document.createElement 'div'\n            thumb.appendChild thumbImg\n            thumb.classList.add 'thumb'\n            thumb.photo      = photos[photoRank]\n            thumb.dataset.id = photos[photoRank].id\n            @thumbs$.appendChild thumb\n\n","Photo    = require '../models/photo'\nLongList = require 'views/image_list'\nBaseView = require 'lib/base_view'\n\n\nmodule.exports = class ObjectPickerImage extends BaseView\n\n    tagName   : \"section\"\n\n####################\n## PUBLIC SECTION ##\n#\n\n    constructor: (modal) ->\n        @modal = modal\n        super()\n\n\n    initialize : () ->\n        ####\n        # init state\n        @name     = 'thumbPicker'\n        @tabLabel = 'image'\n        ####\n        # get elements (name ends with '$')\n        @tab      = $(\"<div class='fa fa-photo'>#{@tabLabel}</div>\")[0]\n        @panel    = @el\n        ####\n        # construct the long list of images\n        @longList = new LongList(@panel, @modal)\n\n\n    getObject : () ->\n        file = @longList.getSelectedFile()\n        if file\n            return id:file.id, docType: 'file', name:file.name\n        return false\n\n\n    setFocusIfExpected : () ->\n        # the panel doesn't want the focus because otherwise the arrows keys\n        # makes thumbs scroll\n        return false\n\n    setInitialDimensions : (width, heigth) ->\n        @longList.setInitialDimensions(width, heigth)\n\n\n\n    keyHandler : (e)->\n        @longList.keyHandler(e)\n        return\n\n\n    resizeHandler: () ->\n        @longList.resizeHandler()\n","proxyclient = require 'lib/proxyclient'\nBaseView    = require 'lib/base_view'\n\n\nmodule.exports = class ObjectPickerPhotoURL extends BaseView\n\n    template : require '../templates/object_picker_photourl'\n    tagName  : 'section'\n\n####################\n## PUBLIC SECTION ##\n#\n    initialize: () ->\n        @render()\n        @name     = 'urlPhotoUpload'\n        @tabLabel = 'url'\n        @tab      = $(\"<div class='fa fa-link'>#{@tabLabel}</div>\")[0]\n        @panel    = @el\n        @img      = @panel.querySelector('.url-preview')\n        @blocContainer=@panel.querySelector('.bloc-container')\n        @url      = undefined\n        @input    = @panel.querySelector('.modal-url-input')\n        @_setupInput()\n\n    getObject : () ->\n        if @url\n            return urlToFetch: @url\n        else\n            return false\n\n    setFocusIfExpected : () ->\n        @input.focus()\n        @input.select()\n        return true\n\n    keyHandler : (e)->\n        return false\n\n#####################\n## PRIVATE SECTION ##\n#\n    ###*\n     * manages the url typed in the input and update image\n    ###\n    _setupInput: ()->\n        img = @img\n        urlRegexp = /// \\b\n            (https?|ftp|file)://\n            [\\-A-Z0-9+&@#/%?=~_|$!:,.;]*\n            [A-Z0-9+&@#/%=~_|$]\n        ///i\n        imgTmp = new Image()\n\n        imgTmp.onerror =  () ->\n            img.style.backgroundImage = \"\"\n            @url = undefined\n\n        imgTmp.onload =  () =>\n            img.style.height = imgTmp.naturalHeight + 'px'\n            img.parentElement.style.display = 'flex'\n            img.style.backgroundImage = 'url(' + imgTmp.src + ')'\n            @url = imgTmp.src\n            @blocContainer.style.height = (imgTmp.naturalHeight/2) + 'px'\n\n        preloadImage = (src) ->\n            imgTmp.src = src\n\n        @input.addEventListener('input',(e)->\n            newurl = e.target.value\n            if urlRegexp.test(newurl)\n                url = 'api/proxy/?url=' + encodeURIComponent(newurl)\n                preloadImage(url)\n            else\n                img.style.backgroundImage = \"\"\n                @url = undefined\n        ,false)\n","proxyclient = require 'lib/proxyclient'\nBaseView    = require 'lib/base_view'\nclient   = require '../lib/request'\n\nmodule.exports = class ObjectPickerSearch extends BaseView\n\n    template : require '../templates/object_picker_search'\n    tagName  : 'section'\n\n####################\n## PUBLIC SECTION ##\n#\n    initialize: () ->\n        @render()\n        @name     = 'imagesSearch'\n        @tabLabel = 'search'\n        @tab      = $(\"<div class='fa fa-search'>#{@tabLabel}</div>\")[0]\n        @panel    = @el\n        @blocContainer = @panel.querySelector('.search-tab-container')\n        @input    = @panel.querySelector('.modal-search-input')\n        @selectedUrl      = @selectedUrl\n\n        # A dictionnary to store the selected image\n        @selectedImage = {}\n\n        ####\n        # listeners\n        @input.addEventListener 'keyup', @_inputOnChange\n\n        ####\n        # input helpers and properties\n        @input.getImages = @_getQwantImages\n        @input.container = @blocContainer\n\n    getObject : () ->\n        # get selected image source if it exists\n        @selectedUrl = $('div.selected img')[0]?.data\n        if @selectedUrl\n            @selectedUrl = \"api/proxy/?url=#{@selectedUrl}\"\n            return urlToFetch: @selectedUrl\n        else\n            return false\n\n    setFocusIfExpected : () ->\n        @input.focus()\n        @input.select()\n        return true\n\n    keyHandler : (e)->\n        return false\n\n#####################\n## PRIVATE SECTION ##\n#\n\n    # input listener\n    _inputOnChange: _.debounce( (e) ->\n        # here, @ is the input object running this listener\n        newQuery = @value\n        # if not empty and not equal to the last query\n        if newQuery.trim() isnt '' and newQuery isnt @query\n            @query = newQuery\n            @getImages()\n    , 500)\n\n    _getQwantImages: () ->\n        # here, @ is the input object running the previous listener\n        container = $('.search-tab-container')\n        # remove last results\n        container.children('.results').remove()\n        # remove potential error message\n        container.children('.error').remove()\n        # add the loading spinner if not exist\n        if !$('.search-tab-container .spinner').length\n            container.append($(\"<img src='/img/spinner.svg' class='spinner'/>\"))\n        # request\n        client.get \"apps/qwant/imagesSearch?q=#{@query}&count=50\", (err, res) =>\n            # remove loading spinner\n            container.children('.spinner').remove()\n            # if error\n            if err\n                # display a not found message\n                container.append($(\"<div class='error'>#{t 'a server error occured'}</div>\"))\n                console.error err\n                return\n            # if no results\n            if res?.data?.result?.items.length == 0\n                # display a not found message\n                container.append($(\"<div class='error notFound'>#{t 'qwant results not found'}</div>\"))\n                return\n            # if results\n            if res?.data?.result?.items\n                # variables\n                results$ = $(\"<div class='results'></div>\")\n                imagesArray = res.data.result.items\n                # display the gallery\n                for index of imagesArray\n                    item$ = $(\"<div class='searchItem'></div>\")\n                    currentImage = imagesArray[index]\n\n                    # create image with properties\n                    thumb$ = new Image()\n                    thumb$.src = currentImage.thumbnail\n                    thumb$.data = currentImage.media\n                    thumb$.style.height = currentImage.thumb_height + 'px'\n                    thumb$.style.width = currentImage.thumb_width + 'px'\n\n                    # hide if broken url\n                    thumb$.onerror = () ->\n                        $(@).parent().hide();\n\n                    # selection listener\n                    thumb$.onclick = () ->\n                        # unselect all\n                        $('.searchItem').removeClass('selected')\n                        # select this item\n                        $(@).parent().addClass('selected')\n\n                    # append to parents\n                    item$.append(thumb$)\n                    results$.append(item$)\n\n                container.append(results$)\n","BaseView    = require 'lib/base_view'\n\n\nmodule.exports = class ObjectPickerUpload extends BaseView\n\n    template : require '../templates/object_picker_upload'\n    tagName  : \"section\"\n\n\n####################\n## PUBLIC SECTION ##\n#\n    constructor: (objectPicker) ->\n        super()\n        @objectPicker = objectPicker\n\n    initialize: () ->\n        @render()\n        # get elements\n\n        @name     = 'photoUpload'\n        @tabLabel = 'upload'\n        @tab      = @_createTab()\n        @panel    = @el\n        # bind events\n        @_bindFileDropZone()\n        btn = @panel.querySelector('.photoUpload-btn')\n        btn.addEventListener('click', @_changePhotoFromUpload)\n        @btn = btn\n        @uploader = @panel.querySelector('.uploader')\n        @uploader.addEventListener('change', @_handleUploaderChange)\n\n\n    getObject : () ->\n        return dataUrl: @dataUrl\n\n    setFocusIfExpected : () ->\n        @btn.focus()\n        return true\n\n    keyHandler : (e) ->\n        return false\n\n\n#####################\n## PRIVATE SECTION ##\n#\n    _createTab : () ->\n        return $(\"<div class='fa fa-upload'>#{@tabLabel}</div>\")[0]\n\n\n    _bindFileDropZone: ()->\n\n        dropbox = @panel.querySelector(\".modal-file-drop-zone>div\")\n        hasEnteredText = false\n\n        dropbox.addEventListener(\"dragenter\", (e)->\n            e.stopPropagation()\n            e.preventDefault()\n            dropbox.classList.add('dragging')\n        ,false)\n\n        dropbox.addEventListener(\"dragleave\", (e)->\n            e.stopPropagation()\n            e.preventDefault()\n            dropbox.classList.remove('dragging')\n        , false)\n\n        dragenter = (e)->\n            e.stopPropagation()\n            e.preventDefault()\n\n        drop = (e) =>\n            e.stopPropagation()\n            e.preventDefault()\n            dt = e.dataTransfer\n            files = dt.files\n            @_handleFile(files[0])\n\n        dragover = dragenter\n        dropbox.addEventListener \"dragover\", dragover, false\n        dropbox.addEventListener \"drop\", drop, false\n\n\n    _changePhotoFromUpload: () =>\n        @uploadPopupOpened = true\n        # pb : is not set to false if the user close the popup by clicking on\n        # the close button => will close the modal too...\n        @uploader.click()\n\n\n    _handleUploaderChange: () =>\n        file = @uploader.files[0]\n        @_handleFile(file)\n\n\n    _handleFile: (file) =>\n        unless file.type.match /image\\/.*/\n            return alert t 'This is not an image'\n        reader = new FileReader()\n        img = new Image()\n        reader.readAsDataURL file\n        reader.onloadend = =>\n            @dataUrl = reader.result\n            @objectPicker.onYes()\n\n","BaseView = require 'lib/base_view'\nrequest = require 'lib/request'\n\nmodule.exports = class PopoverDescriptionView extends BaseView\n    id: 'market-popover-description-view'\n    className: 'modal md-modal md-effect-1'\n    tagName: 'div'\n    template: require 'templates/popover_description'\n\n    events:\n        'click #cancelbtn':'onCancelClicked'\n        'click #confirmbtn':'onConfirmClicked'\n\n    initialize: (options) ->\n        super\n        @confirmCallback = _.once options.confirm\n        @cancelCallback = options.cancel\n        @label = if options.label? then options.label else t 'install'\n        @$(\"#confirmbtn\").html @label\n\n\n    afterRender: ->\n        @body = @$ \".md-body\"\n        @header = @$ \".md-header h3\"\n        @header.html @model.get 'displayName'\n\n        @body.addClass 'loading'\n        @body.html t('please wait data retrieval') + \\\n            '<div class=\"spinner-container\" />'\n        @body.find('.spinner-container').spin true\n        @model.getMetaData\n            success: =>\n                @body.removeClass 'loading'\n                @renderDescription()\n            error: (error) =>\n                @body.removeClass 'loading'\n                @body.addClass 'error'\n                if error.responseText.indexOf('Not Found') isnt -1\n                    @body.html t 'package.json not found'\n                else if error.responseText.indexOf('unknown provider') isnt -1\n                    @body.html t 'unknown provider'\n                    @$(\"#confirmbtn\").hide()\n                else\n                    @body.html \"\"\"\n                        #{t 'error connectivity issue'}\n                        #{error.responseText}\n                        \"\"\"\n\n        @overlay = $ '.md-overlay'\n        @overlay.click =>\n            @hide()\n\n    renderDescription: =>\n\n        @body.html \"\"\n\n        # Update displayName for applications not in marketplace\n        @header = @$ \".md-header h3\"\n        @header.html @model.get 'displayName'\n\n        description = @model.get 'description'\n        if description?\n            localeKey = \"#{@model.get 'name'} description\"\n            localeDesc = t localeKey\n            if localeDesc is localeKey\n                # description is not translated\n                localeDesc = t description\n        else\n            # for applications not in the market\n            localeDesc = @model.get 'remoteDescription'\n        # applications not in the market may have no description\n        if localeDesc?\n            @header.parent().append \"<p class=\\\"line\\\"> #{localeDesc} </p>\"\n\n        permissions = @model.get(\"permissions\")\n        if not permissions? or Object.keys(permissions).length is 0\n            permissionsDiv = $ \"\"\"\n                <div class='permissionsLine'>\n                    <h5>#{t('no specific permissions needed')} </h5>\n                </div>\n            \"\"\"\n            @body.append permissionsDiv\n        else\n\n            # Hide a fake permission screen behind a the flag `BEN_DEMO`\n            if window.BEN_DEMO\n                @body.append \"<h4>#{t('required permissions')}</h4>\"\n                headerDiv = $ \"<div class='permissionsLine header flag-ben-demo'>\n                        <div class='fake-checkbox checked'><div class='circle'></div></div>\n                        <div class='doctype-name'>Doctype</div>\n                        <div class='doctype-filter'>Filtre</div>\n                        <div class='doctype-use'>Usage</div>\"\n                @body.append headerDiv\n\n                filtersType = [\n                    'Accès restreint aux documents possédant le tag \"Travail\".'\n                    'Accès restreint aux documents possédant le tag \"Personnel\".'\n                    'Accès restreint aux documents possédant le tag \"Vacances\".'\n                    'Accès restreint aux documents créés il y a plus de deux semaines.'\n                    'Accès restreint aux documents créé il y a plus de deux semaines.'\n                ]\n\n                for docType, permission of @model.get(\"permissions\")\n                    hasFilter = (Math.round(Math.random() * 100) + 1) <= 50\n                    isShared = (Math.round(Math.random() * 100) + 1) <= 50\n\n\n                    if hasFilter\n                        filterTag = \"&nbsp;\"\n                    else\n                        drawFilterType = Math.round(Math.random() * filtersType.length)\n                        filterType = filtersType[drawFilterType]\n                        filterTag = \"<i class='fa fa-filter'></i>\n                                     <div class='tooltip'>#{filterType}</div>\"\n\n                    if isShared\n                        sharedClass = \"\"\n                        sharedTag = \"Local <div class='tooltip'>Cette donnée ne sera utilisée qu'en local et ne sortira pas de Cozy.</div>\"\n                    else\n                        sharedClass = \"shared\"\n                        sharedTag = \"Partagé <div class='tooltip'>L'application demande l'autorisation d'envoyer cette donnée à l'extérieur. En savoir plus…</div>\"\n\n                    permissionsDiv = $ \"<div class='permissionsLine flag-ben-demo'>\n                            <div class='fake-checkbox checked'><div class='circle'></div></div>\n                            <div class='doctype-name'>#{docType}</div>\n                            <div class='doctype-filter'>#{filterTag}</div>\n                            <div class='doctype-use #{sharedClass}'>#{sharedTag}</div>\"\n                    @body.append permissionsDiv\n\n            # Production case\n            else\n                @body.append \"<h5>#{t('required permissions')}</h5>\"\n                for docType, permission of @model.get(\"permissions\")\n                    permissionsDiv = $ \"\"\"\n                      <div class='permissionsLine'>\n                        <strong> #{docType} </strong>\n                        <p> #{permission.description} </p>\n                      </div>\n                    \"\"\"\n                    @body.append permissionsDiv\n\n        @handleContentHeight()\n        @body.slideDown()\n        #@body.niceScroll() # must be done in the end to avoid weird render\n\n    handleContentHeight: ->\n        @body.css 'max-height', \"#{$(window).height() / 2}px\"\n        $(window).on 'resize', =>\n            @body.css 'max-height', \"#{$(window).height() / 2}px\"\n\n\n    show: =>\n        @$el.addClass 'md-show'\n        @overlay.addClass 'md-show'\n        setTimeout =>\n            @$('.md-content').addClass 'md-show'\n        , 300\n        document.addEventListener 'keydown', @onCancelClicked\n\n    hide: =>\n        @body.getNiceScroll().hide()\n        $('.md-content').fadeOut =>\n            @overlay.removeClass 'md-show'\n            @$el.removeClass 'md-show'\n            @remove()\n        $('#home-content').removeClass 'md-open'\n        document.removeEventListener 'keydown', @onCancelClicked\n\n    onCancelClicked: (event) =>\n        return if event.keyCode? and event.keyCode isnt 27\n        @hide()\n        @cancelCallback(@model)\n\n    onConfirmClicked: ->\n        @confirmCallback @model\n","BaseView = require 'lib/base_view'\n\nmodule.exports = class SearchBarView extends BaseView\n\n    el:'.navbar'\n\n    regExpHistory: {}\n\n    # for qwant features\n    onSearchClick: (e) ->\n        # select automatically the value when click on the search bar\n        e.target.select()\n\n    searchWebQwant: (e) ->\n        # do the web search qwant\n        if e.keyCode and e.keyCode is 13\n            # get the query\n            query = encodeURIComponent(e.target.value)\n            # do the intent\n            intent =\n                action: 'goto'\n                params: \"qwant/search/web/#{query}\"\n            window.postMessage(intent, window.location.origin)\n\n    handleSubmit: (e) ->\n        @searchWebQwant e\n\n    constructor: () ->\n        qwantMode = window.urlArguments && window.urlArguments.modes && window.urlArguments.modes.indexOf 'qwant_search' isnt -1\n        @qwantEnable = (window.DEV_ENV or qwantMode or window.ENABLE_QWANT_SEARCH) and (window.qwantInstalled)\n        @BEN_DEMO = window.BEN_DEMO\n\n        if @qwantEnable and @BEN_DEMO\n            qwantSearchDataset = [\"web\", 'images']\n            qwantSource = (items) =>\n                (query, cb) =>\n                    cb [\"QwantWeb-#{query}\", \"QwantImages-#{query}\"]\n            qwantDisplay = (query) =>\n                if query.indexOf('QwantWeb-') >= 0\n                    query = query.replace(\"QwantWeb-\", \"\")\n                    return \"Qwant web for #{query}\"\n                if query.indexOf('QwantImages-') >= 0\n                    query = query.replace(\"QwantImages-\", \"\")\n                    return \"Qwant images for #{query}\"\n\n            substringMatcher = (items) =>\n                (query, cb) =>\n                    # an array that will be populated with the item wich matches\n                    matches = []\n                    if query.length <= 3\n                        cb []\n\n                    # regexs used to determine if a string matches\n                    queryWords = query.toLowerCase().trim().split(' ')\n                    regExpList = []\n                    for word in queryWords\n                        if !reg = @regExpHistory[word]\n                            reg = new RegExp( word.split('').join('.*?'), 'g' )\n                            @regExpHistory[word] = reg\n                        regExpList.push reg\n\n                    # iterate through the pool of strings to find those that matche\n                    # all the regexp\n                    for item in items\n                        itemMatched = true\n                        for regExp in regExpList\n                            if not regExp.test(item.toLowerCase())\n                                itemMatched = false\n                                break\n                            regExp.lastIndex = 0\n                        if itemMatched\n                            matches.push item\n\n                    cb matches\n\n            states = [\n                # \"/Administratif/edf/toto\"\n                \"/Administratif\"\n                \"/Administratif/Bank statements\"\n                \"/Administratif/Bank statements/Bank Of America\"\n                \"/Administratif/Bank statements/Deutsche Bank\"\n                \"/Administratif/Bank statements/Société Générale\"\n                \"/Administratif/CPAM\"\n                \"/Administratif/EDF\"\n                \"/Administratif/EDF/Contrat\"\n                \"/Administratif/EDF/Factures\"\n                \"/Administratif/Emploi\"\n                \"/Administratif/Impôts\"\n                \"/Administratif/Logement\"\n                \"/Administratif/Logement/Loyer 158 rue de Verdun\"\n                \"/Administratif/Orange\"\n                \"/Administratif/Pièces identité\"\n                \"/Administratif/Pièces identité/Carte identité\"\n                \"/Administratif/Pièces identité/Passeport\"\n                \"/Administratif/Pièces identité/Permis de conduire\"\n                \"/Appareils photo\"\n                \"/Boulot\"\n                \"/Cours ISEN\"\n                \"/Cours ISEN/CIR\"\n                \"/Cours ISEN/CIR/LINUX\"\n                \"/Cours ISEN/CIR/MICROCONTROLEUR\"\n                \"/Cours ISEN/CIR/RESEAUX\"\n                \"/Cours ISEN/CIR/TRAITEMENT_SIGNAL\"\n                \"/Divers photo\"\n                \"/Divers photo/wallpapers\"\n                \"/Films\"\n                \"/Notes\"\n                \"/Notes/Communication\"\n                \"/Notes/Notes techniques\"\n                \"/Notes/Recrutement\"\n                \"/Projet appartement à Lyon\"\n                \"/Vacances Périgord\"\n            ]\n\n            trackCharsToHighlight = (item, charsToHighlight,startIndex,word)->\n                charsToHighlight[startIndex] = true\n                nChars = item.length\n                charIndex = startIndex\n                wordIndex = 1\n                while charIndex < nChars\n                    char = item[charIndex]\n                    if  char == word[wordIndex]\n                        charsToHighlight[charIndex] = true\n                        if ++wordIndex >= word.length\n                            return\n                    charIndex++\n                return\n\n            highlightItem = (item,charsToHighlight) ->\n                res = '<p>'\n                previousWasToHighlight = undefined\n                for isToHighlight, n in charsToHighlight\n                    if isToHighlight == previousWasToHighlight\n                       res +=  item[n]\n                    else\n                        if previousWasToHighlight\n                            res += '</strong>' + item[n]\n                        else\n                            res += '<strong class=\"tt-highlight\">' + item[n]\n                    previousWasToHighlight = isToHighlight\n                if previousWasToHighlight\n                    return res += '</strong></p>'\n                else\n                    return res += '</p>'\n\n\n            typeah = $('#search-bar')\n\n            # if MIX\n            typeah.typeahead {\n              hint      : true\n              highlight : true\n              minLength : 1\n              limit     : 8\n            },\n            {\n                name: 'qwant'\n                source: qwantSource(qwantSearchDataset)\n                display: qwantDisplay\n                templates:\n                  header: () =>\n                      return \"<p class='sourceTitle'>Search in application Qwant</p>\"\n            },\n            {\n              name: 'states'\n              source: substringMatcher(states)\n              templates:\n                header: () =>\n                    return \"<p class='sourceTitle'>Search in application Files</p>\"\n                suggestion: (item)=>\n                    queryWords = typeah.typeahead('val').toLowerCase().trim().split(' ')\n                    itemLC = item.toLowerCase()\n                    fullWordsToHighlight = Array(item.length)\n\n                    for word in queryWords\n                        wordRegexp = @regExpHistory[word]\n                        wordRegexp.lastIndex = 0\n                        fullWordMatch_N = 0\n                        fuzzyWordsToHighlight = Array(item.length)\n\n                        # for each word of the query look for an occurence to\n                        # highlight\n                        while match = wordRegexp.exec(itemLC)\n                            # if the occurence is a contiguous string, keep it\n                            if match[0].length == word.length\n                                fullWordMatch_N++\n                                trackCharsToHighlight(itemLC, fullWordsToHighlight,match.index,word)\n                            # else keep it only if so far there was no full match\n                            else if fullWordMatch_N == 0\n                                trackCharsToHighlight(itemLC, fuzzyWordsToHighlight,match.index,word)\n                        # if there were only fuzzy match, fusionnates the fuzzy\n                        # chars to highllight with the full match chars.\n                        if fullWordMatch_N == 0\n                            for isToHighlight,n in fuzzyWordsToHighlight\n                                if isToHighlight\n                                    fullWordsToHighlight[n] = true\n\n                    return html = highlightItem(item,fullWordsToHighlight)\n            }\n\n\n\n\n\n            $('.twitter-typeahead').bind 'typeahead:select', (ev, suggestion) =>\n                console.log 'Selection: ' , suggestion, ev\n                # if qwant web feature\n                if suggestion and suggestion.indexOf('QwantWeb-') >= 0\n                    suggestion = suggestion.replace(\"QwantWeb-\", \"\")\n                    typeah.typeahead 'val', ''\n                    query = encodeURIComponent(suggestion)\n                    # do the intent\n                    intent =\n                        action: 'goto'\n                        params: \"qwant/search/web/#{query}\"\n                    window.postMessage(intent, window.location.origin)\n                # if qwant images feature\n                else if suggestion and suggestion.indexOf('QwantImages-') >= 0\n                    suggestion = suggestion.replace(\"QwantImages-\", \"\")\n                    typeah.typeahead 'val', ''\n                    query = encodeURIComponent(suggestion)\n                    # do the intent\n                    intent =\n                        action: 'goto'\n                        params: \"qwant/search/images/#{query}\"\n                    window.postMessage(intent, window.location.origin)\n                else\n                    # search in files\n                    window.app.routers.main.navigate \"apps/files/folders/be2639a48e5ee0775d5b34bebf2e6b60\", true\n                    typeah.typeahead 'val', ''\n\n            $('.twitter-typeahead').bind 'typeahead:cursorchange', (ev, suggestion) =>\n                # if qwant web feature\n                if suggestion and suggestion.indexOf('QwantWeb-') >= 0\n                    suggestion = suggestion.replace(\"QwantWeb-\", \"\")\n                    typeah.typeahead 'val', suggestion\n                # if qwant images feature\n                if suggestion and suggestion.indexOf('QwantImages-') >= 0\n                    suggestion = suggestion.replace(\"QwantImages-\", \"\")\n                    typeah.typeahead 'val', suggestion\n\n\n        else if @BEN_DEMO\n            substringMatcher = (items) =>\n                (query, cb) =>\n                    # an array that will be populated with the item wich matches\n                    matches = []\n\n                    # regexs used to determine if a string matches\n                    queryWords = query.toLowerCase().trim().split(' ')\n                    regExpList = []\n                    for word in queryWords\n                        if !reg = @regExpHistory[word]\n                            reg = new RegExp( word.split('').join('.*?'), 'g' )\n                            @regExpHistory[word] = reg\n                        regExpList.push reg\n\n                    # iterate through the pool of strings to find those that matche\n                    # all the regexp\n                    for item in items\n                        itemMatched = true\n                        for regExp in regExpList\n                            if not regExp.test(item.toLowerCase())\n                                itemMatched = false\n                                break\n                            regExp.lastIndex = 0\n                        if itemMatched\n                            matches.push item\n\n                    cb matches\n\n            states = [\n                # \"/Administratif/edf/toto\"\n                \"/Administratif\"\n                \"/Administratif/Bank statements\"\n                \"/Administratif/Bank statements/Bank Of America\"\n                \"/Administratif/Bank statements/Deutsche Bank\"\n                \"/Administratif/Bank statements/Société Générale\"\n                \"/Administratif/CPAM\"\n                \"/Administratif/EDF\"\n                \"/Administratif/EDF/Contrat\"\n                \"/Administratif/EDF/Factures\"\n                \"/Administratif/Emploi\"\n                \"/Administratif/Impôts\"\n                \"/Administratif/Logement\"\n                \"/Administratif/Logement/Loyer 158 rue de Verdun\"\n                \"/Administratif/Orange\"\n                \"/Administratif/Pièces identité\"\n                \"/Administratif/Pièces identité/Carte identité\"\n                \"/Administratif/Pièces identité/Passeport\"\n                \"/Administratif/Pièces identité/Permis de conduire\"\n                \"/Appareils photo\"\n                \"/Boulot\"\n                \"/Cours ISEN\"\n                \"/Cours ISEN/CIR\"\n                \"/Cours ISEN/CIR/LINUX\"\n                \"/Cours ISEN/CIR/MICROCONTROLEUR\"\n                \"/Cours ISEN/CIR/RESEAUX\"\n                \"/Cours ISEN/CIR/TRAITEMENT_SIGNAL\"\n                \"/Divers photo\"\n                \"/Divers photo/wallpapers\"\n                \"/Films\"\n                \"/Notes\"\n                \"/Notes/Communication\"\n                \"/Notes/Notes techniques\"\n                \"/Notes/Recrutement\"\n                \"/Projet appartement à Lyon\"\n                \"/Vacances Périgord\"\n            ]\n\n            trackCharsToHighlight = (item, charsToHighlight,startIndex,word)->\n                charsToHighlight[startIndex] = true\n                nChars = item.length\n                charIndex = startIndex\n                wordIndex = 1\n                while charIndex < nChars\n                    char = item[charIndex]\n                    if  char == word[wordIndex]\n                        charsToHighlight[charIndex] = true\n                        if ++wordIndex >= word.length\n                            return\n                    charIndex++\n                return\n\n            highlightItem = (item,charsToHighlight) ->\n                res = '<p>'\n                previousWasToHighlight = undefined\n                for isToHighlight, n in charsToHighlight\n                    if isToHighlight == previousWasToHighlight\n                       res +=  item[n]\n                    else\n                        if previousWasToHighlight\n                            res += '</strong>' + item[n]\n                        else\n                            res += '<strong class=\"tt-highlight\">' + item[n]\n                    previousWasToHighlight = isToHighlight\n                if previousWasToHighlight\n                    return res += '</strong></p>'\n                else\n                    return res += '</p>'\n\n            typeah = $('#search-bar')\n            typeah.typeahead {\n              hint      : true\n              highlight : true\n              minLength : 1\n              limit     : 8\n            },\n              name: 'states'\n              source: substringMatcher(states)\n              templates:\n                suggestion: (item)=>\n                    queryWords = typeah.typeahead('val').toLowerCase().trim().split(' ')\n                    itemLC = item.toLowerCase()\n                    fullWordsToHighlight = Array(item.length)\n\n                    for word in queryWords\n                        wordRegexp = @regExpHistory[word]\n                        wordRegexp.lastIndex = 0\n                        fullWordMatch_N = 0\n                        fuzzyWordsToHighlight = Array(item.length)\n\n                        # for each word of the query look for an occurence to\n                        # highlight\n                        while match = wordRegexp.exec(itemLC)\n                            # if the occurence is a contiguous string, keep it\n                            if match[0].length == word.length\n                                fullWordMatch_N++\n                                trackCharsToHighlight(itemLC, fullWordsToHighlight,match.index,word)\n                            # else keep it only if so far there was no full match\n                            else if fullWordMatch_N == 0\n                                trackCharsToHighlight(itemLC, fuzzyWordsToHighlight,match.index,word)\n                        # if there were only fuzzy match, fusionnates the fuzzy\n                        # chars to highllight with the full match chars.\n                        if fullWordMatch_N == 0\n                            for isToHighlight,n in fuzzyWordsToHighlight\n                                if isToHighlight\n                                    fullWordsToHighlight[n] = true\n\n                    return html = highlightItem(item,fullWordsToHighlight)\n\n\n\n\n\n            $('.twitter-typeahead').bind 'typeahead:select', (ev, suggestion) =>\n                console.log 'Selection: ' , suggestion, ev\n                window.app.routers.main.navigate \"apps/files/folders/be2639a48e5ee0775d5b34bebf2e6b60\", true\n                typeah.typeahead 'val', ''\n\n\n        else if @qwantEnable\n            @events = {\n                \"keyup #search-bar\": \"handleSubmit\"\n                'click #search-bar': \"onSearchClick\"\n            }\n\n        super\n\n    appendView: (view) ->\n","#  ------------------------------------------------\n#  -- structure of the tablists, tabs and panels --\n#  ------------------------------------------------\n#\n# tablists : somewhere in the dom :\n#     div(role='tablist', aria-controls='panelsCont')\n#       # aria-controls is the class of the element containing the tabpanels\n#\n#  panelsContainers : anywhere else a div with the class 'panelsCont'\n#  containing the tabpanel (role='tabpanel', aria-hidden='false')\n#     .panelsCont\n#          div(role='tabpanel', aria-hidden='false')\n#               # content\n#           div(role='tabpanel', aria-hidden='true')\n#               # content\n#           ... as many tabpanels\n#\n#  Question : shouldn't the panelCont be designated by its ID rather than\n#  its class ?\n#\n#  use case 1 : static html\n#   . create the html with the different tab lists (you can create as many as\n#     want)\n#   . tabControler = require 'path/to/tabConroler'\n#   . tabConroler.initializeTabs( rootElementContainingAllTabLists )\n#   . done !\n#\n#  use case 2 : decide dynamically the tabs you need and insert them one by one\n#   . NOTE : when the tabs are initialized you can NOT add new tabs.panel\n#   . create the html with the empty tabllists and divs that will contain\n#     the panels\n#   . create divs for tabs and panels and declare them ex :\n#       . tab = document.createElement('div')\n#         tab.textContent = 'my first tab'\n#         panel = document.createElement('div')\n#         tab.textContent = 'my first panel'\n#         tabControler = require 'path/to/tabConroler'\n#         params =\n#           tab   : tab\n#           panel : panel\n#           name  : 'panel-class-name'\n#         tabControler.addTab(panelsContainer, tabsContainer,params)\n#         # add as many tabs as expected and initialize\n#         tabConroler.initializeTabs( rootElementContainingAllTabLists )\n#\n\nmodule.exports = tabControler =\n    initializeTabs:(element) ->\n        tablists = element.querySelectorAll('[role=tablist]')\n        Array.prototype.forEach.call( tablists, (tablist)->\n            panelList = tablist.getAttribute('aria-controls')\n            panelList = document.querySelector(\".#{panelList}\")\n            tablist.addEventListener 'click', (event) ->\n                if event.target.getAttribute('role') != 'tab'\n                    return\n                panelName = event.target.getAttribute 'aria-controls'\n                panel     = panelList.querySelector(\".#{panelName}\")\n                # hide the panels that are not selected\n                for pan in panelList.children\n                    if pan.getAttribute('role') != 'tabpanel'\n                        continue\n                    if pan != panel\n                        pan.setAttribute('aria-hidden',true)\n                # show the selected panel\n                panel.setAttribute('aria-hidden',false)\n                panelSelectEvt = new Event('panelSelect',\n                                            bubbles:true,\n                                            cancelable:false)\n                panel.dispatchEvent(panelSelectEvt)\n                # hide or show the tabs\n                for tab in tablist.querySelectorAll('[role=tab]')\n                    if tab == event.target\n                        event.target.setAttribute('aria-selected',true)\n                    else\n                        tab.setAttribute('aria-selected', false)\n        )\n\n\n    #\n    # panelsContainer : [element] # element containing the panels\n    # tabsContainer   : [element] # element containing the tabs\n    # params =\n    #     tab         : [element] # the tab element to insert\n    #     panel       : [element] # the panel element to insert\n    #     name        : [String]  # class name of the panel\n    #\n    addTab: (panelsContainer, tabsContainer, params) ->\n        tab = params.tab\n        tab.setAttribute('role','tab')\n        tab.setAttribute('aria-controls', params.name)\n        tab.setAttribute('aria-selected', false)\n        tabsContainer.appendChild(tab)\n        panel = params.panel\n        panel.classList.add(params.name)\n        panel.setAttribute('role','tabpanel')\n        panel.setAttribute('aria-hidden', true)\n        panel.setAttribute('aria-selected', true)\n        panelsContainer.appendChild(panel)\n\n","BaseView = require 'lib/base_view'\nrequest = require 'lib/request'\nApplicationCollection = require '../collections/application'\n\nmodule.exports = class UpdateStackModal extends BaseView\n    id: 'market-popover-description-view'\n    className: 'modal md-modal md-effect-1'\n    tagName: 'div'\n    template: require 'templates/update_stack_modal'\n\n\n    events:\n        'click #cancelbtn':'onCancelClicked'\n        'click #confirmbtn':'onConfirmClicked'\n        'click #ok':'onClose'\n\n\n    initialize: (options) ->\n        super\n        @confirmCallback = options.confirm\n        @cancelCallback = options.cancel\n\n\n    afterRender: ->\n        @overlay = $ '.md-overlay'\n        @overlay.click @onCancelClicked\n        @$('.step2').hide()\n        @$('.success').hide()\n        @$('.error').hide()\n        @$('.permission-changes').hide()\n        @$('#ok').hide()\n        @body = @$ \".md-body\"\n\n\n    handleContentHeight: ->\n        @body.css 'max-height', \"#{$(window).height() / 2}px\"\n        $(window).on 'resize', =>\n            @body.css 'max-height', \"#{$(window).height() / 2}px\"\n\n\n    show: ->\n        @$el.addClass 'md-show'\n        @overlay.addClass 'md-show'\n        $('#home-content').addClass 'md-open'\n        setTimeout =>\n            @$('.md-content').addClass 'md-show'\n        , 300\n\n\n    hide: ->\n        $('.md-content').fadeOut =>\n            @overlay.removeClass 'md-show'\n            @$el.removeClass 'md-show'\n            @remove()\n        $('#home-content').removeClass 'md-open'\n\n\n    displaySuccessChanges: (changes) ->\n        @$('.step2').hide()\n        @$('.success').show()\n        @$('#ok').show()\n        @$('#confirmbtn').hide()\n        @showPermissionsChanged changes\n\n\n    # Display success message on modal.\n    # Add information about application that requires a dedicated update\n    # because of permission changes.\n    onSuccess: (changes) ->\n        @displaySuccessChanges changes\n\n\n    # Inform the user that an error occured during the update.\n    # Add information about application that requires a dedicated update\n    # because of permission changes.\n    onError: (err, changes) ->\n        @blocked = false\n\n        @displaySuccessChanges changes\n\n        if err.data?.message? and typeof(err.data.message) is 'object'\n            infos = err.data.message\n            if Object.keys(infos).length > 0\n                @$(\".stack-error\").hide()\n                html = \"<ul>\"\n                for app of infos\n                    html += \"\"\"\n                    <li class='app-broken'>#{app}</li>\n                    \"\"\"\n                html += \"</ul>\"\n                @body.append html\n        else\n            @$('.apps-error').hide()\n\n\n    # Show the list of application that requires a dedicated update because\n    # of application changes.\n    showPermissionsChanged: (changes) ->\n        if changes? and Object.keys(changes).length > 0\n            html = \"<ul>\"\n            for app of changes\n                html += \"\"\"\n                <li class='app-changed'>#{app}</li>\n                \"\"\"\n            html += \"</ul>\"\n            @$('.permission-changes').append html\n            @$('.permission-changes').show()\n\n\n    # This is function called when the process ended properly. The modal is\n    # hidden and the ending callback is fired.\n    onClose: =>\n        @hide()\n        @cancelCallback()\n\n\n    # When the update is running, the modal cannot be closed. The user should\n    # not be able to do anything until update is done.\n    onCancelClicked: =>\n        if @blocked\n            alert t 'stack updating block message'\n        else\n            @hide()\n            @cancelCallback()\n\n\n    onConfirmClicked: ->\n        @$('#cancelbtn').addClass 'disabled'\n        @confirmCallback()\n        @blocked = true\n        @$('.step1').hide()\n        @$('.step2').show()\n        @$('#confirmbtn').spin true\n","# Small widget used to changed installatio button style easily\nmodule.exports = class ColorButton\n\n    constructor: (@button) ->\n        @label = @button.find '.label' or @button\n\n    displayGrey: (text) ->\n        @button.show()\n        @label.html text\n        @button.removeClass \"btn-red\"\n        @button.removeClass \"btn-green\"\n        @button.removeClass \"btn-orange\"\n\n\n    displayOrange: (text) ->\n        @button.show()\n        @label.html text\n        @button.removeClass \"btn-red\"\n        @button.removeClass \"btn-green\"\n        @button.addClass \"btn-orange\"\n\n    displayGreen: (text) ->\n        @button.show()\n        @label.html text\n        @button.addClass \"btn-green\"\n        @button.removeClass \"btn-red\"\n        @button.removeClass \"btn-orange\"\n\n    displayRed: (text) ->\n        @button.show()\n        @label.html text\n        @button.removeClass \"btn-green\"\n        @button.addClass  \"btn-red\"\n        @button.removeClass \"btn-orange\"\n\n    hide: ->\n        @button.hide()\n\n    show: ->\n        @button.show()\n\n    isGreen: ->\n        @button.hasClass \"btn-green\"\n\n    spin: (toggle) ->\n        @button.spin toggle\n\n    isHidden: ->\n        return not @button.is(\":visible\")\n\n\n"]}